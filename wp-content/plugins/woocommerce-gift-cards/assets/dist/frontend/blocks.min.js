!function(){var a={184:function(e,t){var a;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r,c=typeof a;if("string"==c||"number"==c)e.push(a);else if(Array.isArray(a))a.length&&(r=s.apply(null,a))&&e.push(r);else if("object"==c)if(a.toString===Object.prototype.toString)for(var o in a)n.call(a,o)&&a[o]&&e.push(o);else e.push(a.toString())}}return e.join(" ")}e.exports?e.exports=s.default=s:void 0!==(a=function(){return s}.apply(t,[]))&&(e.exports=a)}()}},r={};function T(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},a[e](t,t.exports,T)),t.exports}T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,{a:t}),t},T.d=function(e,t){for(var a in t)T.o(t,a)&&!T.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){"use strict";var l=window.wc.wcSettings,d=()=>{var{show_balance_checkbox:e,show_remaining_balance_per_gift_card:t,is_ui_disabled:a,is_cart_disabled:r,is_redeeming_enabled:c,is_cart:o,is_checkout:n,account_orders_link:s}=(0,l.getSetting)("wc-gift-cards-blocks_data");return{isUiDisabled:a,isCartDisabled:r,isRedeemingEnabled:c,isCart:o,isCheckout:n,showBalanceCheckbox:e,showRemainingBalance:t,accountOrdersLink:s}},C=window.React,R=window.wc.blocksCheckout,u=window.wp.i18n,S=window.wp.element,e=window.wp.data,t=window.wp.compose,a=T(184),O=T.n(a),f=({children:e,className:t,screenReaderLabel:a,isLoading:r=!0})=>(0,C.createElement)("div",{className:O()(t,{"wc-block-components-loading-mask":r})},(0,C.createElement)("div",{className:O()({"wc-block-components-loading-mask__children":r}),"aria-hidden":r},e),r&&(0,C.createElement)("span",{className:"screen-reader-text"},a||(0,u.__)("Loadingâ€¦","woocommerce-gift-cards"))),p=({className:e,id:t,type:a="text",ariaLabel:r,ariaDescribedBy:c,label:o,screenReaderLabel:n,disabled:s,autoCapitalize:l="off",autoComplete:i="off",value:m="",onChange:d,min:u,max:f,step:p,hasError:g=!1,required:w=!1,focusOnMount:b=!1,onBlur:_=()=>{}})=>{const[h,v]=(0,S.useState)(!0),[k,y]=(0,S.useState)(!1),E=(0,S.useRef)(null),x=((0,S.useEffect)(()=>{h&&b&&E.current?.focus(),v(!1)},[b,h]),"number"===a?{step:p,min:u,max:f}:{}),N={};return Object.keys(x).forEach(e=>{void 0!==x[e]&&(N[e]=x[e])}),(0,C.createElement)("div",{className:O()("wc-gift-cards-text-input",e,{"is-active":k||m,"has-error":g})},(0,C.createElement)("input",{type:a,id:t,value:m,ref:E,autoCapitalize:l,autoComplete:i,onChange:e=>{d(e.target.value)},onFocus:()=>y(!0),onBlur:e=>{_(e.target.value),y(!1)},"aria-label":r||o,"aria-invalid":!0===g,disabled:s,"aria-describedby":g?c:"",required:w,...N}),(0,C.createElement)(R.Label,{label:o,screenReaderLabel:n||o,wrapperElement:"label",wrapperProps:{htmlFor:t},htmlFor:t}))},r=(0,t.compose)((0,e.withDispatch)(e=>{e=e("core/notices").createNotice;return{createNotice:e}}))(({extensions:e,createNotice:t})=>{const[a,r]=(0,S.useState)(""),[c,o]=(0,S.useState)(!1),[n,s]=(0,S.useState)(!1),[l,i]=(0,S.useState)("");if(!0==(!e||!e.hasOwnProperty("woocommerce-gift-cards")||!e["woocommerce-gift-cards"].hasOwnProperty("account_giftcards")))return null;const m=d()["isCheckout"];return(0,C.createElement)(R.Panel,{className:"wc-gift-cards-apply-panel",hasBorder:!1,initialOpen:!1,title:(0,u.__)("Have a gift card?","woocommerce-gift-cards")},(0,C.createElement)(f,{isLoading:c},(0,C.createElement)("form",{className:"wc-gift-cards-form"},(0,C.createElement)(p,{id:"wc-gift-cards-form-input",label:(0,u.__)("Enter code","woocommerce-gift-cards"),type:"string",value:a,disabled:c,ariaDescribedBy:"validate-error-gift-card",onChange:e=>{r(e)},focusOnMount:!0,hasError:n&&""===a,errorMessage:l}),(0,C.createElement)(R.Button,{className:"wc-gift-cards-form__button",disabled:null===a||""===a||c,showSpinner:c,onClick:e=>{e.preventDefault(),(e=(e=a).trim()).match(/^([a-zA-Z0-9]{4}[\-]){3}[a-zA-Z0-9]{4}$/)?(o(!0),s(!1),i(""),(0,R.extensionCartUpdate)({namespace:"woocommerce-gift-cards",data:{action:"apply_gift_card_to_session",wc_gc_cart_code:e}}).then(()=>{var e=(0,u.__)("Gift card code has been applied.","woocommerce-gift-cards");t("default",e,{id:"wc-gift-cards-form-notice",type:"snackbar",context:m?"wc/checkout":"wc/cart"})}).catch(e=>{s(!0),e?.message&&"string"==typeof e.message?i(e.message):i((0,u.__)("An unknown error occurred.","woocommerce-gift-cards"))}).finally(()=>{o(!1),r("")})):(e=(0,u.__)("Please enter a gift card code that follows the format XXXX-XXXX-XXXX-XXXX, where X can be any letter or number.","woocommerce-gift-cards"),r(""),i(e),s(!0))},type:"submit"},(0,u.__)("Apply","woocommerce-gift-cards")),n&&(0,C.createElement)("div",{className:"wc-gift-cards-form__error",role:"alert"},(0,C.createElement)(S.RawHTML,{id:"validate-error-gift-card"},l)))))}),c=e=>{var{className:e,extensions:t}=e;return(0,C.createElement)(R.TotalsWrapper,{className:e},(0,C.createElement)(r,{extensions:t}))},a=JSON.parse('{"name":"woocommerce/checkout-order-summary-gift-card-form-block","version":"1.0.0","title":"Gift Card Form","description":"Shows the apply gift card form.","category":"woocommerce","supports":{"align":false,"html":false,"multiple":false,"reusable":false},"attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}},"parent":["woocommerce/checkout-order-summary-block"],"textdomain":"woocommerce-gift-cards","apiVersion":2}');var m=window.wc.priceFormat,o=({extensions:e})=>{const{is_using_balance:t,available_total:a,pending_total:r}=e["woocommerce-gift-cards"],c=d()["accountOrdersLink"],[o,n]=(0,S.useState)(t),[s,l]=(0,S.useState)(!1);e=s;var i=(0,S.useMemo)(()=>{var e=(0,u.sprintf)((0,u.__)("Use %s from your gift cards balance.","woocommerce-gift-cards"),"<strong>"+(0,m.formatPrice)(a)+"</strong>"),t='<a href="'+c+'">'+(0,u.__)("pending orders","woocommerce-gift-cards")+"</a>",t=(0,u.sprintf)((0,u.__)("%1$s on hold in %2$s","woocommerce-gift-cards"),(0,m.formatPrice)(r),t);return(0,C.createElement)(S.RawHTML,{className:"wc-gift-cards-checkbox-message"},e,0<r&&'<div class="wc-block-components-totals-item__description">'+t+"</div>")},[a,r,c]);return(0,C.createElement)(R.TotalsWrapper,null,(0,C.createElement)("div",{className:O()("wc-gc-balance-checkbox-container",{"wc-gc-balance-checkbox-container--disabled":e})},(0,C.createElement)(R.CheckboxControl,{className:"wc-gc-balance-checkbox",id:"wc-gc-balance-checkbox",checked:o,onChange:e=>{return e=e,l(!0),void(0,R.extensionCartUpdate)({namespace:"woocommerce-gift-cards",data:{action:"set_balance_usage",value:e?"yes":"no"}}).then(()=>{n(e=>!e)}).finally(()=>{l(!1)})},disabled:e},i)))},g=({text:e,screenReaderText:t="",element:a="li",className:r="",radius:c="small",children:o=null,...n})=>{r=O()(r,"wc-block-components-chip","wc-block-components-chip--radius-"+c),c=Boolean(t&&t!==e);return(0,C.createElement)(a,{className:r,...n},(0,C.createElement)("span",{"aria-hidden":c,className:"wc-block-components-chip__text"},e),c&&(0,C.createElement)("span",{className:"screen-reader-text"},t),o)};function w(e){let{icon:t,size:a=24,...r}=e;return(0,S.cloneElement)(t,{width:a,height:a,...r})}var n=window.wp.primitives,b=(0,S.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,S.createElement)(n.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),_=({ariaLabel:e="",className:t="",disabled:a=!1,onRemove:r=()=>{},removeOnAnyClick:c=!1,text:o,screenReaderText:n="",...s})=>{var l=c?"span":"button",i={"aria-label":e=e?e:"string"!=typeof(i=n&&"string"==typeof n?n:o)?(0,u.__)("Remove","woocommerce-gift-cards"):(0,u.sprintf)((0,u.__)('Remove gift card "%s"',"woocommerce-gift-cards"),i),disabled:a,onClick:r,onKeyDown:e=>{"Backspace"!==e.key&&"Delete"!==e.key||r()}},e=c?i:{},i=c?{"aria-hidden":!0}:i;return(0,C.createElement)(g,{...s,...e,className:O()(t,"is-removable",{"is-removing":a}),element:c?"button":s.element,screenReaderText:n,text:o},(0,C.createElement)(l,{className:"wc-block-components-chip__remove",...i},(0,C.createElement)(w,{className:"wc-block-components-chip__remove-icon",icon:b,size:16})))},s=({giftcard:e,handleRemove:t})=>{var a=(0,m.getCurrency)();const[r,c]=(0,S.useState)(!1),{id:o,code:n,amount:s,balance:l,pending_message:i}=e;e=d().showRemainingBalance;return(0,C.createElement)(R.TotalsWrapper,null,(0,C.createElement)(R.TotalsItem,{className:"wc-gift-cards-totals wc-block-components-totals-discount",currency:a,label:(0,u.__)("Gift Card:","woocommerce-gift-cards"),value:-1*parseInt(s,10),description:(0,C.createElement)(C.Fragment,null,(0,C.createElement)(_,{key:"gifcard-"+n,className:"wc-gift-cards-totals-giftcard__code-list-item",text:n,element:"div",radius:"large",screenReaderText:(0,u.sprintf)((0,u.__)("Gift Card: %s","woocommerce-gift-cards"),n),disabled:r,onRemove:()=>{c(!0),t(o)},ariaLabel:(0,u.sprintf)((0,u.__)('Remove gift card "%s"',"woocommerce-gift-cards"),n)}),i&&(0,C.createElement)(S.RawHTML,null,i),e&&(0,C.createElement)("div",null,(0,C.createElement)("strong",null,(0,u.__)("Remaining Balance:","woocommerce-gift-cards")),(0,C.createElement)("div",null,(0,m.formatPrice)(l-s))))}))},i=(0,t.compose)((0,e.withDispatch)(e=>{e=e("core/notices").createNotice;return{createNotice:e}}))(({extensions:e,createNotice:t})=>{e=e["woocommerce-gift-cards"].applied_giftcards;if(!e.length)return null;const a=d()["isCheckout"],r=e=>{(0,R.extensionCartUpdate)({namespace:"woocommerce-gift-cards",data:{action:"remove_gift_card_from_session",wc_gc_remove_id:e}}).then(()=>{var e=(0,u.__)("Gift card code has been removed.","woocommerce-gift-cards");t("default",e,{id:"wc-gift-cards-removed-gift-card",type:"snackbar",context:a?"wc/checkout":"wc/cart"})}).catch(()=>{})};return e.map(e=>(0,C.createElement)(s,{key:"giftcard-"+e.id,giftcard:e,handleRemove:r}))}),h=({extensions:e})=>{var t,a,{account_giftcards:e,balance:r,available_total:c}=e["woocommerce-gift-cards"];return 0===e.length?null:(t=(0,m.getCurrency)(),a=e.reduce((e,t)=>e+=parseInt(t.amount,10),0),(0,C.createElement)(C.Fragment,null,(0,C.createElement)(R.TotalsWrapper,null,(0,C.createElement)(R.TotalsItem,{className:"wc-gift-cards-totals wc-block-components-totals-discount",currency:t,label:(0,u.__)("Gift Cards Balance","woocommerce-gift-cards"),value:-1*a,description:(0,C.createElement)(C.Fragment,null,(0,C.createElement)("strong",null,(0,u._n)("Code:","Codes:",e.length,"woocommerce-gift-cards")),(0,C.createElement)("ul",{className:"wc-block-components-totals-discount__coupon-list"},e.map(e=>(0,C.createElement)(g,{key:"account-giftcard-"+e.code,className:"wc-block-components-totals-discount__coupon-list-item",text:e.code,radius:"large",screenReaderText:(0,u.sprintf)((0,u.__)("Gift Card: %s","woocommerce-gift-cards"),e.code)}))),(0,C.createElement)("strong",null,(0,u.__)("Remaining Balance:","woocommerce-gift-cards")),(0,C.createElement)("div",null,(0,m.formatPrice)(r-c)))}))))},v=({extensions:e})=>{var t,a;return!0!=(!e||!e.hasOwnProperty("woocommerce-gift-cards")||!e["woocommerce-gift-cards"].hasOwnProperty("account_giftcards"))&&({cart_total:e,applied_giftcards:a,account_giftcards:t}=e["woocommerce-gift-cards"],a.length||t.length)?(a=(0,m.getCurrency)(),(0,C.createElement)(R.TotalsWrapper,null,(0,C.createElement)(R.TotalsItem,{className:"wc-gift-cards-totals wc-block-components-totals-footer-item",currency:a,label:(0,u.__)("Total","woocommerce-gift-cards"),value:parseInt(e,10),description:(0,u.__)("(before gift cards)","woocommerce-gift-cards")}))):null},k=e=>{var t,a,r,c;return!0==(!e.extensions||!e.extensions.hasOwnProperty("woocommerce-gift-cards")||!e?.extensions["woocommerce-gift-cards"].hasOwnProperty("account_giftcards"))?null:({balance:c,available_total:t}=e.extensions["woocommerce-gift-cards"],{isRedeemingEnabled:a,showBalanceCheckbox:r}=d(),c=0<c&&a&&r,(0,C.createElement)(C.Fragment,null,(0,C.createElement)(v,{...e}),(0,C.createElement)(i,{...e}),c&&0<t&&(0,C.createElement)(o,{...e}),c&&(0,C.createElement)(h,{...e})))},y=e=>{var t=e["className"];return(0,C.createElement)("div",{className:t},(0,C.createElement)(k,{...e}))},n=JSON.parse('{"name":"woocommerce/checkout-order-summary-gift-card-totals-block","version":"1.0.0","title":"Gift Card Totals","description":"Shows the gift card totals.","category":"woocommerce","supports":{"align":false,"html":false,"multiple":false,"reusable":false},"attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}},"parent":["woocommerce/checkout-order-summary-block"],"textdomain":"woocommerce-gift-cards","apiVersion":2}');var E=e=>{var{className:e,extensions:t}=e;return(0,C.createElement)(R.TotalsWrapper,{className:e},(0,C.createElement)(r,{extensions:t}))},t=JSON.parse('{"name":"woocommerce/cart-order-summary-gift-card-form-block","version":"1.0.0","title":"Gift Card Form","description":"Shows the apply gift card form.","category":"woocommerce","supports":{"align":false,"html":false,"multiple":false,"reusable":false},"attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}},"parent":["woocommerce/cart-order-summary-block"],"textdomain":"woocommerce-gift-cards","apiVersion":2}');var x=e=>{var t=e["className"];return(0,C.createElement)("div",{className:t},(0,C.createElement)(k,{...e}))},e=JSON.parse('{"name":"woocommerce/cart-order-summary-gift-card-totals-block","version":"1.0.0","title":"Gift Card Totals","description":"Shows the gift card totals.","category":"woocommerce","supports":{"align":false,"html":false,"multiple":false,"reusable":false},"attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}},"parent":["woocommerce/cart-order-summary-block"],"textdomain":"woocommerce-gift-cards","apiVersion":2}');var{isCartDisabled:N,isUiDisabled:B}=d();B||((0,R.registerCheckoutBlock)({metadata:a,component:e=>(0,C.createElement)(c,{...e})}),(0,R.registerCheckoutBlock)({metadata:n,component:e=>(0,C.createElement)(y,{...e})}),N)||((0,R.registerCheckoutBlock)({metadata:t,component:e=>(0,C.createElement)(E,{...e})}),(0,R.registerCheckoutBlock)({metadata:e,component:e=>(0,C.createElement)(x,{...e})}))}()}();