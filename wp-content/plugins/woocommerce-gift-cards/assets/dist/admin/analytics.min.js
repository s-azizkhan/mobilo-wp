!function(){var r={703:function(e,t,r){"use strict";var i=r(414);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,s){if(s!==i)throw(s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",s}function t(){return e}var r={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r}},697:function(e,t,r){e.exports=r(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},a={};function L(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},r[e](t,t.exports,L)),t.exports}L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,{a:t}),t},L.d=function(e,t){for(var r in t)L.o(t,r)&&!L.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){"use strict";var O=window.wp.hooks,B=window.wp.i18n,Q=window.React,H=window.wp.element,e=L(697),e=L.n(e),V=window.wc.components;const i=[{label:(0,B.__)("Show Gift Cards","woocommerce-gift-cards"),staticParams:["filter"],param:"section",showFilters:()=>!0,filters:[{label:(0,B._x)("Used","analytics filter label","woocommerce-gift-cards"),value:"used"},{label:(0,B._x)("Issued","analytics filter label","woocommerce-gift-cards"),value:"issued"},{label:(0,B._x)("Expired","analytics filter label","woocommerce-gift-cards"),value:"expired"}]}],n="giftcards-issued",c=[{key:"giftcards_count",label:(0,B.__)("Issued Gift Cards","woocommerce-gift-cards"),order:"desc",orderby:"date",type:"number"},{key:"issued_balance",label:(0,B.__)("Issued Amount","woocommerce-gift-cards"),order:"desc",orderby:"issued_balance",type:"currency"}];var t=window.wp.compose,r=(window.wp.htmlEntities,window.wp.data),j=window.lodash,M=window.wc.navigation,d=window.wc.number,l=window.wc.wcSettings,_=window.wc.date,Y=window.wc.data,G=window.wp.components,W=window.wp.dom,U=window.wc.csvExport,$=()=>(0,Q.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24"},(0,Q.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519 C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14 C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}));class a extends H.Component{render(){var{className:e,isError:t,isEmpty:r}=this.props;let a,o,s,i;return t?(a=(0,B.__)("There was an error getting your stats. Please try again.","woocommerce-product-bundles"),o=(0,B.__)("Reload","woocommerce-product-bundles"),i=()=>{window.location.reload()}):r&&(a=(0,B.__)("No results could be found for this date range.","woocommerce-product-bundles"),o=(0,B.__)("View Orders","woocommerce-product-bundles"),s=(0,l.getAdminLink)("edit.php?post_type=shop_order")),(0,Q.createElement)(V.EmptyContent,{className:e,title:a,actionLabel:o,actionURL:s,actionCallback:i})}}a.propTypes={className:e().string,isError:e().bool,isEmpty:e().bool},a.defaultProps={className:""};var K=a;var o=i=>{const{getHeadersContent:a,getRowsContent:o,getSummary:s,isRequesting:e,primaryData:t,tableData:r,endpoint:n,itemIdField:c,tableQuery:I,compareBy:d,compareParam:l,searchBy:m,labels:u={},...p}=i,{query:g,columnPrefsKey:y}=i,{items:f,query:h}=r;var _=g[l]?(0,M.getIdsFromQuery)(g[d]):[];const[b,w]=(0,H.useState)(_),C=(0,H.useRef)(null),{updateUserPreferences:v,...R}=(0,Y.useUserPreferences)();if(r.isError||t.isError)return(0,Q.createElement)(K,{isError:!0});let q=[];y&&(q=R&&R[y]?R[y]:q);const E=(e,t,r)=>{r=s?s(t,r):null;return(0,O.applyFilters)("woocommerce_admin_report_table",{endpoint:n,headers:a(),rows:o(e),totals:t,summary:r,items:f})};const S=e=>{var t=i["ids"];w(e?t:[])},x=(e,t)=>{var r=i["ids"];t?w((0,j.uniq)([r[e],...b])):(t=b.indexOf(r[e]),w([...b.slice(0,t),...b.slice(t+1)]))};var _=e||r.isRequesting||t.isRequesting,D=(0,j.get)(t,["data","totals"],{}),k=f.totalResults||0,T=0<k,F=(0,M.getSearchWords)(g).map(e=>({key:e,label:e})),P=f["data"],P=E(P,D,k);let{headers:N,rows:A}=P;var L,D=P["summary"],P=(d&&(A=A.map((e,t)=>[(e=>{var{ids:t=[]}=i,t=-1!==b.indexOf(t[e]);return{display:(0,Q.createElement)(G.CheckboxControl,{onChange:(0,j.partial)(x,e),checked:t}),value:!1}})(t),...e]),N=[(()=>{var{ids:e=[]}=i,t=0<e.length,e=t&&e.length===b.length;return{cellClassName:"is-checkbox-column",key:"compare",label:(0,Q.createElement)(G.CheckboxControl,{onChange:S,"aria-label":(0,B.__)("Select All"),checked:e,disabled:!t}),required:!0}})(),...N]),P=N,(L=q)?P.map(e=>({...e,visible:e.required||!L.includes(e.key)})):P.map(e=>({...e,visible:e.required||!e.hiddenByDefault})));return(0,Q.createElement)(H.Fragment,null,(0,Q.createElement)("div",{className:"woocommerce-report-table__scroll-point",ref:C,"aria-hidden":!0}),(0,Q.createElement)(V.TableCard,{className:"woocommerce-report-table-"+n.replace("/","-"),hasSearch:!!m,actions:[d&&(0,Q.createElement)(V.CompareButton,{key:"compare",className:"woocommerce-table__compare",count:b.length,helpText:u.helpText||(0,B.__)("Check at least two items below to compare","woocommerce-admin"),onClick:()=>{d&&(0,M.onQueryChange)("compare")(d,l,b.join(","))},disabled:!T},u.compareButton||(0,B.__)("Compare","woocommerce-admin")),m&&(0,Q.createElement)(V.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:e=>{var t=i["baseSearchQuery"],e=e.map(e=>e.label.replace(",","%2C"));e.length?(0,M.updateQueryString)({filter:void 0,[l]:void 0,[m]:void 0,...t,search:(0,j.uniq)(e).join(",")}):(0,M.updateQueryString)({search:void 0})},placeholder:u.placeholder||(0,B.__)("Search by item name","woocommerce-admin"),selected:F,showClearButton:!0,type:m,disabled:!T}),T&&(0,Q.createElement)(G.Button,{key:"download",className:"woocommerce-table__download-button",disabled:_,onClick:()=>{const{createNotice:t,startExport:e,title:r}=i;var a=Object.assign({},g),{data:o,totalResults:s}=f;delete a.extended_info,a.search&&delete a[m],o&&o.length===s?({headers:o,rows:s}=E(o,s),(0,U.downloadCSVFile)((0,U.generateCSVFileName)(r,a),(0,U.generateCSVDataFromTable)(o,s))):e(n,h).then(()=>t("success",(0,B.sprintf)((0,B.__)("Your %s Report will be emailed to you.","woocommerce-admin"),r))).catch(e=>t("error",e.message||(0,B.sprintf)((0,B.__)("There was a problem exporting your %s Report. Please try again.","woocommerce-admin"),r)))}},(0,Q.createElement)($,null),(0,Q.createElement)("span",{className:"woocommerce-table__download-button__label"},u.downloadButton||(0,B.__)("Download","woocommerce-admin")))],headers:P,isLoading:_,onQueryChange:M.onQueryChange,onColumnsChange:(t,e)=>{var r=N.map(e=>e.key).filter(e=>!t.includes(e));y&&(r={[y]:r},v(r))},onSort:(e,t)=>{(0,M.onQueryChange)("sort")(e,t);n},onPageChange:(e,t)=>{C.current.scrollIntoView();var r=C.current.nextSibling.querySelector(".woocommerce-table__table"),r=W.focus.focusable.find(r);r.length&&r[0].focus()},rows:A,rowsPerPage:parseInt(h.per_page,10)||Y.QUERY_DEFAULTS.pageSize,summary:D,totalRows:k,...p}))};o.propTypes={baseSearchQuery:e().object,compareBy:e().string,compareParam:e().string,columnPrefsKey:e().string,endpoint:e().string,getHeadersContent:e().func.isRequired,getRowsContent:e().func.isRequired,getSummary:e().func,itemIdField:e().string,labels:e().shape({compareButton:e().string,downloadButton:e().string,helpText:e().string,placeholder:e().string}),primaryData:e().object,searchBy:e().string,summaryFields:e().arrayOf(e().string),tableData:e().object.isRequired,tableQuery:e().object,title:e().string.isRequired},o.defaultProps={primaryData:{},tableData:{items:{data:[],totalResults:0},query:{}},tableQuery:{},compareParam:"filter",downloadable:!1,onSearch:j.noop,baseSearchQuery:{}};const u={};var s=(0,t.compose)((0,r.withSelect)((e,t)=>{var{endpoint:t,getSummary:r,isRequesting:a,query:o,tableData:s,tableQuery:i,filters:n,advancedFilters:c,summaryFields:d,extendedItemsStoreName:l}=t,m=e(Y.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"];return a?u:(a=e(Y.REPORTS_STORE_NAME),l&&e(l),{primaryData:r?(0,Y.getReportChartData)({endpoint:t,dataType:"primary",query:o,select:e,selector:a,filters:n,advancedFilters:c,defaultDateRange:m,fields:d}):u,tableData:s||(0,Y.getReportTableData)({endpoint:t,query:o,select:e,selector:a,tableQuery:i,filters:n,advancedFilters:c,defaultDateRange:m}),query:o})}),(0,r.withDispatch)(e=>{var t=e(Y.EXPORT_STORE_NAME)["startExport"],e=e("core/notices")["createNotice"];return{createNotice:e,startExport:t}}))(o),o=window.wc.currency;const E=L.n(o)()(l.CURRENCY);o=(0,H.createContext)(E);class m extends H.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:(0,B.__)("Code","woocommerce-gift-cards"),key:"giftcard_code",required:!0,isLeftAligned:!0,isSortable:!1},{label:(0,B.__)("Issued Amount","woocommerce-gift-cards"),key:"issued_balance",required:!0,isSortable:!0,isNumeric:!0},{label:(0,B.__)("Issued Date","woocommerce-gift-cards"),key:"date",defaultSort:!0,isSortable:!0,isNumeric:!0},{label:(0,B.__)("Expiration Date","woocommerce-gift-cards"),key:"expire_date",isSortable:!0,isNumeric:!0}].filter(Boolean)}getRowsContent(e=[]){var t=this.props["query"];(0,M.getPersistedQuery)(t);const s=(0,l.getSetting)("dateFormat",_.defaultTableDateFormat),{render:i,formatDecimal:n,getCurrencyConfig:r}=this.context;r();return(0,j.map)(e,e=>{var{create_date:e,giftcard_id:t,giftcard_code:r,issued_balance:a,expire_date:o}=e,t=(0,l.getAdminLink)("admin.php?page=gc_giftcards&section=edit&giftcard="+t);return[{display:(0,Q.createElement)(V.Link,{href:t,type:"wp-admin"},r),value:r},{display:i(a),value:n(a)},{display:e?(0,Q.createElement)(V.Date,{date:e,visibleFormat:s}):(0,B.__)("N/A","woocommerce-gift-cards"),value:e},{display:o?(0,Q.createElement)(V.Date,{date:o,visibleFormat:s}):(0,B.__)("N/A","woocommerce-gift-cards"),value:o}].filter(Boolean)})}getSummary(e){var{giftcards_count:e=0,issued_balance:t=0}=e,{formatAmount:r,getCurrencyConfig:a}=this.context,a=a();return[{label:(0,B._n)("gift card issued","gift cards issued",e,"woocommerce-gift-cards"),value:(0,d.formatValue)(a,"number",e)},{label:(0,B.__)("issued","woocommerce-gift-cards"),value:r(t)}]}render(){var{filters:e,isRequesting:t,hideCompare:r,query:a,endpoint:o}=this.props;return(0,Q.createElement)(s,{endpoint:o,getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["giftcards_count","issued_balance"],itemIdField:"giftcard_id",isRequesting:t,query:a,compareBy:r?void 0:"giftcards",tableQuery:{orderby:a.orderby||"issued_balance",order:a.order||"desc",segmentby:a.segmentby},title:(0,B.__)("Gift Cards","woocommerce-gift-cards"),columnPrefsKey:"giftcards_issued_report_columns",filters:e})}}m.contextType=o;var S=m;class p extends H.Component{formatVal(e,t){var{formatAmount:r,getCurrencyConfig:a}=this.context;return"currency"===t?r(e):(0,d.formatValue)(a(),t,e)}getValues(e,t){var{emptySearchResults:r,summaryData:a}=this.props,a=a["totals"],o=a.primary?a.primary[e]:0,a=a.secondary?a.secondary[e]:0,e=r?0:o,o=r?0:a;return{delta:(0,d.calculateDelta)(e,o),prevValue:this.formatVal(o,t),value:this.formatVal(e,t)}}render(){const{charts:e,query:t,selectedChart:c,summaryData:r,defaultDateRange:a}=this.props;var{isError:o,isRequesting:s}=r;if(!o){if(s)return(0,Q.createElement)(V.SummaryListPlaceholder,{numberOfItems:e.length});const d=(0,_.getDateParamsFromQuery)(t,a)["compare"];return(0,Q.createElement)(V.SummaryList,null,({onToggle:n})=>e.map(e=>{var{key:e,order:t,orderby:r,label:a,type:o}=e,s={chart:e},r=(r&&(s.orderby=r),t&&(s.order=t),(0,M.getNewPath)(s)),t=c.key===e,{delta:s,prevValue:o,value:i}=this.getValues(e,o);return(0,Q.createElement)(V.SummaryNumber,{key:e,delta:s,href:r,label:a,prevLabel:"previous_period"===d?(0,B.__)("Previous Period:","woocommerce-product-bundles"):(0,B.__)("Previous Year:","woocommerce-product-bundles"),prevValue:o,selected:t,value:i,onLinkClickCallback:()=>{n&&n()}})}))}}}p.propTypes={charts:e().array.isRequired,endpoint:e().string.isRequired,query:e().object.isRequired,selectedChart:e().shape({key:e().string.isRequired,label:e().string.isRequired,order:e().oneOf(["asc","desc"]),orderby:e().string,type:e().oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:e().object,report:e().string},p.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},p.contextType=o;var g=(0,t.compose)((0,r.withSelect)((e,t)=>{const{charts:r,endpoint:a,limitProperties:o,query:s,filters:i,advancedFilters:n}=t;var c,t=o||[a],d=t.some(e=>s[e]&&s[e].length);return s.search&&!d?{emptySearchResults:!0}:(d=r&&r.map(e=>e.key),c=e(Y.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],{summaryData:(0,Y.getSummaryNumbers)({endpoint:a,query:s,select:e,limitBy:t,filters:i,advancedFilters:n,defaultDateRange:c,fields:d}),defaultDateRange:c})}))(p),y=window.wp.date;class f extends H.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!(0,j.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:a}=this.props;return e.data.intervals.map(function(e){const r={};return e.subtotals.segments.forEach(function(e){var t;e.segment_label&&(t=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label,r[e.segment_id]={label:t,value:e.subtotals[a.key]||0})}),{date:(0,y.format)("Y-m-d\\TH:i:s",e.date_start),...r}})}getTimeChartData(){const{query:a,primaryData:e,secondaryData:o,selectedChart:s,defaultDateRange:t}=this.props,i=(0,_.getIntervalForQuery)(a),{primary:n,secondary:c}=(0,_.getCurrentDates)(a,t);return e.data.intervals.map(function(e,t){var r=(0,_.getPreviousDate)(e.date_start,n.after,c.after,a.compare,i),t=o.data.intervals[t];return{date:(0,y.format)("Y-m-d\\TH:i:s",e.date_start),primary:{label:`${n.label} (${n.range})`,labelDate:e.date_start,value:e.subtotals[s.key]||0},secondary:{label:`${c.label} (${c.range})`,labelDate:r.format("YYYY-MM-DD HH:mm:ss"),value:t&&t.subtotals[s.key]||0}}})}getTimeChartTotals(){var{primaryData:e,secondaryData:t,selectedChart:r}=this.props;return{primary:(0,j.get)(e,["data","totals",r.key],null),secondary:(0,j.get)(t,["data","totals",r.key],null)}}renderChart(e,t,r,a){var{emptySearchResults:o,filterParam:s,interactiveLegend:i,itemsLabel:n,legendPosition:c,path:d,query:l,selectedChart:m,showHeaderControls:u,primaryData:p}=this.props,g=(0,_.getIntervalForQuery)(l),y=(0,_.getAllowedIntervalsForQuery)(l),p=(0,_.getDateFormatsForInterval)(g,p.data.intervals.length),o=o?(0,B.__)("No data for the current search","woocommerce-admin"):(0,B.__)("No data for the selected date range","woocommerce-admin"),{formatAmount:f,getCurrencyConfig:h}=this.context;return(0,Q.createElement)(V.Chart,{allowedIntervals:y,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:o,filterParam:s,interactiveLegend:i,interval:g,isRequesting:t,itemsLabel:n,legendPosition:c,legendTotals:a,mode:e,path:d,query:l,screenReaderFormat:p.screenReaderFormat,showHeaderControls:u,title:m.label,tooltipLabelFormat:p.tooltipLabelFormat,tooltipTitle:"time-comparison"===e&&m.label||null,tooltipValueFormat:(0,Y.getTooltipValueFormat)(m.type,f),chartType:(0,_.getChartTypeForQuery)(l),valueType:m.type,xFormat:p.xFormat,x2Format:p.x2Format,currency:h()})}renderItemComparison(){var{isRequesting:e,primaryData:t}=this.props;return t.isError?(0,Q.createElement)(K,{isError:!0}):(e=e||t.isRequesting,t=this.getItemChartData(),this.renderChart("item-comparison",e,t))}renderTimeComparison(){var{isRequesting:e,primaryData:t,secondaryData:r}=this.props;return!t||t.isError||r.isError?(0,Q.createElement)(K,{isError:!0}):(e=e||t.isRequesting||r.isRequesting,t=this.getTimeChartData(),r=this.getTimeChartTotals(),this.renderChart("time-comparison",e,t,r))}render(){var e=this.props["mode"];return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}f.contextType=o,f.propTypes={filters:e().array,isRequesting:e().bool,itemsLabel:e().string,limitProperties:e().array,mode:e().string,path:e().string.isRequired,primaryData:e().object,query:e().object.isRequired,secondaryData:e().object,selectedChart:e().shape({key:e().string.isRequired,label:e().string.isRequired,order:e().oneOf(["asc","desc"]),orderby:e().string,type:e().oneOf(["average","number","currency"]).isRequired}).isRequired},f.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};var h=(0,t.compose)((0,r.withSelect)((e,t)=>{const{charts:r,endpoint:a,filters:o,isRequesting:s,limitProperties:i,query:n,advancedFilters:c}=t;var d,l,m=i||[a],u=function e(t,r,a={}){var o,s;return t&&0!==t.length?(s=(t=t.slice(0)).pop()).showFilters(r,a)?(o=(0,M.flattenFilters)(s.filters),s=r[s.param]||s.defaultValue||"all",(0,j.find)(o,{value:s})):e(t,r,a):null}(o,n),p=(0,j.get)(u,["settings","param"]),t=t.mode||function(e,t){if(e&&t){var r=(0,j.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return(0,j.get)(e,["chartMode"])}return null}(u,n)||"time-comparison",u=e(Y.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],g=e(Y.REPORTS_STORE_NAME),p={mode:t,filterParam:p,defaultDateRange:u};return s?p:(d=m.some(e=>n[e]&&n[e].length),n.search&&!d?{...p,emptySearchResults:!0}:(d=r&&r.map(e=>e.key),l=(0,Y.getReportChartData)({endpoint:a,dataType:"primary",query:n,select:e,selector:g,limitBy:m,filters:o,advancedFilters:c,defaultDateRange:u,fields:d}),"item-comparison"===t?{...p,primaryData:l}:(t=(0,Y.getReportChartData)({endpoint:a,dataType:"secondary",query:n,select:e,selector:g,limitBy:m,filters:o,advancedFilters:c,defaultDateRange:u,fields:d}),{...p,primaryData:l,secondaryData:t})))}))(f);window.wp.apiFetch,window.wp.url;function b(e,t=[]){e=(0,j.find)(t,{key:e});return e||t[0]}class w extends H.Component{getChartMeta(){var{}=this.props;return{itemsLabel:(0,B.__)("%d gift cards","woocommerce-gift-cards"),mode:"time-comparison"}}render(){var{itemsLabel:e,mode:t}=this.getChartMeta(),{path:r,query:a,isError:o,isRequesting:s}=this.props;return o?(0,Q.createElement)(ReportError,{isError:!0}):(o={...a},(0,Q.createElement)(H.Fragment,null,(0,Q.createElement)(V.ReportFilters,{query:a,path:r,showDatePicker:!0,filters:i}),(0,Q.createElement)(g,{mode:t,charts:c,endpoint:n,isRequesting:s,query:o,selectedChart:b(a.chart,c),filters:i}),(0,Q.createElement)(h,{charts:c,mode:t,endpoint:n,isRequesting:s,itemsLabel:e,path:r,query:o,selectedChart:b(o.chart,c),filters:i}),(0,Q.createElement)(S,{isRequesting:s,endpoint:n,hideCompare:!0,query:a,filters:i})))}}w.propTypes={path:e().string.isRequired,query:e().object.isRequired};var x=w;const C=[{key:"giftcards_count",label:(0,B.__)("Used Gift Cards","woocommerce-gift-cards"),order:"desc",orderby:"net_amount",type:"number"},{key:"used_amount",label:(0,B.__)("Debited Amount","woocommerce-gift-cards"),order:"desc",orderby:"used_amount",type:"currency"},{key:"refunded_amount",label:(0,B.__)("Credited Amount","woocommerce-gift-cards"),order:"desc",orderby:"refunded_amount",type:"currency"},{key:"net_amount",label:(0,B.__)("Net Amount","woocommerce-gift-cards"),order:"desc",orderby:"net_amount",type:"currency"}];class v extends H.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:(0,B.__)("Code","woocommerce-gift-cards"),key:"giftcard_code",required:!0,isLeftAligned:!0,isSortable:!1},{label:(0,B.__)("Debited Amount","woocommerce-gift-cards"),key:"used_amount",required:!0,isSortable:!0,isNumeric:!0},{label:(0,B.__)("Credited Amount","woocommerce-gift-cards"),key:"refunded_amount",isSortable:!0,isNumeric:!0},{label:(0,B.__)("Net Amount","woocommerce-gift-cards"),key:"net_amount",defaultSort:!0,isSortable:!0,isNumeric:!0}].filter(Boolean)}getRowsContent(e=[]){var{}=this.props;const{render:s,formatDecimal:i}=this.context;return(0,j.map)(e,e=>{var{giftcard_id:e,giftcard_code:t,net_amount:r,refunded_amount:a,used_amount:o}=e,e=(0,l.getAdminLink)("admin.php?page=gc_giftcards&section=edit&giftcard="+e);return[{display:(0,Q.createElement)(V.Link,{href:e,type:"wp-admin"},t),value:t},{display:s(o),value:i(o)},{display:s(a),value:i(a)},{display:s(r),value:i(r)}].filter(Boolean)})}getSummary(e){var{giftcards_count:e=0,net_amount:t=0,refunded_amount:r=0,used_amount:a=0}=e,{formatAmount:o,getCurrencyConfig:s}=this.context,s=s();return[{label:(0,B._n)("gift card used","gift cards used",e,"woocommerce-gift-cards"),value:(0,d.formatValue)(s,"number",e)},{label:(0,B.__)("debited","woocommerce-gift-cards"),value:o(a)},{label:(0,B.__)("credited","woocommerce-gift-cards"),value:o(r)},{label:(0,B.__)("net","woocommerce-gift-cards"),value:o(t)}]}render(){var{filters:e,isRequesting:t,hideCompare:r,query:a}=this.props;return(0,Q.createElement)(s,{endpoint:"giftcards/used",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["giftcards_count","used_amount","refunded_amount","net_amount"],itemIdField:"giftcard_id",isRequesting:t,query:a,compareBy:r?void 0:"giftcards",tableQuery:{orderby:a.orderby||"used_amount",order:a.order||"desc",segmentby:a.segmentby},title:(0,B.__)("Gift Cards","woocommerce-gift-cards"),columnPrefsKey:"giftcards_used_report_columns",filters:e})}}v.contextType=o;var D=v;class R extends H.Component{getChartMeta(){var{}=this.props;return{itemsLabel:(0,B.__)("%d gift cards","woocommerce-gift-cards"),mode:"time-comparison"}}render(){var{itemsLabel:e,mode:t}=this.getChartMeta(),{path:r,query:a,isError:o,isRequesting:s}=this.props;return o?(0,Q.createElement)(ReportError,{isError:!0}):(o={...a},(0,Q.createElement)(H.Fragment,null,(0,Q.createElement)(V.ReportFilters,{query:a,path:r,showDatePicker:!0,filters:i}),(0,Q.createElement)(g,{mode:t,charts:C,endpoint:"giftcards/used",isRequesting:s,query:o,selectedChart:b(a.chart,C),filters:i}),(0,Q.createElement)(h,{charts:C,mode:t,endpoint:"giftcards/used",isRequesting:s,itemsLabel:e,path:r,query:o,selectedChart:b(o.chart,C),filters:i}),(0,Q.createElement)(D,{isRequesting:s,hideCompare:!0,query:a,filters:i})))}}R.propTypes={path:e().string.isRequired,query:e().object.isRequired};var k=R;const q=[{key:"giftcards_count",label:(0,B.__)("Expired Gift Cards","woocommerce-gift-cards"),order:"desc",orderby:"expire_date",type:"number"},{key:"expired_balance",label:(0,B.__)("Expired Amount","woocommerce-gift-cards"),order:"desc",orderby:"expired_balance",type:"currency"}];class T extends H.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:(0,B.__)("Code","woocommerce-gift-cards"),key:"giftcard_code",required:!0,isLeftAligned:!0,isSortable:!1},{label:(0,B.__)("Expired Amount","woocommerce-gift-cards"),key:"expired_balance",required:!0,isSortable:!0,isNumeric:!0},{label:(0,B.__)("Expired","woocommerce-gift-cards"),key:"expire_date",defaultSort:!0,isSortable:!0,isNumeric:!0},{label:(0,B.__)("Issued","woocommerce-gift-cards"),key:"date",isSortable:!0,isNumeric:!0}].filter(Boolean)}getRowsContent(e=[]){var t=this.props["query"];(0,M.getPersistedQuery)(t);const s=(0,l.getSetting)("dateFormat",_.defaultTableDateFormat),{render:i,formatDecimal:n,getCurrencyConfig:r}=this.context;r();return(0,j.map)(e,e=>{var{create_date:e,giftcard_id:t,giftcard_code:r,expired_balance:a,expire_date:o}=e,t=(0,l.getAdminLink)("admin.php?page=gc_giftcards&section=edit&giftcard="+t);return[{display:(0,Q.createElement)(V.Link,{href:t,type:"wp-admin"},r),value:r},{display:i(a),value:n(a)},{display:o?(0,Q.createElement)(V.Date,{date:o,visibleFormat:s}):(0,B.__)("N/A","woocommerce-gift-cards"),value:o},{display:e?(0,Q.createElement)(V.Date,{date:e,visibleFormat:s}):(0,B.__)("N/A","woocommerce-gift-cards"),value:e}].filter(Boolean)})}getSummary(e){var{giftcards_count:e=0,expired_balance:t=0}=e,{formatAmount:r,getCurrencyConfig:a}=this.context,a=a();return[{label:(0,B._n)("gift card expired","gift cards expired",e,"woocommerce-gift-cards"),value:(0,d.formatValue)(a,"number",e)},{label:(0,B.__)("expired","woocommerce-gift-cards"),value:r(t)}]}render(){var{filters:e,isRequesting:t,hideCompare:r,query:a}=this.props;return(0,Q.createElement)(s,{endpoint:"giftcards/expired",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["giftcards_count","expired_balance"],itemIdField:"giftcard_id",isRequesting:t,query:a,compareBy:r?void 0:"giftcards",tableQuery:{orderby:a.orderby||"expire_date",order:a.order||"desc",segmentby:a.segmentby},title:(0,B.__)("Gift Cards","woocommerce-gift-cards"),columnPrefsKey:"giftcards_expired_report_columns",filters:e})}}T.contextType=o;var F=T;class P extends H.Component{getChartMeta(){var{}=this.props;return{itemsLabel:(0,B.__)("%d gift cards","woocommerce-gift-cards"),mode:"time-comparison"}}render(){var{itemsLabel:e,mode:t}=this.getChartMeta(),{path:r,query:a,isError:o,isRequesting:s}=this.props;return o?(0,Q.createElement)(ReportError,{isError:!0}):(o={...a},(0,Q.createElement)(H.Fragment,null,(0,Q.createElement)(V.ReportFilters,{query:a,path:r,showDatePicker:!0,filters:i}),(0,Q.createElement)(g,{mode:t,charts:q,endpoint:"giftcards/expired",isRequesting:s,query:o,selectedChart:b(a.chart,q),filters:i}),(0,Q.createElement)(h,{charts:q,mode:t,endpoint:"giftcards/expired",isRequesting:s,itemsLabel:e,path:r,query:o,selectedChart:b(o.chart,q),filters:i}),(0,Q.createElement)(F,{isRequesting:s,hideCompare:!0,query:a,filters:i})))}}P.propTypes={path:e().string.isRequired,query:e().object.isRequired};var N=P,A=e=>{var t=e["query"];e.query.section=t.section||"used";let r;switch(t.section){case"issued":r=(0,Q.createElement)(x,{...e});break;case"used":r=(0,Q.createElement)(k,{...e});break;case"expired":r=(0,Q.createElement)(N,{...e});break;default:r=(0,Q.createElement)(K,null)}return(0,Q.createElement)(H.Fragment,null,r)};(0,O.addFilter)("woocommerce_admin_reports_list","woocommerce-gift-cards",e=>[...e,{report:"gift-cards",title:(0,B._x)("Gift Cards","analytics report menu item","woocommerce-gift-cards"),component:A,navArgs:{id:"wc-gc-gift-cards-analytics-report"}}])}()}();