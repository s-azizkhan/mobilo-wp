(()=>{"use strict";var t={};function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,l=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){s=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw i}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,o=[{key:"requestHandler",value:function(e){var r=new FormData,n=e.requestData||{};for(var i in n)r.append(i,n[i]);m.request({method:e.method||"POST",url:t.getAFWParams("ajaxurl")||"",params:{action:n.dashboard},body:r,withCredentials:e.withCredentials||!1,responseType:e.responseType||"json"}).then(function(t){e.hasOwnProperty("callback")&&e.callback(t)}).catch(function(t){e.hasOwnProperty("error")&&e.error(t)})}},{key:"formatNumber",value:function(t){return accounting.formatNumber(t,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeparator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(e).length?e:afwcDashboardParams||{};if(t.includes(".")){var n=this.getAFWParams(t.slice(0,t.indexOf(".")),r);return this.getAFWParams(t.slice(t.indexOf(".")+1),n)}return""!==t?t in r?r[t]:"":r}},{key:"getCampaignStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.getAFWParams("campaignStatuses")||{};return""===e?r:e in r?r[e]:""}},{key:"getCommissionPlansStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.getAFWParams("commissionPlanStatuses")||{};return""===e?r:e in r?r[e]:""}},{key:"geRouteFilterValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?t.split("&").reduce(function(t,e){var r=a(e.split("="),2),n=r[0],i=r[1];return n&&i&&(t[n]=decodeURIComponent(i)),t},{}):{}}},{key:"buildRouteFilterValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!e||"object"!==i(e))return t;var n=a(t.split("/filter/"),2),o=n[0],l=n[1],u=this.geRouteFilterValue(l||"")||{};u=r(r({},u),e);var s=Object.entries(u).map(function(t){var e=a(t,2),r=e[0],n=e[1];return"".concat(r,"=").concat(encodeURIComponent(n))}).join("&");return o=o.endsWith("/")?o.slice(0,-1):o,"".concat(o,"/filter/").concat(s)}}],(n=null)&&l(e.prototype,n),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}var d=function(){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isOverlay=(null==r||null===(e=r.attrs)||void 0===e?void 0:e.overlay)||!1,t.showLoader=t.showLoader||!1,t.msg=t.msg||_x("Loading","default loader message","affiliate-for-woocommerce"),this.css="text-lg"+(this.isOverlay?" text-white":" text-gray-600")}return e=t,n=[{key:"showLoader",get:function(){return t._showLoader},set:function(e){return t._showLoader=Boolean(e)}},{key:"msg",get:function(){return t._msg},set:function(e){return t._msg=e}}],(r=[{key:"view",value:function(){return m("[",null,this.isOverlay?m("div",{class:"w-full h-full fixed top-0 left-0 bg-gray-900 opacity-50 z-50"}):"",m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},t.msg?m("div",{class:this.css},t.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))))}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}var g=function(){function t(e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e||{},0===parseInt((null===(r=t.data)||void 0===r||null===(r=r.campaigns)||void 0===r?void 0:r.length)||0)&&this.fetch()}return e=t,n=[{key:"data",get:function(){return t._data},set:function(e){t._data=e}}],(r=[{key:"fetch",value:function(){t.isLoading=!0,afwcDashboardParams.isAdmin&&(d.showLoader=!0,d.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce")),s.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:s.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(e){"Success"==e.ACK&&(t.data.campaigns=e.result.campaigns||[],afwcDashboardParams.isAdmin&&(t.data.kpi=e.result.kpi||{})),afwcDashboardParams.isAdmin&&(d.showLoader=!1),t.isLoading=!1}})}}])&&b(e.prototype,r),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function S(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}g.data={campaigns:[]};var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.initialize(),t.setCurrentCampaign(t.currentCampaignID)}return e=t,n=[{key:"initialize",value:function(){t.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",rules:{},metaData:{},ruleMaps:{}}}},{key:"details",get:function(){return t._details},set:function(e){t._details=e}},{key:"setCurrentCampaign",value:function(e){var r={};e>0&&(r=g.data.campaigns.filter(function(t){return t.campaignId==e})[0]),t.details={title:r.title||"",targetLink:r.targetLink||afwcDashboardParams.home_url,slug:r.slug||"",campaignId:r.campaignId||0,shortDescription:r.shortDescription||"",body:r.body||"",status:r.status||"Draft",rules:r.rules||{},metaData:r.metaData||{},ruleMaps:{}},afwcDashboardParams.isAdmin&&t.fetchRuleData(t.details.rules)}},{key:"removeCurrentCampaign",value:function(){t.currentCampaignID=0,m.route.set(afwcDashboardParams.isAdmin?"/campaigns":"/")}},{key:"fetchRuleData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===h(e)&&Object.keys(e).length&&s.requestHandler({requestData:{cmd:"fetch_rule_data",security:s.getAFWParams("security.campaign.fetchRuleData")||"",dashboard:"afwc_campaign_controller",rules:JSON.stringify(e)},callback:function(e){"Success"==e.ACK&&(t.details.ruleMaps=e.result||{})}})}}],(r=null)&&w(e.prototype,r),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function j(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}x.initialize();var C=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"affiliateDisplayLink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{var i="",a=afwcDashboardParams.isPrettyReferralEnabled||"no",o=afwcDashboardParams.pname;return n=n||("admin"==r?"{affiliate_id}":afwcDashboardParams.affiliate_id),i=-1==(t=t.replace(/\/$/,"")).indexOf("?")?t+("yes"==a?"/"+o+"/"+n:"/?"+o+"="+n):"yes"==a?t.substring(0,t.indexOf("?")).replace(/\/$/,"")+"/"+o+"/"+n+"/?"+t.substring(t.indexOf("?")+1):t+"&"+o+"="+n,i+=""!=e?(-1==i.indexOf("?")?"/?":"&")+"utm_campaign="+e:""}catch(t){console.log("In GlobalFunctions for affiliate links:: ",t)}}},{key:"doCopy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(t.length>0){var e=document.createElement("input");e.setAttribute("value",t),document.body.appendChild(e),e.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(e.value),document.body.removeChild(e)}}catch(t){console.log("In GlobalFunctions to copy:: ",t)}}}],(e=null)&&k(t.prototype,e),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function _(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D(e)?e:e+""}var T=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"view",value:function(t){var e,r=C.affiliateDisplayLink(x.details.targetLink,x.details.slug,"frontend",null===(e=afwcDashboardParams)||void 0===e?void 0:e.affiliateIdentifier);return m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index:120000"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75",onclick:function(){return x.removeCurrentCampaign()}}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-5xl"},m("div",{class:"h-full flex flex-col space-y-6 py-4 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 sm:px-6"},m("div",{class:"flex items-start justify-between space-x-3"},m("h2",{class:"text-3xl leading-8 text-gray-900"},x.details.title||""),m("div",{class:"h-7 flex items-center space-x-3"},m("button",{"aria-label":"Close panel",class:"leading-none text-gray-400 hover:text-gray-500 transition ease-in-out duration-150 p-0",onclick:function(){x.removeCurrentCampaign()}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("p",{class:"text-lg"},x.details.shortDescription||""),m("p",{class:"afwc-campaign-link mt-4"},_x("Link: ","Campaign tracking link","affiliate-for-woocommerce"),m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","My account - tooltip title for copying campaign referral link","affiliate-for-woocommerce"),onclick:function(t){C.doCopy(r||"")},class:"cursor-pointer"},m("code",null,r||""))),m("div",{class:"mt-12 mb-4"},m.trust(x.details.body||"")))))))))}}])&&O(t.prototype,e),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function L(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I(e)?e:e+""}var N=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params={id:e.attrs.id||0,startDate:e.attrs.startDate||"",endDate:e.attrs.endDate||""},x.currentCampaignID=0},e=[{key:"refreshModel",value:function(t){this.params.id=t,this.model=new x}},{key:"showCampaignDetails",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;parseInt(e)?parseInt(e)!==parseInt(x.currentCampaignID)&&g.data.campaigns&&((null===(t=g.data.campaigns.filter(function(t){return t.campaignId==e}))||void 0===t?void 0:t[0])?(x.currentCampaignID=e||0,this.refreshModel(e)):x.removeCurrentCampaign()):x.currentCampaignID=0}},{key:"maybeShowCampaignDetails",value:function(t){var e;(null==t||null===(e=t.attrs)||void 0===e?void 0:e.id)&&this.showCampaignDetails(t.attrs.id)}},{key:"view",value:function(t){return this.maybeShowCampaignDetails(t),m("div",null,m("div",null,m("ul",{class:"text-gray-600 m-0 w-full","aria-label":_x("Campaigns","Campaign list label","affiliate-for-woocommerce")},g.data.campaigns.map(function(t,e){return m("li",{style:"cursor:pointer",class:"my-2 overflow-hidden text-gray-400 bg-white shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){return m.route.set("/".concat(t.campaignId))}},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:"text-gray-700 text-lg pr-4 flex-1 sm:truncate leading-6"},t.title),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})))))}))),0!==x.currentCampaignID?m(T,{id:x.currentCampaignID}):"")}}],e&&E(t.prototype,e),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M(n.key),n)}}function M(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A(e)?e:e+""}x.currentCampaignID=0;var W=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialize(e.attrs)},(e=[{key:"initialize",value:function(t){this.urlParams=Object.keys(t).length?t:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new g(this.urlParams)}},{key:"onupdate",value:function(t){this.urlParams!=t.attrs&&Object.keys(t.attrs).length&&this.initialize(t.attrs)}},{key:"view",value:function(t){var e,r;return m("div",null,g.data.campaigns.length>0?m("[",null,m(N,{id:(null==t||null===(e=t.attrs)||void 0===e?void 0:e.id)||0})):m("div",{class:"text-gray-600 m-0 w-full my-2 overflow-hidden text-gray-400 bg-white shadow-sm pl-4 py-2 text-gray-700 text-lg pr-4 sm:truncate leading-6"},g.isLoading?m("div",{class:"flex gap-1"},m("img",{class:"h-5 self-center",src:null===(r=afwcDashboardParams)||void 0===r?void 0:r.wcSpinLoader}),m("span",null,_x("Loading...","campaign loading text on my-account","affiliate-for-woocommerce"))):_x("No Campaign yet","description for no campaigns exist","affiliate-for-woocommerce")))}}])&&F(t.prototype,e),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function R(t){var e=function(t,e){if("object"!=z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z(e)?e:e+""}var B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e||{},this.affiliateID=this.params.id||0,t.details={},t.flags={loading:!1}}return e=t,n=[{key:"details",get:function(){return t._details},set:function(e){t._details=e}},{key:"flags",get:function(){return t._flags},set:function(e){t._flags=e}}],(r=[{key:"fetch",value:function(){this.affiliateID&&(t.flags.loading=!0,s.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_chain_data",security:s.getAFWParams("security.dashboard.multiTierData")||"",affiliate_id:this.affiliateID},callback:function(e){if("Success"===e.ACK){var r=e.data||{};Object.entries(r).length>0&&(t.details=r.multiTierChain||{})}t.flags.loading=!1}}))}}])&&q(e.prototype,r),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K(n.key),n)}}function K(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H(e)?e:e+""}var U=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initParams(e),this.nodeCss="inline-block p-2 text-sm border-solid border-gray-200 text-gray-500 w-40 border hover:text-gray-900 rounded-lg",this.placeholderNodeCss="inline-block text-sm border-solid border-gray-200 text-gray-500 w-40 border rounded-lg animate-pulse bg-gray-300 m-2 h-8",this.multiTierWrapperCss="multi-tier-tree flex items-center justify-center"},e=[{key:"oninit",value:function(){new B(this.params).fetch()}},{key:"initParams",value:function(t){var e;this.params={id:(null==t||null===(e=t.attrs)||void 0===e?void 0:e.id)||0}}},{key:"showPlaceholder",value:function(){return m("div",{class:this.multiTierWrapperCss||""},this.buildList([{id:1,children:[{id:2,children:[]},{id:3,children:[]},{id:4,children:[]}]}],!0,!0))}},{key:"buildList",value:function(){var t=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m("ul",{class:"py-5 relative transition-all"},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map(function(n){return m("li",{class:"float-left pt-5 pb-0 text-center list-none relative px-5 transition-all"},m("span",{class:r?t.placeholderNodeCss:e?t.nodeCss+("pending"===n.status?" bg-red-100":" bg-warning-light"):""},n.name||""),n.children&&n.children.length>0?t.buildList(n.children,e,r):"")}))}},{key:"emptyText",value:function(){return m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No children found. View/set parent affiliate from affiliate's profile.","empty chain message","affiliate-for-woocommerce"))}},{key:"view",value:function(t){return this.initParams(t),m("div",{class:"afwc-multi-tier-tree"},m("section",{class:"my-5 overflow-x-auto"},B.flags.loading?this.showPlaceholder():B.details&&Object.entries(B.details).length>0?m("div",{class:this.multiTierWrapperCss||""},this.buildList(B.details,!0)):this.emptyText()))}}],e&&V(t.prototype,e),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}var Q=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.affiliateId=afwcDashboardParams.affiliate_id||0},(e=[{key:"view",value:function(){return this.affiliateId?m("article",{class:"w-full"},m(U,{id:this.affiliateId})):""}}])&&G(t.prototype,e),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();t.g.__=wp.i18n.__,t.g._x=wp.i18n._x,t.g.sprintf=wp.i18n.sprintf;var X=document.getElementsByClassName("afw-campaigns")[0]||"";X&&m.route(X,"/",{"/":{view:function(t){return[m(W,t.attrs)]}},"/:id":{view:function(t){return[m(W,t.attrs)]}}});var Y=document.getElementsByClassName("afw-multi-tier")[0]||"";Y&&m.mount(Y,{view:function(t){return m(Q,t.attrs)}})})();