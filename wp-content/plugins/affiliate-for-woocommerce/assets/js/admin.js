(()=>{var e={452:e=>{var t=function(e){"use strict";var t,r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,a){var i=t&&t.prototype instanceof v?t:v,n=Object.create(i.prototype),s=new A(a||[]);return o(n,"_invoke",{value:j(e,r,s)}),n}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var m="suspendedStart",d="suspendedYield",p="executing",y="completed",g={};function v(){}function h(){}function b(){}var w={};c(w,n,function(){return this});var x=Object.getPrototypeOf,_=x&&x(x(T([])));_&&_!==r&&a.call(_,n)&&(w=_);var k=b.prototype=v.prototype=Object.create(w);function P(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){function r(o,i,n,s){var l=f(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,n,s)},function(e){r("throw",e,n,s)}):t.resolve(u).then(function(e){c.value=e,n(c)},function(e){return r("throw",e,n,s)})}s(l.arg)}var i;o(this,"_invoke",{value:function(e,a){function o(){return new t(function(t,o){r(e,a,t,o)})}return i=i?i.then(o,o):o()}})}function j(e,r,a){var o=m;return function(i,n){if(o===p)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw n;return{value:t,done:!0}}for(a.method=i,a.arg=n;;){var s=a.delegate;if(s){var l=O(s,a);if(l){if(l===g)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(o===m)throw o=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o=p;var c=f(e,r,a);if("normal"===c.type){if(o=a.done?y:d,c.arg===g)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(o=y,a.method="throw",a.arg=c.arg)}}}function O(e,r){var a=r.method,o=e.iterator[a];if(o===t)return r.delegate=null,"throw"===a&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var n=i.arg;return n?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(e){if(null!=e){var r=e[n];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return h.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},P(S.prototype),c(S.prototype,s,function(){return this}),e.AsyncIterator=S,e.async=function(t,r,a,o,i){void 0===i&&(i=Promise);var n=new S(u(t,r,a,o),i);return e.isGeneratorFunction(r)?n:n.next().then(function(e){return e.done?e.value:n.next()})},P(k),c(k,l,"Generator"),c(k,n,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(a,o){return s.type="throw",s.arg=e,r.next=a,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var l=a.call(n,"catchLoc"),c=a.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var o=a.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,a){return this.delegate={iterator:T(e),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},692:(e,t,r)=>{"use strict";function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,i,n,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=i.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function c(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}function u(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,a=[{key:"requestHandler",value:function(t){var r=new FormData,a=t.requestData||{};for(var o in a)r.append(o,a[o]);m.request({method:t.method||"POST",url:e.getAFWParams("ajaxurl")||"",params:{action:a.dashboard},body:r,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then(function(e){t.hasOwnProperty("callback")&&t.callback(e)}).catch(function(e){t.hasOwnProperty("error")&&t.error(e)})}},{key:"formatNumber",value:function(e){return accounting.formatNumber(e,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeparator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t).length?t:afwcDashboardParams||{};if(e.includes(".")){var a=this.getAFWParams(e.slice(0,e.indexOf(".")),r);return this.getAFWParams(e.slice(e.indexOf(".")+1),a)}return""!==e?e in r?r[e]:"":r}},{key:"getCampaignStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=e.getAFWParams("campaignStatuses")||{};return""===t?r:t in r?r[t]:""}},{key:"getCommissionPlansStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=e.getAFWParams("commissionPlanStatuses")||{};return""===t?r:t in r?r[t]:""}},{key:"geRouteFilterValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split("&").reduce(function(e,t){var r=s(t.split("="),2),a=r[0],o=r[1];return a&&o&&(e[a]=decodeURIComponent(o)),e},{}):{}}},{key:"buildRouteFilterValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!t||"object"!==n(t))return e;var r=s(e.split("/filter/"),2),a=r[0],i=r[1],l=this.geRouteFilterValue(i||"")||{};l=o(o({},l),t);var c=Object.entries(l).map(function(e){var t=s(e,2),r=t[0],a=t[1];return"".concat(r,"=").concat(encodeURIComponent(a))}).join("&");return a=a.endsWith("/")?a.slice(0,-1):a,"".concat(a,"/filter/").concat(c)}}],(r=null)&&c(t.prototype,r),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y(a.key),a)}}function y(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var g=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOverlay=(null==r||null===(t=r.attrs)||void 0===t?void 0:t.overlay)||!1,e.showLoader=e.showLoader||!1,e.msg=e.msg||_x("Loading","default loader message","affiliate-for-woocommerce"),this.css="text-lg"+(this.isOverlay?" text-white":" text-gray-600")}return t=e,a=[{key:"showLoader",get:function(){return e._showLoader},set:function(t){return e._showLoader=Boolean(t)}},{key:"msg",get:function(){return e._msg},set:function(t){return e._msg=t}}],(r=[{key:"view",value:function(){return m("[",null,this.isOverlay?m("div",{class:"w-full h-full fixed top-0 left-0 bg-gray-900 opacity-50 z-50"}):"",m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},e.msg?m("div",{class:this.css},e.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))))}}])&&p(t.prototype,r),a&&p(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,b(a.key),a)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=v(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var w=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{},0===parseInt((null===(r=e.data)||void 0===r||null===(r=r.campaigns)||void 0===r?void 0:r.length)||0)&&this.fetch()}return t=e,a=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(r=[{key:"fetch",value:function(){e.isLoading=!0,afwcDashboardParams.isAdmin&&(g.showLoader=!0,g.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce")),f.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:f.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(t){"Success"==t.ACK&&(e.data.campaigns=t.result.campaigns||[],afwcDashboardParams.isAdmin&&(e.data.kpi=t.result.kpi||{})),afwcDashboardParams.isAdmin&&(g.showLoader=!1),e.isLoading=!1}})}}])&&h(t.prototype,r),a&&h(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function _(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,k(a.key),a)}}function k(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=x(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}w.data={campaigns:[]};var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),e.setCurrentCampaign(e.currentCampaignID)}return t=e,a=[{key:"initialize",value:function(){e.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",rules:{},metaData:{},ruleMaps:{}}}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"setCurrentCampaign",value:function(t){var r={};t>0&&(r=w.data.campaigns.filter(function(e){return e.campaignId==t})[0]),e.details={title:r.title||"",targetLink:r.targetLink||afwcDashboardParams.home_url,slug:r.slug||"",campaignId:r.campaignId||0,shortDescription:r.shortDescription||"",body:r.body||"",status:r.status||"Draft",rules:r.rules||{},metaData:r.metaData||{},ruleMaps:{}},afwcDashboardParams.isAdmin&&e.fetchRuleData(e.details.rules)}},{key:"removeCurrentCampaign",value:function(){e.currentCampaignID=0,m.route.set(afwcDashboardParams.isAdmin?"/campaigns":"/")}},{key:"fetchRuleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===x(t)&&Object.keys(t).length&&f.requestHandler({requestData:{cmd:"fetch_rule_data",security:f.getAFWParams("security.campaign.fetchRuleData")||"",dashboard:"afwc_campaign_controller",rules:JSON.stringify(t)},callback:function(t){"Success"==t.ACK&&(e.details.ruleMaps=t.result||{})}})}}],(r=null)&&_(t.prototype,r),a&&_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,O(a.key),a)}}function O(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=S(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}P.initialize();var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}return t=e,a=[{key:"initialize",value:function(){e.reset()}},{key:"reset",value:function(){e.flags={showNotification:0},e.notification={status:"warning",message:"",autoHide:!0,hideDelay:8e3}}},{key:"show",value:function(t){var r=t.status,a=void 0===r?"warning":r,o=t.message,i=void 0===o?"":o,n=t.autoHide,s=void 0===n||n,l=t.hideDelay,c=void 0===l?8e3:l;e.notification={status:a,message:i,autoHide:s,hideDelay:c},e.flags.showNotification=1}},{key:"hide",value:function(){e.reset()}}],(r=null)&&j(t.prototype,r),a&&j(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function A(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,T(a.key),a)}}function T(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=C(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}D.initialize();var L=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"newCampaign",value:function(){P.currentCampaignID=-1,new P}},{key:"destroyCampaignDetails",value:function(){w.data={campaigns:[]}}},{key:"saveCampaign",value:function(){f.requestHandler({requestData:{cmd:"save_campaign",campaign:JSON.stringify(P.details),security:f.getAFWParams("security.campaign.save")||"",dashboard:"afwc_campaign_controller"},callback:function(e){var t;"Success"==e.ACK?(t=e.last_inserted_id?_x("Campaign created successfully","Notification message for successful campaign creation","affiliate-for-woocommerce"):_x("Campaign updated successfully","Notification message for successful campaign update","affiliate-for-woocommerce"),e.data&&(w.data.campaigns=e.data||[]),D.show({status:"success",message:t}),P.removeCurrentCampaign()):D.show({status:"error",message:_x("Failed to create or update campaign","Notification message for failed campaign creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCampaign",value:function(){f.requestHandler({requestData:{cmd:"delete_campaign",campaign_id:P.currentCampaignID,security:f.getAFWParams("security.campaign.delete")||"",dashboard:"afwc_campaign_controller"},callback:function(e){if("Success"==e.ACK){var t=P.details.campaignId;w.data.campaigns=w.data.campaigns.filter(function(e){return e.campaignId!=t}),P.removeCurrentCampaign(),D.show({status:"success",message:_x("Campaign deleted successfully","Notification message for successful campaign deletion","affiliate-for-woocommerce")})}else D.show({status:"error",message:_x("Failed to delete campaign","Notification message for failed campaign deletion","affiliate-for-woocommerce")})}})}},{key:"regenerateSampleCampaigns",value:function(){g.showLoader=!0,g.msg=_x("Generating Sample Campaigns","re-generating sample campaigns loader message","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"regenerate_sample_campaigns",security:f.getAFWParams("security.campaign.createSampleCampaigns")||"",dashboard:"afwc_campaign_controller"},callback:function(e){"Success"==e.ACK?(e.data&&(w.data.campaigns=e.data||[]),D.show({status:"success",message:_x("Sample campaigns created successfully","Notification message for successful sample campaigns creation","affiliate-for-woocommerce")})):D.show({status:"error",message:_x("Failed to create sample campaigns","Notification message for failed sample campaigns creation","affiliate-for-woocommerce")}),window.scrollTo({top:0,behavior:"smooth"}),g.showLoader=!1}})}}],(t=null)&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function E(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,F(a.key),a)}}function F(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=I(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},commissions:[]},this.params=t||{},this.fetch()}return t=e,a=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}},{key:"reOrder",value:function(t){void 0===t&&(t=e.data.commissions);var r=[];if(t&&t.length>0&&e.data.planOrder&&e.data.planOrder.length>0)for(var a=function(){var a=e.data.planOrder[o],i=t.filter(function(e){return e.id==a})[0];i&&r.push(i)},o=0;o<e.data.planOrder.length;o++)a();else r=t;e.data.commissions=r}},{key:"savePlanOrder",value:function(){return g.showLoader=!0,new Promise(function(t,r){f.requestHandler({requestData:{cmd:"save_plan_order",plan_order:JSON.stringify(e.data.planOrder),security:f.getAFWParams("security.commissions.savePlanOrder")||"",dashboard:"afwc_commission_controller"},callback:function(a){"Success"===a.ACK?(e.data.planOrder=a.result||[],e.reOrder(),t(a)):r(a),g.showLoader=!1}})})}}],(r=[{key:"fetch",value:function(){g.showLoader=!0,g.msg=_x("Loading Commission Plans","Loading text for commissions","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:f.getAFWParams("security.commissions.fetchData")||"",dashboard:"afwc_commission_controller",commission_status:afwcDashboardParams.commission_status||""},callback:function(t){if("Success"==t.ACK){var r=t.result.commissions||[];e.data.commissions=[],e.data.planOrder=t.result.plan_order||[],e.data.planOrder=Object.keys(e.data.planOrder).map(function(t,r){return parseInt(e.data.planOrder[t])}),e.reOrder(r)}g.showLoader=!1}})}}])&&E(t.prototype,r),a&&E(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,i,n,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=i.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw o}}return s}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return G(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function V(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,K(a.key),a)}}function K(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=B(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}M.data={commissions:[]};var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCommission(e.currentCommissionID)}return t=e,a=[{key:"initialize",value:function(){var t;e.details={id:0,name:"",rules:{},amount:"",type:"",status:"Draft",apply_to:"all",action_for_remaining:"continue",distribution:[]},e.details.no_of_tiers=e.details.distribution.length;var r=(null===(t=f.getAFWParams("plan_dashboard_data"))||void 0===t?void 0:t.plan_rule_data)||{},a={};Object.values(r).map(function(e){a=Object.assign(a,e)}),e.allRules=e.mergeRulesByTitle(a),e.ruleRow={type:"affiliate",operator:"in",value:""},e.ruleGroup={condition:"AND",rules:[e.ruleRow]},e.idNameMaps={}}},{key:"mergeRulesByTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==B(e))return{};for(var t=new Map,r={},a=function(){var a=W(i[o],2),n=a[0],s=a[1];if("_meta"===n)return 1;var l=s.title||n,c=(s.possibleOperators||[]).map(function(e){return R(R({},e),{},{ruleKey:n})});if(t.has(l)){var u,f=(null===(u=t.get(l))||void 0===u?void 0:u.ruleKeys)||[],m=f.length?r[f[0]]:[],d=[].concat(q((null==m?void 0:m.possibleOperators)||[]),q(c)),p=d.filter(function(e){return"eq"===e.op}),y=d.filter(function(e){return"eq"!==e.op});d=[].concat(q(p),q(y));var g=[].concat(q((null==m?void 0:m._matchingRules)||[]),[n]);g.forEach(function(t){r[t]=R(R({},e[t]),{},{possibleOperators:d,_matchingRules:g})}),t.set(l,{ruleKeys:g})}else r[n]=R(R({},s),{},{possibleOperators:c,_matchingRules:[n]}),t.set(l,{ruleKeys:[n]})},o=0,i=Object.entries(e);o<i.length;o++)a();return r}},{key:"newCommission",value:function(){e.currentCommissionID=-1,new e}},{key:"saveCommission",value:function(){f.requestHandler({requestData:{cmd:"save_commission",commission:JSON.stringify(e.details),security:f.getAFWParams("security.commissions.save")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var r="";t.last_inserted_id?(e.details.id=t.last_inserted_id,M.data.commissions.push(e.details),M.data.planOrder.splice(-1,0,t.last_inserted_id),M.reOrder(M.data.commissions),r=_x("The commission plan created successfully","Notification success message after creating a new commission plan","affiliate-for-woocommerce")):(M.data.commissions=M.data.commissions.map(function(t){return parseInt(t.id)===parseInt(e.details.id)?e.details:t}),r=_x("The commission plan updated successfully","Notification success message after updating a commission plan","affiliate-for-woocommerce")),D.show({status:"success",message:r}),e.currentCommissionID=0}else D.show({status:"error",message:_x("Failed to create or update the commission plan","Notification error message for failed commission plan creation or update","affiliate-for-woocommerce")})}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"deleteCommission",value:function(){f.requestHandler({requestData:{cmd:"delete_commission",commission_id:e.currentCommissionID,security:f.getAFWParams("security.commissions.delete")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var r=e.details.id;M.data.commissions=M.data.commissions.filter(function(e){return e.id!=r}),M.data.planOrder=M.data.planOrder.filter(function(e){return e!=r}),e.currentCommissionID=0,D.show({status:"success",message:_x("The commission plan deleted successfully","Notification success message after deleting a commission plan","affiliate-for-woocommerce")})}else D.show({status:"error",message:_x("Failed to delete the commission plan","Notification error message for failed commission plan deletion","affiliate-for-woocommerce")})}})}}],(r=[{key:"setCurrentCommission",value:function(t){var r={};t>0&&(r=M.data.commissions.filter(function(e){return e.id==t})[0]),e.details={id:r.id||0,name:r.name||"",rules:r.rules||"",amount:isNaN(parseFloat(r.amount))?"":parseFloat(r.amount),type:r.type||"Percentage",status:r.status||"Draft",apply_to:r.apply_to||"all",action_for_remaining:r.action_for_remaining||"continue",no_of_tiers:r.no_of_tiers||1,distribution:r.distribution||[]},t>0&&this.fetchExtraData(e.details.rules)}},{key:"fetchExtraData",value:function(t){var r=t.rules,a={};if(r){if(Object.keys(r).map(function(t,o){var i=r[t].rules;Object.keys(i).map(function(t,r){var o,n=i[t].type||"";if(!n||null!=e&&null!==(o=e.allRules[n])&&void 0!==o&&o.options&&Object.keys(e.allRules[n].options).length>0)return!0;a[n]||(a[n]=[]),a[n]=q(new Set(a[n].concat(i[t].value||"")))})}),!a||0>=Object.keys(a).length)return e.idNameMaps={};f.requestHandler({requestData:{cmd:"fetch_extra_data",security:f.getAFWParams("security.commissions.extraData")||"",dashboard:"afwc_commission_controller",data:JSON.stringify(a)},callback:function(t){"Success"==t.ACK&&(e.idNameMaps=t.result)}})}}}])&&V(t.prototype,r),a&&V(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Y(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Q(a.key),a)}}function Q(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=J(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}U.initialize();var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,a=[{key:"initialize",value:function(){e.flags={loadMore:!0,clearSelections:!1,moreReferralLoaded:!1}}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],(r=[{key:"fetch",value:function(){var t=this;return new Promise(function(r,a){try{var o,i;if(!afwcDateFunctions.isValidDate([t.params.startDate,t.params.endDate],"-"))return r();if(0===$e.details.affiliateId&&null!=t&&null!==(o=t.params)&&void 0!==o&&o.id){var n=Number(t.params.id);isNaN(n)||0===n||($e.details.affiliateId=n)}t.dataLoaded=t.params.currentPage&&1<parseInt(t.params.currentPage),t.dataLoaded||$e.triggerLoader("referrals",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"order_details",security:f.getAFWParams("security.dashboard.orderDetails")||"",from_date:afwcDateFunctions.getDateTime(t.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(t.params.endDate,{dayEnd:!0})||"",affiliate_id:t.params.id||0,page:t.params.currentPage||1,filters:JSON.stringify((null==lt||null===(i=lt.data)||void 0===i?void 0:i.filters)||{})||""},callback:function(a){a&&a.data&&a.data.length>0?(e.flags.moreReferralLoaded=!0,$e.details.referrals=t.dataLoaded?$e.details.referrals.concat(a.data):a.data):e.flags.moreReferralLoaded=!1,t.dataLoaded||$e.triggerLoader("referrals",!1),e.flags.loadMore=a&&a.meta&&!0===a.meta.load_more,r()}})}catch(e){a(e)}})}},{key:"updateCommissionStatus",value:function(){var t=this,r=new FormData,a={cmd:"update_commission_status",security:f.getAFWParams("security.dashboard.updateCommissionStatus")||"",referral_ids:JSON.stringify(this.params.ids),affiliate_id:lt.data.currentAffiliateID,status:this.params.status};for(var o in a)r.append(o,a[o]);return new Promise(function(a,o){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:r,withCredentials:!1,responseType:"json"}).then(function(r){if("Success"===r.ACK){var i=Number(parseFloat($e.details.stats.current.unpaid_commissions||0).toFixed(2)),n=Number(parseFloat($e.details.stats.current.earned_commissions||0).toFixed(2)),s=Number(parseFloat(lt.data.kpi.unpaid_commissions||0).toFixed(2)),l=0;$e.details.referrals.forEach(function(e,r){-1!==t.params.ids.indexOf(e.referral_id)&&(l=Number(parseFloat($e.details.referrals[r].commission||0).toFixed(2)),"unpaid"===t.params.status&&"unpaid"!==$e.details.referrals[r].status?($e.details.stats.current.unpaid_commissions=Number(parseFloat(i+l).toFixed(2)),lt.data.kpi.unpaid_commissions=Number(parseFloat(s+l).toFixed(2))):"unpaid"!==t.params.status&&"unpaid"===$e.details.referrals[r].status&&($e.details.stats.current.unpaid_commissions=i>0?Number(parseFloat(i-l).toFixed(2)):i,lt.data.kpi.unpaid_commissions=s>0?Number(parseFloat(s-l).toFixed(2)):s),"rejected"===t.params.status&&"rejected"!==$e.details.referrals[r].status?$e.details.stats.current.earned_commissions=n>0?Number(parseFloat(n-l).toFixed(2)):n:"rejected"!==t.params.status&&"rejected"===$e.details.referrals[r].status&&($e.details.stats.current.earned_commissions=Number(parseFloat(n+l).toFixed(2))),n=$e.details.stats.current.earned_commissions,i=$e.details.stats.current.unpaid_commissions,$e.details.referrals[r].status=t.params.status)}),$e.details.stats.current.unpaid_commissions=parseFloat($e.details.stats.current.unpaid_commissions).toFixed(2),lt.data.kpi.unpaid_commissions=parseFloat(lt.data.kpi.unpaid_commissions).toFixed(2),$e.details.stats.current.earned_commissions=parseFloat($e.details.stats.current.earned_commissions||0).toFixed(2),e.flags.clearSelections=!0,a(r)}else o(r)})})}}])&&Y(t.prototype,r),a&&Y(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){te(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function te(e,t,r){return(t=le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return ae(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(ae(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ae(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,ae(f,"constructor",c),ae(c,"constructor",l),l.displayName="GeneratorFunction",ae(c,o,"GeneratorFunction"),ae(f),ae(f,o,"Generator"),ae(f,a,function(){return this}),ae(f,"toString",function(){return"[object Generator]"}),(re=function(){return{w:i,m}})()}function ae(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ae=function(e,t,r,a){function i(t,r){ae(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},ae(e,t,r,a)}function oe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return n=e.done,e},e:function(e){s=!0,i=e},f:function(){try{n||null==r.return||r.return()}finally{if(s)throw i}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function ne(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function se(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,le(a.key),a)}}function le(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Z(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}$.initialize();var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,r=[{key:"fetch",value:function(){var t=this;return new Promise(function(r,a){try{if(!afwcDateFunctions.isValidDate([t.params.startDate,t.params.endDate],"-"))return r();t.dataLoaded=t.params.currentPage&&1<parseInt(t.params.currentPage),t.dataLoaded||$e.triggerLoader("payouts",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"payout_details",security:f.getAFWParams("security.dashboard.payoutDetails")||"",from_date:afwcDateFunctions.getDateTime(t.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(t.params.endDate,{dayEnd:!0})||"",affiliate_id:t.params.id||0,page:t.params.currentPage||1},callback:function(a){a&&a.data&&a.data.length>0&&($e.details.payouts=t.dataLoaded?$e.details.payouts.concat(a.data):a.data),t.dataLoaded||$e.triggerLoader("payouts",!1),null!=a&&a.meta&&(e.flags.loadMore=!!a.meta.load_more),r()}})}catch(e){a(e)}})}},{key:"fetchKPI",value:function(){$e.triggerLoader("payoutKPI",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"payout_kpi_details",security:f.getAFWParams("security.dashboard.payoutKPIData")||"",affiliate_id:this.params.id||0},callback:function(e){var t=e.ACK,r=void 0!==t&&t,a=e.result,o=void 0===a?{}:a;r&&($e.details.payoutStats=o),$e.triggerLoader("payoutKPI",!1)}})}},{key:"processPayout",value:function(){var t=this,r=new FormData,a={cmd:"process_payout",security:f.getAFWParams("security.dashboard.processPayout")||"",method:this.params.method,affiliate:JSON.stringify(this.params.affiliate),currency:this.params.currency,selected_referrals:JSON.stringify(this.params.selectedReferrals),date:afwcDateFunctions.getDateTime(this.params.date),note:this.params.note};for(var o in a)r.append(o,a[o]);return new Promise(function(a){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:r,withCredentials:!1,responseType:"json"}).then(function(r){if("Success"===r.ACK&&Object.keys(r.last_added_payout_data).length>0){var o=Number(parseFloat($e.details.stats.current.unpaid_commissions||0).toFixed(2)),i=Number(parseFloat(lt.data.kpi.unpaid_commissions||0).toFixed(2)),n=r.last_added_payout_data.hasOwnProperty("amount")?Number(parseFloat(r.last_added_payout_data.amount||0).toFixed(2)):0,s=t.params.selectedReferrals.map(function(e){return e.referral_id||0});$e.details.stats.current.unpaid_commissions=o>0?Number(parseFloat(o-n).toFixed(2)):o,lt.data.kpi.unpaid_commissions=i>0?Number(parseFloat(i-n).toFixed(2)):i,$e.details.referrals.map(function(e,t){e.referral_id&&s.indexOf(e.referral_id)>-1&&($e.details.referrals[t].status="paid")}),$e.details.stats.current.unpaid_commissions=parseFloat($e.details.stats.current.unpaid_commissions).toFixed(2),lt.data.kpi.unpaid_commissions=parseFloat(lt.data.kpi.unpaid_commissions).toFixed(2),e.flags.PayoutProcessed=!0,D.show({status:"success",message:_x("Payout processed successfully","Notification message for successful payout","affiliate-for-woocommerce")})}else e.flags.PayoutProcessed=!1,D.show({status:"error",message:r.error});a(r)})})}},{key:"printInvoice",value:(o=re().m(function e(){var t,r,a,o,i,n,s,l,c,u,f,m,d,p,y,g,v,h,b,w=arguments;return re().w(function(e){for(;;)switch(e.n){case 0:if(c=w.length>0&&void 0!==w[0]?w[0]:0){e.n=1;break}return e.a(2);case 1:if(u=this.getDataForGenerateInvoice(c)){e.n=2;break}return e.a(2);case 2:return e.n=3,this.generateInvoice(u);case 3:if(b=e.v){e.n=4;break}b="";case 4:if(f=b){e.n=5;break}return e.a(2);case 5:if(m=(null===(t=window)||void 0===t||null===(r=t.open)||void 0===r?void 0:r.call(t,"","","height=600,width=800"))||null){e.n=6;break}return e.a(2);case 6:if(null===(a=m.document)||void 0===a||null===(o=a.write)||void 0===o||o.call(a,f),null===(i=m.document)||void 0===i||null===(n=i.close)||void 0===n||n.call(i),null===(s=m.focus)||void 0===s||s.call(m),(d=null===(l=m.document)||void 0===l?void 0:l.images)&&d.length>0){p=0,y=oe(d);try{for(y.s();!(g=y.n()).done;)(v=g.value).onload=v.onerror=function(){var e;++p===d.length&&(null===(e=m.print)||void 0===e||e.call(m))}}catch(e){y.e(e)}finally{y.f()}}else null===(h=m.print)||void 0===h||h.call(m);case 7:return e.a(2)}},e,this)}),i=function(){var e=this,t=arguments;return new Promise(function(r,a){var i=o.apply(e,t);function n(e){ne(i,r,a,n,s,"next",e)}function s(e){ne(i,r,a,n,s,"throw",e)}n(void 0)})},function(){return i.apply(this,arguments)})},{key:"generateInvoice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t){f.requestHandler({requestData:ee({dashboard:"afwc_dashboard_controller",cmd:"payout_invoice",security:f.getAFWParams("security.dashboard.payoutInvoice")||""},e),responseType:"document",callback:function(e){var r;return t((null==e||null===(r=e.documentElement)||void 0===r?void 0:r.outerHTML)||"")},error:function(e){console.log("Error while generating invoice: ".concat(e)),t("")}})})}},{key:"getDataForGenerateInvoice",value:function(){var e,t,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(null==$e||null===(e=$e.details)||void 0===e||!e.payouts||!a)return null;var o=(null===(t=(r=$e.details.payouts).find)||void 0===t?void 0:t.call(r,function(){var e;return(null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payout_id)||void 0===e?void 0:e.toString())===a.toString()}))||null;return o?{payout_id:o.payout_id||0,affiliate_id:$e.details.affiliateId||0,date_time:o.datetime||"",from_period:o.from_date||"",to_period:o.to_date||"",referral_count:o.referral_count||0,amount:o.amount||0,currency:o.currency||"",method:o.method||"",notes:o.payout_notes||""}:null}}],a=[{key:"initialize",value:function(){e.flags={loadMore:!0,PayoutProcessed:!1}}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],r&&se(t.prototype,r),a&&se(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a,o,i}();function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function fe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,me(a.key),a)}}function me(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}ce.initialize();var de=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,a=[{key:"initialize",value:function(){e.flags={loadMore:!0}}},{key:"flags",get:function(){return e._flags},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._flags=t}}],(r=[{key:"fetch",value:function(){var t=this;return new Promise(function(r,a){try{if(!afwcDateFunctions.isValidDate([t.params.startDate,t.params.endDate],"-"))return r();t.dataLoaded=t.params.currentPage&&1<parseInt(t.params.currentPage),t.dataLoaded||$e.triggerLoader("products",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"products",security:f.getAFWParams("security.dashboard.productsDetails")||"",from_date:afwcDateFunctions.getDateTime(t.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(t.params.endDate,{dayEnd:!0})||"",affiliate_id:t.params.id||0,page:t.params.currentPage||1},callback:function(a){a&&a.data&&Object.keys(a.data).length>0&&($e.details.products=t.dataLoaded?$e.details.products.concat(a.data):a.data),t.dataLoaded||$e.triggerLoader("products",!1),e.flags.loadMore=a&&a.meta&&!0===a.meta.load_more,r()}})}catch(e){a(e)}})}}])&&fe(t.prototype,r),a&&fe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ye(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ge(a.key),a)}}function ge(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=pe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}de.initialize();var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,a=[{key:"initialize",value:function(){e.flags={loadMore:!0}}},{key:"flags",get:function(){return e._flags},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._flags=t}}],(r=[{key:"fetch",value:function(){var t=this;return new Promise(function(r,a){try{if(!afwcDateFunctions.isValidDate([t.params.startDate,t.params.endDate],"-"))return r();t.dataLoaded=t.params.currentPage&&1<parseInt(t.params.currentPage),t.dataLoaded||$e.triggerLoader("visits",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"visits_details",security:f.getAFWParams("security.dashboard.visitsDetails")||"",from_date:afwcDateFunctions.getDateTime(t.params.startDate,{dayStart:!0})||"",to_date:afwcDateFunctions.getDateTime(t.params.endDate,{dayEnd:!0})||"",affiliate_id:t.params.id||0,page:t.params.currentPage||1},callback:function(a){a&&a.data&&a.data.length>0&&($e.details.visits=t.dataLoaded?$e.details.visits.concat(a.data):a.data),t.dataLoaded||$e.triggerLoader("visits",!1),e.flags.loadMore=a&&a.meta&&!0===a.meta.load_more,r()}})}catch(e){a(e)}})}}])&&ye(t.prototype,r),a&&ye(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function be(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,we(a.key),a)}}function we(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=he(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==he(t)?t:t+""}ve.initialize();var xe=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{}},t=[{key:"fetch",value:function(){$e.triggerLoader("profile",!0),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"profile_data",security:f.getAFWParams("security.dashboard.profileData")||"",affiliate_id:this.params.id||0},callback:function(e){if("Success"===e.ACK){var t=e.data||{};Object.entries(t).length>0&&($e.details.customUrlIdentifierData=t.custom_url_identifier_data||{},$e.details.identifier=t.identifier||"",$e.details.isReferralCouponEnabled=t.is_referral_coupon_enabled||"",$e.details.coupons=t.coupons||{},$e.details.allAvailableTags=t.all_available_tags||{},$e.details.tags=t.tags||{},$e.details.parentAffiliateData=t.parent_affiliate_data||"",$e.details.isLandingPageEnabled=t.is_landing_page_enabled||"no",$e.details.landingPages=t.landing_pages||{},$e.details.isLTCEnabled=t.is_ltc_enabled||"no",$e.details.isLTCEnabledForAffiliate=t.is_ltc_enabled_for_affiliate||!1,$e.details.ltcCustomers=t.ltc_customers||{},$e.details.paypalEmailData=t.paypal_email_data||{},$e.details.automaticPayoutData=t.automatic_payout_data||{},$e.details.registrationFormData=t.registration_form_data||{},$e.details.payoutMethodTitle=t.payout_method_title||"")}$e.triggerLoader("profile",!1)}})}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(D.hide(),$e.details.ltcCustomers[e].isProcessing=!0,f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"unlink_ltc_customers",security:f.getAFWParams("security.dashboard.unlinkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:e},callback:function(t){var r="Success"===t.ACK;r&&e in $e.details.ltcCustomers?delete $e.details.ltcCustomers[e]:$e.details.ltcCustomers[e].isProcessing=!1,D.show({status:r?"success":"error",message:r?_x("Customer unlinked successfully","Success message for removal of linked lifetime commission customer","affiliate-for-woocommerce"):t.msg||_x("Customer can't be unlinked","Error message for failing of the unlinking the customer for lifetime commissions","affiliate-for-woocommerce")})}}))}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){D.hide();var t=e.id||e.email;t&&f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"link_ltc_customers",security:f.getAFWParams("security.dashboard.linkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:t},callback:function(r){var a="Success"===r.ACK;a&&($e.details.ltcCustomers[t]=e),D.show({status:a?"success":"error",message:a?_x("Customer linked successfully","Success message after linking the customer for lifetime commissions","affiliate-for-woocommerce"):r.msg||_x("Customer can't be linked","Error message for failing of linking the customer for lifetime commissions","affiliate-for-woocommerce")})}})}}}],t&&be(e.prototype,t),r&&be(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ke(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pe(a.key),a)}}function Pe(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=_e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}var Se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{},this.affiliateID=this.params.id||0,e.details={},e.flags={loading:!1}}return t=e,a=[{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],(r=[{key:"fetch",value:function(){this.affiliateID&&(e.flags.loading=!0,f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_chain_data",security:f.getAFWParams("security.dashboard.multiTierData")||"",affiliate_id:this.affiliateID},callback:function(t){if("Success"===t.ACK){var r=t.data||{};Object.entries(r).length>0&&(e.details=r.multiTierChain||{})}e.flags.loading=!1}}))}}])&&ke(t.prototype,r),a&&ke(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Oe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,De(a.key),a)}}function De(e){var t=function(e,t){if("object"!=je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=je(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==je(t)?t:t+""}var Ce=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)},(t=[{key:"initialize",value:function(e){this.formData=e.formData||{},this.affiliateStatus=e.affiliateStatus||"active"}},{key:"anchorTagComponent",value:function(e){return e.toString().split(",").map(function(e){return m("[",null,m("a",{href:e.trim(),target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},e.trim()),m("br",null))})}},{key:"view",value:function(){var e,t,r,a,o,i,n,s,l,c,u,f=this;return m("table",{class:"overflow-hidden"},m("tbody",null,"pending"===this.affiliateStatus&&null!==(e=this.formData)&&void 0!==e&&e.user_email?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Email","email label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.user_email)):"",null!==(t=this.formData)&&void 0!==t&&t.first_name?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("First Name","first name label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.first_name)):"",null!==(r=this.formData)&&void 0!==r&&r.last_name?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Last Name","last name label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.last_name)):"",null!==(a=this.formData)&&void 0!==a&&a.user_url?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Website","user website label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.anchorTagComponent(this.formData.user_url))):"",null!==(o=this.formData)&&void 0!==o&&o.contact?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Way To Contact","contact label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.contact)):"",null!==(i=this.formData)&&void 0!==i&&i.skype?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Skype ID","skype id label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.skype)):"",null!==(n=this.formData)&&void 0!==n&&n.description?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("About Affiliate","affiliate description label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.description)):"","pending"===this.affiliateStatus&&m("[",null,(null===(s=this.formData)||void 0===s?void 0:s.paypal_email)&&m("tr",null,m("td",{className:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("PayPal Email Address","affiliate paypal email label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{className:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.paypal_email)),(null===(l=this.formData)||void 0===l?void 0:l.parent_affiliate)&&m("tr",null,m("td",{className:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Parent Affiliate","affiliate parent affiliate label at in affiliate profile tab","affiliate-for-woocommerce")),m("td",{className:"px-4 py-4 text-sm leading-5 text-gray-500"},this.formData.parent_affiliate))),null!==(c=this.formData)&&void 0!==c&&c.additional_data&&"object"===je(null===(u=this.formData)||void 0===u?void 0:u.additional_data)?this.formData.additional_data.map(function(e){return m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},null==e?void 0:e.label),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},null!=e&&e.has_url?f.anchorTagComponent(null==e?void 0:e.value):null==e?void 0:e.value))}):""))}}])&&Oe(e.prototype,t),r&&Oe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Te(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Le(a.key),a)}}function Le(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ae(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ae(t)?t:t+""}var Ie=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"affiliateDisplayLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{var o="",i=afwcDashboardParams.isPrettyReferralEnabled||"no",n=afwcDashboardParams.pname;return a=a||("admin"==r?"{affiliate_id}":afwcDashboardParams.affiliate_id),o=-1==(e=e.replace(/\/$/,"")).indexOf("?")?e+("yes"==i?"/"+n+"/"+a:"/?"+n+"="+a):"yes"==i?e.substring(0,e.indexOf("?")).replace(/\/$/,"")+"/"+n+"/"+a+"/?"+e.substring(e.indexOf("?")+1):e+"&"+n+"="+a,o+=""!=t?(-1==o.indexOf("?")?"/?":"&")+"utm_campaign="+t:""}catch(e){console.log("In GlobalFunctions for affiliate links:: ",e)}}},{key:"doCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(e.length>0){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(t.value),document.body.removeChild(t)}}catch(e){console.log("In GlobalFunctions to copy:: ",e)}}}],(t=null)&&Te(e.prototype,t),r&&Te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Fe(e,t,r){return(t=He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ne(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function ze(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return We(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(We(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,We(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,We(f,"constructor",c),We(c,"constructor",l),l.displayName="GeneratorFunction",We(c,o,"GeneratorFunction"),We(f),We(f,o,"Generator"),We(f,a,function(){return this}),We(f,"toString",function(){return"[object Generator]"}),(ze=function(){return{w:i,m}})()}function We(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}We=function(e,t,r,a){function i(t,r){We(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},We(e,t,r,a)}function Be(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function qe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,He(a.key),a)}}function He(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Me(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}var Ge=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.initializeProfileData(),this.preventWithoutSaveLeave()}return t=e,r=[{key:"oninit",value:function(){new xe(this.params).fetch()}},{key:"onupdate",value:function(e){var t,r;this.initializeTextInputs(),this.initializeSelect2(),Number((null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||"")!==Number((null==$e||null===(r=$e.details)||void 0===r?void 0:r.affiliateId)||"")&&(this.initializeProfileData(),this.preventWithoutSaveLeave()),this.manageDateFilterClick()}},{key:"initializeProfileData",value:function(){e.data={identifier:null,affiliateTags:[],parentAffiliate:null,paypalEmail:null},e.flags={hasChanges:!1,editingIdentifier:!1,identifierEdited:!1,tagsEdited:!1,parentAffiliateEdited:!1,paypalEmailEdited:!1}}},{key:"preventWithoutSaveLeave",value:function(){var t=this,r=!1,a=!1,o=!1,i=_x("Are you sure you want to leave? Unsaved changes will be lost.","confirmation message before leaving unsaved profile tab","affiliate-for-woocommerce"),n=function(a){if(e.flags.hasChanges&&document.querySelector(".afwc-profile-tab")&&!o&&!r){var n=a.target.closest("a");if(n&&!document.querySelector(".afwc-profile-tab").contains(a.target)){if(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),r=!0,!confirm(i))return r=!1,!1;r=!1,o=!0,e.flags.hasChanges=!1,t.manageDateFilterClick(),setTimeout(function(){n.click()},10)}}};a||(document.addEventListener("mousedown",n),window.onbeforeunload=function(t){e.flags.hasChanges&&document.querySelector(".afwc-profile-tab")&&!o&&!r&&(t.preventDefault(),t.returnValue="")},a=!0)}},{key:"manageDateFilterClick",value:function(){var t=document.querySelector(".afwc-date-filter");if(t){var r=e.flags.hasChanges,a=t.firstElementChild;t.classList.toggle("cursor-not-allowed",r),t.setAttribute("title",r?_x("You cannot change dates as the affiliate profile has unsaved changes.","title text for disabled date filter due to unsaved changes on profile","affiliate-for-woocommerce"):""),a&&a.classList.toggle("pointer-events-none",r)}}},{key:"toggleAccordion",value:function(e){if(null!=e&&e.target){var t=e.target.getAttribute("aria-controls"),r=document.getElementById(t);if(r){var a;e.target.classList.add("pointer-events-none"),setTimeout(function(){return e.target.classList.remove("pointer-events-none")},300),r.classList.contains("section-closed")?(r.classList.remove("section-closed","opacity-0"),r.classList.add("section-opened","opacity-100"),r.style.maxHeight="".concat(r.scrollHeight,"px"),setTimeout(function(){return r.style.maxHeight=""},300)):(a=ze().m(function e(){return ze().w(function(e){for(;;)switch(e.n){case 0:return r.style.maxHeight="".concat(r.scrollHeight,"px"),e.n=1,new Promise(function(e){return setTimeout(e,1)});case 1:r.classList.remove("section-opened","opacity-100"),r.classList.add("section-closed","opacity-0"),r.style.maxHeight="0";case 2:return e.a(2)}},e)}),function(){var e=this,t=arguments;return new Promise(function(r,o){var i=a.apply(e,t);function n(e){Be(i,r,o,n,s,"next",e)}function s(e){Be(i,r,o,n,s,"throw",e)}n(void 0)})})();var o=e.target.querySelector("svg");o&&o.classList.toggle("rotate-180")}}}},{key:"initializeTextInputs",value:function(){var t,r;document.querySelector(".afwc-identifier-input")&&(e.data.identifier=(null===(t=document.querySelector(".afwc-identifier-input"))||void 0===t?void 0:t.value)||""),document.querySelector(".afwc-paypal-email-input")&&(e.data.paypalEmail=(null===(r=document.querySelector(".afwc-paypal-email-input"))||void 0===r?void 0:r.value)||"")}},{key:"initializeSelect2",value:function(){for(var e=0,t=[".afwc-tag-search",".afwc-parent-affiliate-search",".afwc-customer-search"];e<t.length;e++){var r=t[e],a=document.querySelector(r);if(a&&(null==a||!a.classList.contains("select2-hidden-accessible")))switch(r){case".afwc-tag-search":this.loadTagSearchSelect2(r);break;case".afwc-parent-affiliate-search":this.loadParentSearchSelect2(r);break;case".afwc-customer-search":this.loadLTCSearchSelect2(r)}}document.addEventListener("focusout",function(e){var t=e.target;t.classList.contains("select2-search__field")&&(t.closest(".afwc-tag-search-container")||t.closest(".afwc-ltc-search-container"))&&(t.style.paddingLeft="5px")})}},{key:"loadTagSearchSelect2",value:function(t){var r=jQuery(t),a={placeholder:r.attr("placeholder")||"",minimumInputLength:1,escapeMarkup:function(e){return e},tags:!0,ajax:{url:f.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_dashboard_controller",cmd:"search_affiliate_tags",security:f.getAFWParams("security.dashboard.searchAffiliateTags")||""}},processResults:function(e){var t=[];return e&&jQuery.each(e,function(e,r){t.push({id:e,text:r})}),{results:t}},cache:!0}};r.select2(a),e.data.affiliateTags=r.val(),r.on("change.select2",function(){e.data.affiliateTags=jQuery(this).val(),e.setProfileDetailsFlags("tagsEdited",!0),m.redraw()})}},{key:"loadParentSearchSelect2",value:function(t){var r=jQuery(t),a={placeholder:r.attr("placeholder")||"",minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:f.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"afwc_dashboard_controller",cmd:"search_for_parent_affiliate",security:f.getAFWParams("security.dashboard.searchForParentAffiliate")||"",user_id:$e.details.affiliateId}},processResults:function(e){var t=[];return e&&jQuery.each(e,function(e,r){t.push({id:e,text:r})}),{results:t}},cache:!0}};r.select2(a),e.data.parentAffiliate=r.val(),r.on("change.select2",function(){e.data.parentAffiliate=jQuery(this).val(),e.setProfileDetailsFlags("parentAffiliateEdited",!0),m.redraw()})}},{key:"loadLTCSearchSelect2",value:function(e){var t=this,r=jQuery(e),a={placeholder:r.attr("placeholder")||"",dropdownParent:jQuery(e).parent(),minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:f.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_dashboard_controller",cmd:"search_ltc_customers",security:f.getAFWParams("security.dashboard.searchLTCCustomers")||""}},processResults:function(e){var t=[];if(e&&"Success"===e.ACK){var r=e.data||{};jQuery.each(r,function(e,r){t.push({id:r.id||r.email||"",text:r.text||"",email:r.email||"",name:r.name||""})})}return{results:t}},cache:!0}};r.select2(a),r.on("select2:select",function(e){var a=e.params.data;r.val([]).trigger("change"),t.linkCustomersLTC(a)}),r.on("select2:selecting",function(e){var t=e.params.args.data||{};parseInt(t.id)===parseInt($e.details.affiliateId)&&(confirm(_x("Are you sure you want to link the same affiliate as a lifetime customer?","self linking alert","affiliate-for-woocommerce"))||e.preventDefault())})}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";new xe({id:$e.details.affiliateId}).unlinkCustomersLTC(e)}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new xe({id:$e.details.affiliateId}).linkCustomersLTC(e)}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return parseInt(e)>0?m("[",null,Ne(Array(parseInt(e))).map(function(){return m("div",{class:"flex animate-pulse"},m("div",{class:"bg-gray-300 rounded m-2 h-8 w-1/4"}),m("div",{class:"bg-gray-300 rounded m-2 h-8 w-3/4"}))})):""}},{key:"renderIdentifierComponent",value:function(){var t,r,a,o,i;return e.data.identifier=null===e.data.identifier||void 0===e.data.identifier?$e.details.identifier:e.data.identifier,m("[",null,m("div",{class:"flex items-center gap-2"},!(null!=e&&null!==(t=e.flags)&&void 0!==t&&t.editingIdentifier)&&m("[",null,m("span",null,(null==$e||null===(r=$e.details)||void 0===r?void 0:r.identifier)||""),m("a",{title:_x("Edit identifier","Admin - title for affiliate identifier edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer",onclick:function(){return e.setProfileDetailsFlags("editingIdentifier",!0)}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})))),(null==e||null===(a=e.flags)||void 0===a?void 0:a.editingIdentifier)&&m("[",null,m("input",{type:"text",class:"afwc-identifier-input form-input leading-6 px-2 py-1 text-sm text-gray-600 border-gray-400 focus:border-gray-800 focus:ring-0",placeholder:_x("Enter affiliate identifier","placeholder for Affiliate identifier field","affiliate-for-woocommerce"),value:e.data.identifier,oninput:function(t){var r;e.data.identifier=(null==t||null===(r=t.target)||void 0===r?void 0:r.value)||"",e.setProfileDetailsFlags("identifierEdited",!0)}}),m("a",{title:_x("Cancel","Admin - title for edit affiliate identifier cancel icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer",onclick:function(){e.setProfileDetailsFlags("editingIdentifier",!1),e.setProfileDetailsFlags("identifierEdited",!1),e.data.identifier=$e.details.identifier}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"}))))),!(null!=$e&&null!==(o=$e.details)&&void 0!==o&&null!==(o=o.customUrlIdentifierData)&&void 0!==o&&o.is_enabled)&&m("div",{class:"text-xs flex flex-col bg-warning p-2 mt-1"},m("span",null,_x("The affiliate cannot use this identifier as the ","Admin - Profile warning for personalizing affiliate identifier can not use","affiliate-for-woocommerce"),m("a",{href:null==$e||null===(i=$e.details)||void 0===i||null===(i=i.customUrlIdentifierData)||void 0===i?void 0:i.setting_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},_x("Personalize affiliate identifier","Admin - setting name for personalizing affiliate identifier at profile warning","affiliate-for-woocommerce")),_x(" setting is disabled. ","Admin - Profile warning for personalizing affiliate identifier setting is disabled","affiliate-for-woocommerce")),m("span",null,_x("Enable the setting to allow the affiliate to use this identifier in the referral URL.","Admin - Profile warning for allow setting to personalizing affiliate identifier","affiliate-for-woocommerce"))))}},{key:"couponsListComponent",value:function(){var e,t,r;return null!=$e&&null!==(e=$e.details)&&void 0!==e&&e.coupons&&"object"===Me(null==$e||null===(t=$e.details)||void 0===t?void 0:t.coupons)&&Object.keys($e.details.coupons).length>0?m("ul",{class:"grid grid-cols-3 w-full gap-y-1"},Object.values($e.details.coupons).map(function(e){return m("li",{class:"flex items-center m-0 text-xs text-left text-gray-500 gap-2"},"string"==typeof e?m("span",{class:"m-1 px-2 py-0.5 font-mono"},e):m("[",null,m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(t){Ie.doCopy(e.coupon_code||"")},class:"cursor-pointer"},m("code",null,e.coupon_code||"")),m("a",{href:e.coupon_edit_url||"",target:"_blank",title:_x("Edit coupon","Admin - title for coupon edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})))))})):m("[",null,m("span",null,_x("No coupons assigned","empty coupon message","affiliate-for-woocommerce")),m("span",{class:"mx-1"},"|"),m("span",null,f.getAFWParams("createAffiliateCouponLink")?m("a",{href:null===(r=f.getAFWParams("createAffiliateCouponLink"))||void 0===r||null===(r=r.toString())||void 0===r?void 0:r.replace("%%AffiliateID%%",$e.details.affiliateId),target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},_x("Create a coupon","Create coupon link message","affiliate-for-woocommerce")):""))}},{key:"searchAndAssignTagsComponent",value:function(){var e,t,r,a=$e.details.tags,o=null!=$e&&null!==(e=$e.details)&&void 0!==e&&e.allAvailableTags&&"object"===Me(null==$e||null===(t=$e.details)||void 0===t?void 0:t.allAvailableTags)?$e.details.allAvailableTags:a;return m("div",{class:"afwc-tag-search-container flex-1 w-full"},m("select",{id:"afwc_tag_search",name:"afwc_user_tags",class:"afwc-tag-search form-multiselect wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent",placeholder:$e.details.isRejected?_x("Tag assign input is disabled for the rejected affiliate","placeholder of disabling affiliate tag search field","affiliate-for-woocommerce"):_x("Search tags","placeholder for searching the affiliate tag","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%",disabled:null==$e||null===(r=$e.details)||void 0===r?void 0:r.isRejected},Object.keys(o).map(function(e){return m("option",{key:e,value:e,selected:a[e]?"selected":""},o[e])})))}},{key:"searchAndAssignParentAffiliateComponent",value:function(){var e,t,r;return m("div",{class:"afwc-parent-affiliate-search-container flex-1 w-full"},m("select",{id:"afwc_parent_affiliate_search",name:"afwc_parent_id",class:"afwc-parent-affiliate-search wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select block",placeholder:$e.details.isRejected?_x("Parent affiliate input is disabled for the rejected affiliate","placeholder of disabling parent affiliate search field","affiliate-for-woocommerce"):_x("Search for a parent affiliate","Placeholder for parent affiliate search input","affiliate-for-woocommerce"),style:"width: 100%","data-allow-clear":"true",disabled:null==$e||null===(e=$e.details)||void 0===e?void 0:e.isRejected},""!==(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.parentAffiliateData)||void 0===t?void 0:t.id)&&""!==(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.parentAffiliateData)||void 0===r?void 0:r.text)?m("option",{value:$e.details.parentAffiliateData.id,selected:"selected"},$e.details.parentAffiliateData.text):""),m("p",{class:"mt-1 text-xs text-left text-gray-600"},_x("The commission will be distributed to this parent affiliate on a multi-tier commission plan.","Description for the parent affiliate field in affiliate profile","affiliate-for-woocommerce")))}},{key:"landingPagesListComponent",value:function(){return Object.keys($e.details.landingPages).length>0?m("ul",{class:"grid grid-cols-1 w-full gap-y-1"},Object.values($e.details.landingPages).map(function(e){return m("li",{class:"flex items-center m-0 text-xs text-left text-gray-500 gap-2"},m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(t){Ie.doCopy(e.public_link||"")},class:"cursor-pointer"},m("code",null,e.public_link||"")),m("a",{href:e.edit_link||"",target:"_blank",title:_x("Edit page","Admin - title for landing page edit icon","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition duration-150 ease-in-out cursor-pointer"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))))})):_x("No landing page assigned","empty landing page message","affiliate-for-woocommerce")}},{key:"searchLTCCustomerComponent",value:function(){return m("div",{class:"afwc-ltc-search-container flex-1 w-full"},m("select",{id:"afwc_customer_search",class:"afwc-customer-search form-multiselect wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent",placeholder:$e.details.isLTCEnabledForAffiliate?_x("Search and Link customer","placeholder for searching the customer","affiliate-for-woocommerce"):_x("Lifetime commission is disabled for the affiliate","placeholder of disabling the customer search","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%",disabled:!$e.details.isLTCEnabledForAffiliate}))}},{key:"LTCCustomersListComponent",value:function(){var e=this;return m("div",{class:"w-full overflow-auto max-h-44 my-4"},m("div",{class:"grid grid-cols-2 w-full gap-4"},Object.values($e.details.ltcCustomers).map(function(t){return m("div",{class:"p-2 h-12 border border-gray-200 flex items-center justify-between ".concat(t.isProcessing?"opacity-50":"")},m("div",null,m("p",{class:"font-medium"},t.name||t.email||""),t.name?m("p",{class:"text-gray-500"},t.email||""):""),m("div",{class:"flex flex-col text-xs items-end"},m("a",{class:"text-red-500 underline cursor-pointer",onclick:function(){return e.unlinkCustomersLTC(t.id||t.email)}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))))})))}},{key:"paypalEmailInputComponent",value:function(){var t;return e.data.paypalEmail=null===e.data.paypalEmail||void 0===e.data.paypalEmail?(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.paypalEmailData)||void 0===t?void 0:t.paypal_email)||"":e.data.paypalEmail,m("[",null,m("input",{type:"email",class:"afwc-paypal-email-input form-input w-full leading-6 px-2 py-1 text-sm text-gray-600 border-gray-400 focus:border-gray-800 focus:ring-0",placeholder:_x("Enter PayPal email address where affiliate will receive commission","placeholder for PayPal email address field","affiliate-for-woocommerce"),value:e.data.paypalEmail,oninput:function(t){e.data.paypalEmail=t.target.value,e.setProfileDetailsFlags("paypalEmailEdited",!0)}}),m("p",{class:"mt-1 text-xs text-left text-gray-600"},_x("This affiliate will receive their commission on the above PayPal email address.","description for PayPal email field","affiliate-for-woocommerce")))}},{key:"processProfileSave",value:function(t){var r,a,o,i;t.preventDefault();var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach(function(t){Fe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.data);$e.details.identifier!==e.data.identifier||null!=e&&null!==(r=e.flags)&&void 0!==r&&r.editingIdentifier||delete n.identifier,null!=e&&null!==(a=e.flags)&&void 0!==a&&a.tagsEdited||delete n.affiliateTags,null!=e&&null!==(o=e.flags)&&void 0!==o&&o.parentAffiliateEdited||delete n.parentAffiliate,null!=e&&null!==(i=e.flags)&&void 0!==i&&i.paypalEmailEdited||delete n.paypalEmail,Object.keys(n).forEach(function(e){return null===n[e]&&(n[e]="")}),g.showLoader=!0,g.msg=_x("Updating","loading text for profile tab save button","affiliate-for-woocommerce"),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"update_affiliate_profile",security:f.getAFWParams("security.dashboard.saveAffiliateProfileChanges")||"",affiliate_id:$e.details.affiliateId||0,profile_data:JSON.stringify(n)},callback:function(t){var r,a,o;t.success?(D.show({status:"success",message:_x("Affiliate profile updated successfully.","message after profile update successfully","affiliate-for-woocommerce")}),$e.details.identifier=null==e||null===(r=e.data)||void 0===r?void 0:r.identifier,null!=$e&&null!==(a=$e.details)&&void 0!==a&&null!==(a=a.customUrlIdentifierData)&&void 0!==a&&a.is_enabled&&e.data.identifier&&null!=e&&null!==(o=e.flags)&&void 0!==o&&o.editingIdentifier&&($e.details.referralURL=Ie.affiliateDisplayLink(f.getAFWParams("home_url"),"","",$e.details.identifier)),Object.keys(e.flags).forEach(function(t){return e.flags[t]=!1})):D.show({status:"error",message:t.data.toString()}),g.showLoader=!1}})}},{key:"view",value:function(){var t,r,a,o,i,n,s,l,c,u,d;return m("section",{class:"afwc-profile-tab my-5 overflow-x-auto"},$e.isLoading("profile")?this.showPlaceholder():m("div",{class:"overflow-auto"},m("div",{class:"flex flex-col justify-center overflow-hidden"},m("div",{class:"w-full mx-auto"},m("form",{id:"afwc_profile_tab_form",onsubmit:this.processProfileSave},m("div",{class:"flex items-center justify-end mb-3"},m("div",{class:(e.flags.hasChanges?"":"cursor-not-allowed ")+"rounded-md shadow-sm mx-4"},m("button",{type:"submit",class:(e.flags.hasChanges?"":"opacity-50 pointer-events-none ")+"flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:ring-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75"},_x("Update","update button text for profile tab","affiliate-for-woocommerce")))),m("div",{class:"divide-y divide-slate-200"},m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-1",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Referral Details","profile tab's referral details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out rotate-180"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-1",class:"section-opened grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-100"},m("table",{class:"overflow-hidden"},m("tbody",null,null!=$e&&null!==(t=$e.details)&&void 0!==t&&t.referralURL?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Referral Link","Admin - Referral link label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},m("div",{class:"text-xs"},m("span",{class:"cursor-pointer","data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){Ie.doCopy($e.details.referralURL||"")}},m("code",null,$e.details.referralURL))))):"",null!=$e&&null!==(r=$e.details)&&void 0!==r&&r.identifier?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Affiliate Identifier","Admin - Affiliate identifier label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.renderIdentifierComponent())):"","yes"===$e.details.isReferralCouponEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Referral Coupons","Admin - Referral coupons label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.couponsListComponent())):"",m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Tags","Admin - Affiliate tags label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},null!=$e&&null!==(a=$e.details)&&void 0!==a&&a.tags&&"object"===Me(null==$e||null===(o=$e.details)||void 0===o?void 0:o.tags)?this.searchAndAssignTagsComponent():_x("No tags assigned","empty tags message","affiliate-for-woocommerce"))),f.getAFWParams("isMultiTierEnabled")?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Parent Affiliate","Admin - Parent affiliate label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},this.searchAndAssignParentAffiliateComponent())):"","yes"===$e.details.isLandingPageEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Landing Pages","Admin - Landing page label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.landingPagesListComponent())):"","yes"===$e.details.isLTCEnabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("Lifetime Customers","Admin - Lifetime customers label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},this.searchLTCCustomerComponent(),this.LTCCustomersListComponent())):"")))),m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-2",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Payout Details","payout details's referral details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-2",class:"section-closed grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-0",style:"max-height: 0;"},m("table",{class:"overflow-hidden"},m("tbody",null,null!=$e&&null!==(i=$e.details)&&void 0!==i&&i.payoutMethodTitle?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Payout Method","Title for Payout method","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},$e.details.payoutMethodTitle)):"",!0===(null==$e||null===(n=$e.details)||void 0===n||null===(n=n.paypalEmailData)||void 0===n?void 0:n.afwc_allow_paypal_email)||""!==(null==$e||null===(s=$e.details)||void 0===s||null===(s=s.paypalEmailData)||void 0===s?void 0:s.paypal_email)?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4 align-top"},_x("PayPal Email Address","Admin - PayPal email address label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},this.paypalEmailInputComponent())):"",null!=$e&&null!==(l=$e.details)&&void 0!==l&&null!==(l=l.automaticPayoutData)&&void 0!==l&&l.is_enabled?m("tr",null,m("td",{class:"px-4 py-4 text-sm font-medium leading-5 text-gray-600 w-1/4"},_x("Is Selected For Automatic Payout?","description if user is selected for automatic payout","affiliate-for-woocommerce")),m("td",{class:"px-4 py-4 text-sm leading-5 text-gray-500"},m("span",null,null!=$e&&null!==(c=$e.details)&&void 0!==c&&null!==(c=c.automaticPayoutData)&&void 0!==c&&c.is_selected?_x("Yes","affiliate is selected for automatic payout","affiliate-for-woocommerce"):_x("No","affiliate is not selected for automatic payout","affiliate-for-woocommerce")),null!=$e&&null!==(u=$e.details)&&void 0!==u&&null!==(u=u.automaticPayoutData)&&void 0!==u&&u.setting_link?m("span",{class:"ml-4"},m("a",{href:$e.details.automaticPayoutData.setting_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline"},_x("Manage setting","Automatic Payout related setting link on affiliate profile tab","affiliate-for-affiliate"))):"")):"")))),null!=$e&&null!==(d=$e.details)&&void 0!==d&&d.registrationFormData&&!Object.values($e.details.registrationFormData).every(function(e){return""===e||Array.isArray(e)&&0===e.length})?m("div",null,m("h2",{class:"bg-gray-50 leading-6 cursor-pointer"},m("a",{class:"flex items-center justify-between w-full text-left font-semibold py-2 px-4 text-base","aria-controls":"profile-section-3",onclick:this.toggleAccordion},m("span",{class:"pointer-events-none"},_x("Registration Form Details","Registration form details accordion title","affiliate-for-woocommerce")),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"pointer-events-none h-6 w-6 transform origin-center transition duration-300 ease-out"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})))),m("div",{id:"profile-section-3",class:"section-closed grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out opacity-0",style:"max-height: 0;"},m(Ce,{formData:$e.details.registrationFormData,affiliateStatus:"active"}))):""))))))}}],a=[{key:"setProfileDetailsFlags",value:function(t,r){e.flags[t]=r,"editingIdentifier"!==t&&(e.flags.hasChanges=!0),e.flags.hasChanges=Object.keys(e.flags).some(function(t){return"hasChanges"!==t&&"editingIdentifier"!==t&&!1!==e.flags[t]})}}],r&&qe(t.prototype,r),a&&qe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach(function(t){Je(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Je(e,t,r){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Qe(a.key),a)}}function Qe(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ve(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:t+""}var $e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,r=[{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";new e(this.params).fetch(t),Ge.isInitializedSelect2=!1}},{key:"loadSectionData",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals"){case"referrals":new $(this.params).fetch();break;case"payouts":new ce(this.params).fetchKPI(),new ce(this.params).fetch();break;case"products":new de(this.params).fetch();break;case"visits":new ve(this.params).fetch();break;case"profile":new xe(this.params).fetch();break;case"multi-tier":new Se(this.params).fetch()}}},{key:"fetch",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";if(!afwcDateFunctions.isValidDate([this.params.startDate,this.params.endDate],"-"))return e.triggerLoader("all",!1);var a={dashboard:"afwc_dashboard_controller",cmd:"affiliate_details",security:f.getAFWParams("security.dashboard.affiliateDetails")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0}),affiliate_id:this.params.id||0};f.requestHandler({requestData:a,callback:function(e){return t.extractData(e)}}),this.loadSectionData(r),this.fetchKPIDetails()}},{key:"fetchKPIDetails",value:function(){f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_kpi_details",security:f.getAFWParams("security.dashboard.affiliateKPIData")||"",from_date:afwcDateFunctions.getDateTime(this.params.startDate,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(this.params.endDate,{dayEnd:!0}),affiliate_id:this.params.id||0},callback:function(t){e.details.stats=t.stats||{current:{},allTime:{}},e.triggerLoader("KPI",!1)}})}},{key:"extractData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.details=Ue(Ue({},e.details),{},{name:t.name||"",email:t.email||"",affiliateId:t.affiliate_id||0,editURL:t.edit_url||"",referralURL:t.referral_url||"",isPaypalEmail:t.is_paypal_email||!1,avatarURL:t.avatar_url||"",formattedJoinDuration:t.formatted_join_duration||"",signupDate:t.signup_date||"",isRejected:t.rejected||!1,isStripeAccount:t.is_stripe_account||!1,payoutMethod:t.payout_method||"",isfixedCouponPayout:t.is_fixed_cart_coupon_payout||!1,isStoreCreditPayout:t.is_store_credit_coupon_payout||!1}),t.pending&&(e.details.pending=t.pending)}}],a=[{key:"initialize",value:function(){e.details={name:"",email:"",affiliateId:0,editURL:"",referralURL:"",isPaypalEmail:!1,avatarURL:"",lastPayoutDetails:{},formattedJoinDuration:"",stats:{current:{},allTime:{}},payoutStats:{current:{},allTime:{}},referrals:[],payouts:[],visits:[],tags:{},coupons:{},commission:{},products:{},loader:{referrals:!0,payouts:!0,products:!0,visits:!0,profile:!0,"multi-tier":!0,KPI:!0,payoutKPI:!0},multiTierChain:{},ltcCustomers:{},identifier:"",allAvailableTags:{},parentAffiliateData:{},paypalEmailData:{},automaticPayoutData:{},registrationFormData:{},signupDate:"",isRejected:!1,isStripeAccount:!1,payoutMethod:"",isfixedCouponPayout:!1,isStoreCreditPayout:!1}}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"triggerLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)if("all"===t){var a=Ue({},e.details.loader);Object.keys(a).forEach(function(e){return a[e]=r}),e.details.loader=a}else e.details.loader[t]=r}},{key:"isLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&t in e.details.loader&&e.details.loader[t]}}],r&&Ye(t.prototype,r),a&&Ye(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,et(a.key),a)}}function et(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ze(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}$e.initialize();var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.activeTab="referrals";var t="flex flex-row whitespace-nowrap px-4 py-4 block cursor-pointer font-medium text-base text-gray-500 leading-none border-x-0 border-t-0 border-b-2 hover:text-indigo-800 focus:outline-none focus:shadow-none focus:border-indigo-400 focus:text-indigo-800 focus:border-transparent";this.activeTabCSS=t+" text-indigo-600 border-indigo-400",this.inactiveTabCSS=t+" border-transparent"}return t=e,a=[{key:"activeTab",get:function(){return e._activeTab},set:function(t){e._activeTab=t}}],(r=[{key:"view",value:function(){return $e.details.pending?"":m("div",{class:"-mx-6 border-b border-t"},m("nav",{class:"-mb-px flex flex-center mx-6"},m("a",{class:"referrals"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="referrals"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Referrals","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"payouts"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="payouts"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})),m("span",null,_x("Payouts","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"products"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="products"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 22","stroke-width":"2",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})),m("span",null,_x("Products","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"visits"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="visits"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"})),m("span",null,_x("Visits","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"profile"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="profile"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),m("span",null,_x("Profile","Admin - tab title","affiliate-for-woocommerce"))),f.getAFWParams("isMultiTierEnabled")?m("a",{class:"multi-tier"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="multi-tier"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 22",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Multi-Tier","Admin - tab title","affiliate-for-woocommerce"))):""))}}])&&Xe(t.prototype,r),a&&Xe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach(function(t){it(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function it(e,t,r){return(t=st(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,st(a.key),a)}}function st(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=rt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rt(t)?t:t+""}tt.activeTab="referrals";var lt=function(){function e(){var t,r,a,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},affiliates:(null===(t=e.data)||void 0===t?void 0:t.affiliates)||[],filters:(null===(r=e.data)||void 0===r?void 0:r.filters)||{},q:(null===(a=e.data)||void 0===a?void 0:a.q)||"",currentPage:1,firstcall:!0,loadMore:!0,currentAffiliateID:(null===(o=e.data)||void 0===o?void 0:o.currentAffiliateID)||0,action:"",start_date:i.startDate||afwcDateFunctions.getFullDate(-30),end_date:i.endDate||afwcDateFunctions.getFullDate()},e.fetch(),e.restarted=!1}return t=e,a=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}},{key:"isKPILoading",get:function(){return e._isKPILoading},set:function(t){e._isKPILoading=t}},{key:"invalidDate",get:function(){return e._invalidDate},set:function(t){e._invalidDate=t}},{key:"reset",value:function(){e.data={currentAffiliateID:0,kpi:{},affiliates:[],filters:{}||{},q:""},e.restarted=!0}},{key:"fetch",value:function(){var t,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!afwcDateFunctions.isValidDate([e.data.start_date,e.data.end_date],"-"))return e.invalidDate=!0,void(e.isKPILoading=!1);e.invalidDate=!1,g.showLoader=!0,g.msg=__("Loading Affiliates","affiliate-for-woocommerce"),e.data.currentPage="load_more"!=e.data.action?1:e.data.currentPage;var i,n,s=(null===(t=e.data)||void 0===t?void 0:t.filters)||{};null!==(r=m)&&void 0!==r&&null!==(r=r.route)&&void 0!==r&&null!==(a=r.param)&&void 0!==a&&a.call(r,"id")&&(s=ot(ot({},s),{},{affiliate_ids:[null===(i=m)||void 0===i||null===(i=i.route)||void 0===i||null===(n=i.param)||void 0===n?void 0:n.call(i,"id")]}));var l={cmd:"dashboard_data",dashboard:"afwc_dashboard_controller",security:f.getAFWParams("security.dashboard.fetchData")||"",from_date:afwcDateFunctions.getDateTime(e.data.start_date,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(e.data.end_date,{dayEnd:!0}),filters:JSON.stringify(s),q:e.data.q,page:e.data.currentPage};f.requestHandler({requestData:l,callback:function(t){var r,a,i;e.extractData(t),"filter_update"===o&&new $e({id:(null==e||null===(r=e.data)||void 0===r?void 0:r.currentAffiliateID)||0,startDate:(null==e||null===(a=e.data)||void 0===a?void 0:a.start_date)||"",endDate:(null==e||null===(i=e.data)||void 0===i?void 0:i.end_date)||""}).reload((null==tt?void 0:tt.activeTab)||"")}}),l.cmd="dashboard_kpi_data",l.security=f.getAFWParams("security.dashboard.kpiData")||"",e.isKPILoading=!0,f.requestHandler({requestData:l,callback:function(t){return e.extractKPIData(t)}})}},{key:"extractKPIData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data.kpi=t.kpi||{},e.isKPILoading=!1}},{key:"extractData",value:function(t){var r;e.data.affiliates.length>0&&"load_more"==e.data.action?(e.data.affiliates=e.data.affiliates.concat(t.affiliateList),e.data.action=""):e.data.affiliates=t.affiliateList||[],e.data.currentAffiliateID>0&&(r=e.data.affiliates.filter(function(t){return t.affiliate_id==e.data.currentAffiliateID})[0]),void 0===r&&(e.data.currentAffiliateID=e.data.affiliates.length>0?e.data.affiliates[0].affiliate_id:0),g.showLoader=!1}},{key:"exportAffiliates",value:function(t){if(afwcDateFunctions.isValidDate([e.data.start_date,e.data.end_date],"-")){var r={cmd:"export_affiliates",security:f.getAFWParams("security.dashboard.exportAffiliates")||"",from_date:afwcDateFunctions.getDateTime(e.data.start_date,{dayStart:!0}),to_date:afwcDateFunctions.getDateTime(e.data.end_date,{dayEnd:!0}),filters:JSON.stringify(e.data.filters),q:e.data.q,action:"afwc_dashboard_controller",type:t},a=new URL(afwcDashboardParams.ajaxurl);for(var o in r)a.searchParams.append(o,r[o]);window.open(a.href)}}},{key:"migrateData",value:function(){e.migrateAffiliates({afterResponse:function(){window.location.href=f.getAFWParams("dashboardLink")||""}})}},{key:"migrateAffiliates",value:function(e){var t=e.afterConfirm,r=e.afterResponse;confirm(sprintf("%s\n%s\n\n%s",_x("After the import, the Affiliate users roles feature will no longer work.","Confirmation before importing affiliate data - line 1","affiliate-for-woocommerce"),_x("Users with the selected affiliate user role will lose their affiliate status, and youll need to manually reassign them as affiliates.","Confirmation before importing affiliate data - line 2","affiliate-for-woocommerce"),_x("Are you sure you want to continue?","Confirmation before importing affiliate data - line 3","affiliate-for-woocommerce")))&&("function"==typeof t&&t.call(),f.requestHandler({requestData:{cmd:"migrate_from_other_source",security:f.getAFWParams("security.dashboard.migrateData")||"",dashboard:"afwc_dashboard_controller"},callback:"function"==typeof r?r:null}))}}],(r=null)&&nt(t.prototype,r),a&&nt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ft(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function dt(e,t,r){return(t=yt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yt(a.key),a)}}function yt(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ct(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}var gt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"setFilters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.startDate=document.getElementById("start-date").value,this.endDate=document.getElementById("end-date").value,"reset"==e)return lt.data.filters={},lt.data.q="",document.getElementById("afwc-search-field").value="",void lt.fetch("filter_update");var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach(function(t){dt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},lt.data.filters);for(var a in r)Array.isArray(r[a])&&(r[a]=ut(r[a]));r[e]||(r[e]=[]),r[e].indexOf(t)>-1?(r[e]=r[e].filter(function(e){return e!==t}),r[e].length||delete r[e]):r[e].push(t),lt.data.filters=r,lt.data.firstcall&&lt.data.affiliates.length<=0&&"date_filter"!==e||(lt.data.firstcall=!1,lt.data.start_date=this.startDate,lt.data.end_date=this.endDate,lt.fetch("filter_update"))}},{key:"isFiltersActive",value:function(){var e,t;return!(null==lt||null===(e=lt.data)||void 0===e||!e.filters||!Object.keys(lt.data.filters).length)||!(null==lt||null===(t=lt.data)||void 0===t||!t.q)}},{key:"view",value:function(){var e=this,t=this.isFiltersActive(),r=f.getAFWParams("afwc_filters.commission_status")||{};return m("div",{id:"afwc-search-panel",style:"max-width:fit-content",class:"hidden absolute w-screen px-2 mt-1 transform -translate-x-1/2 afwc-left-7/12 sm:px-0 lg:max-w-xl"},m("div",{class:"rounded-lg shadow-lg"},m("div",{class:"overflow-hidden rounded-lg ring-1 ring-black ring-opacity-5"},m("div",{class:"relative z-20 p-5 bg-white"},m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Affiliate status","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},m("path",{d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("div",{class:"flex items-center text-xs font-medium text-yellow-800"},Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).length>0?Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).map(function(t,r){var a;return m("a",{class:"m-1 px-3 py-1 rounded-full cursor-pointer hover:bg-yellow-300 "+(null!=lt&&null!==(a=lt.data)&&void 0!==a&&null!==(a=a.filters)&&void 0!==a&&a.affiliate_status&&-1!=lt.data.filters.affiliate_status.indexOf(t)?"border-yellow-800 border-solid border bg-yellow-300":"bg-yellow-50"),"data-filter":t,onclick:function(t){t.preventDefault(),setTimeout(function(){document.getElementById("afwc-search-field").focus()},5e3),e.setFilters("affiliate_status",t.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.affiliate_status[t])}):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Commission status","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},m("path",{d:"M19 7h-3V6a3 3 0 0 0-3-3h-2a3 3 0 0 0-3 3v1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-9-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h-4zm-6 4a1 1 0 0 1 1-1h1a2 2 0 0 1-2 2zm1 9a1 1 0 0 1-1-1v-1a2 2 0 0 1 2 2zm15-1a1 1 0 0 1-1 1h-1a2 2 0 0 1 2-2zm0-3a4 4 0 0 0-4 4H8a4 4 0 0 0-4-4v-2a4 4 0 0 0 4-4h8a4 4 0 0 0 4 4zm0-4a2 2 0 0 1-2-2h1a1 1 0 0 1 1 1zm-8 0a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"}))),m("div",{class:"flex items-center text-xs font-medium text-emerald-900"},Object.keys(r).length>0?Object.keys(r).map(function(t,a){var o;return m("a",{class:"m-1 px-3 py-1 rounded-full cursor-pointer hover:bg-emerald-300 "+(null!=lt&&null!==(o=lt.data)&&void 0!==o&&null!==(o=o.filters)&&void 0!==o&&o.commission_status&&-1!==lt.data.filters.commission_status.indexOf(t)?"border-emerald-900 border-solid border bg-emerald-300":"bg-emerald-50"),"data-filter":t,onclick:function(t){t.preventDefault(),e.setFilters("commission_status",t.target.getAttribute("data-filter"))}},r[t])}):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center shrink-0 w-10 h-10 text-indigo-600 rounded-md",title:_x("Affiliate tags","searchbox icon title","affiliate-for-woocommerce")},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"}))),m("div",{class:"flex flex-wrap items-center text-xs font-medium text-blue-800"},Object.keys(afwcDashboardParams.afwc_filters.tags).length>0?Object.keys(afwcDashboardParams.afwc_filters.tags).map(function(t,r){var a;return m("a",{class:"m-1 px-3 py-1 rounded-full cursor-pointer hover:bg-blue-300 "+(null!=lt&&null!==(a=lt.data)&&void 0!==a&&null!==(a=a.filters)&&void 0!==a&&a.tags&&-1!=lt.data.filters.tags.indexOf(t)?"border-blue-800 border-solid border bg-blue-300":"bg-blue-50"),"data-filter":t,onclick:function(t){t.preventDefault(),e.setFilters("tags",t.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.tags[t])}):""))),m("div",{class:"py-5 pl-7 pr-4 bg-gray-50"},m("div",{class:"flex items-center space-x-3"},m("div",{class:"w-4/5"},m("p",{class:"text-sm font-medium text-gray-900"},__("Search & Filter","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},__("Click on a label to filter. Type in the search box to search.","affiliate-for-woocommerce"))),m("div",{class:(t?"cursor-pointer ":"cursor-not-allowed opacity-50 ")+"text-xs border border-gray rounded-md px-2 py-1"},m("a",{class:t?"":"pointer-events-none",onclick:function(t){t.preventDefault(),e.setFilters("reset","")}},_x("Reset Filters","Affiliates dashboard search box filter reset button text","affiliate-for-woocommerce"))))))))}}],t&&pt(e.prototype,t),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function ht(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bt(a.key),a)}}function bt(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=vt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vt(t)?t:t+""}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}return t=e,a=[{key:"initialize",value:function(){e.flags={showFeedback:0,processing:!1},e.data={screen:"initial",update_action:""}}},{key:"updateFeedback",value:function(){afwcDashboardParams.can_ask_for_feedback=0;var t=new FormData,r={security:f.getAFWParams("security.dashboard.updateFeedback")||"",update_action:e.data.update_action||""};for(var a in r)t.append(a,r[a]);m.request({method:"POST",url:f.getAFWParams("ajaxurl")||"",params:{action:"update_feedback"},body:t}).then(function(t){e.flags.processing=!1,"Success"!==(null==t?void 0:t.ACK)&&console.error(t)}).catch(function(t){e.flags.processing=!1,console.error(t)})}}],(r=null)&&ht(t.prototype,r),a&&ht(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function _t(e){return function(e){if(Array.isArray(e))return kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Pt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,St(a.key),a)}}function St(e){var t=function(e,t){if("object"!=xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=xt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xt(t)?t:t+""}wt.initialize();var jt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"positiveFeedback",value:function(){wt.data.screen="positive",wt.data.update_action="positive",wt.updateFeedback()}},{key:"negativeFeedback",value:function(){wt.data.screen="negative",wt.data.update_action="negative",wt.updateFeedback()}},{key:"closeFeedback",value:function(){wt.flags.showFeedback=0,wt.data.update_action="close",wt.updateFeedback()}},{key:"addReview",value:function(){wt.flags.processing||(wt.flags.processing=!0,wt.flags.showFeedback=0,wt.data.update_action="review",afwcDashboardParams.review_link&&window.open(afwcDashboardParams.review_link),wt.updateFeedback())}},{key:"contactSupport",value:function(){wt.flags.processing||(wt.flags.processing=!0,afwcDashboardParams.support_link&&window.open(afwcDashboardParams.support_link),this.closeFeedback())}},{key:"initialScreen",value:function(){var e=this;return m("[",null,m("div",null,m("div",{class:"mb-2 text-center text-lg font-medium text-white"},_x("Happy with the Affiliate plugin?","Question asking user opinion about plugin","affiliate-for-woocommerce")),m("p",{class:"text-justify text-base text-gray-200"},_x("Is our plugin doing what it promised - helping you expand your reach and boost your sales?","Asking how plugin is doing","affiliate-for-woocommerce"))),m("div",{class:"mt-4 flex gap-4"},m("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white transition duration-150 ease-in-out hover:bg-green-500 focus:outline-none focus:ring-2 focus:ring-offset-2",onclick:function(){e.positiveFeedback()}},m("svg",{class:"size-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})),m("span",null,_x("Yes, all good","Positive response button","affiliate-for-woocommerce"))),m("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-md border border-transparent bg-gray-600 px-3 py-2 text-sm font-medium text-white transition duration-150 ease-in-out hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2",onclick:function(){e.negativeFeedback()}},m("svg",{class:"size-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"})),m("span",null,_x("Could be better","Negative response button","affiliate-for-woocommerce")))))}},{key:"positiveResponseScreen",value:function(){var e=this;return m("[",null,m("div",null,m("div",{class:"mb-2 text-center text-lg font-medium text-white"}," ",_x("Thanks for the love!","Thank you message for positive feedback","affiliate-for-woocommerce")),m("p",{class:"text-justify text-base text-gray-200"},_x("Awesome! Mind leaving us a 5-star review? It really motivates us to keep improving and reach more store owners like you.","Request the user to leave a review","affiliate-for-woocommerce"))),m("div",{class:"mt-4"},m("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-md border border-transparent bg-white px-4 py-2 text-sm font-medium text-blue-700 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2",onclick:function(){e.addReview()},disabled:wt.flags.processing},m("span",{class:"inline-flex"},_t(Array(parseInt(5))).map(function(){return m("svg",{class:"size-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"0",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round",fill:"#f0c930","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"}))})),m("span",null,_x("Yes, I'll rate now!","Review response button","affiliate-for-woocommerce")))))}},{key:"negativeResponseScreen",value:function(){var e=this;return m("[",null,m("div",null,m("div",{class:"mb-2 text-center text-lg font-medium text-white"}," ",_x("We hear you - let's make it better!","Apology message for negative feedback","affiliate-for-woocommerce")),m("p",{class:"text-justify text-base text-gray-200"},_x("Thanks for your honesty. Let our support team assist you so you can get back to growing your store hassle-free.","Support offer message","affiliate-for-woocommerce"))),m("div",{class:"mt-4"},m("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-md border border-transparent bg-gray-600 px-3 py-2 text-sm font-medium text-white transition duration-150 ease-in-out hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2",onclick:function(){e.contactSupport()},disabled:wt.flags.processing},m("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})),m("span",null,_x("Contact support","Support contact button","affiliate-for-woocommerce")))))}},{key:"view",value:function(){var e=this;return m("div",{class:"pointer-events-none fixed inset-0 ml-40"+(0===wt.flags.showFeedback?" hidden":""),style:"z-index: 200000;"},m("div",{class:"fixed bottom-0 m-2 w-96 rounded-lg bg-transparent shadow-lg"+(wt.flags.processing?"":" pointer-events-auto")},m("div",{class:"overflow-hidden rounded-lg bg-gray-800 p-6"},"initial"===wt.data.screen&&this.initialScreen(),"positive"===wt.data.screen&&this.positiveResponseScreen(),"negative"===wt.data.screen&&this.negativeResponseScreen()),"initial"!==wt.data.screen&&m("button",{type:"button",class:"absolute right-0 top-0 m-1 inline-flex rounded-md p-1 opacity-50 transition duration-150 ease-in-out hover:bg-gray-700 hover:opacity-100 focus:outline-none",onclick:function(){e.closeFeedback()}},m("svg",{class:"size-4 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))}}])&&Pt(e.prototype,t),r&&Pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function Dt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ct(a.key),a)}}function Ct(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ot(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ot(t)?t:t+""}var At=function(){return e=function e(t){var r,a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showLoader=!1,this.progress=0,this.interval=0,this.isProcessRunning=parseInt(f.getAFWParams("is_process_running"))>0,this.type=(null==t||null===(r=t.attrs)||void 0===r?void 0:r.type)||"","recurring_setting_deprecated"===this.type){var o=f.getAFWParams("subscriptionNotice")||"";o&&"string"==typeof o&&(this.message=o,this.dismissEvent=this.dismissRecurringCommissionPlan)}else if("plan_updated"===this.type)"yes"===(f.getAFWParams("showPlanUpdateNotice")||"")&&(this.title=_x(" Big update","Title for the plan updated notice","affiliate-for-woocommerce"),this.messageList=[_x("We have improved commission calculations in certain cases. New referral orders may have updated commissions issued (the existing referrals remain unaffected).","Notice text for affiliate commission rule calculation update","affiliate-for-woocommerce"),_x("Please review your commission plans and place a test order to verify everything is working as expected.","Notice text for affiliate commission rule calculation update","affiliate-for-woocommerce")],this.actionText=_x("Review plans","Link to open plan dashboard","affiliate-for-woocommerce"),this.event=function(){return m.route.set("/plans")},this.dismissEvent=this.dismissPlanUpdate);else if("masspay_deprecated"===this.type)f.getAFWParams("show_masspay_deprecated_notice")&&(this.messageList=[m("[",null,_x("[PayPal Payouts] PayPal have deprecated MassPay API and it will be removed soon. So we recommend you switch to a new Payout API for smoother commission payouts.","PayPal Payout migration notice","affiliate-for-woocommerce")),m("[",null,_x("Refer to","refer to the provided doc","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-payout-commissions-in-affiliate-for-woocommerce/"},_x("this doc","link text for the doc","affiliate-for-woocommerce")),_x("for more details.","text for more details regarding PayPal API migration","affiliate-for-woocommerce")),m("[",null,_x("If you have already switched to the new PayPal Payout API, run migration.","ask to check whether switched to the PayPal Payout API","affiliate-for-woocommerce"))],this.actionText=_x("Run migration","Link text for PayPal Payout migration","affiliate-for-woocommerce"),this.event=this.checkPayoutMethod);else if("database_migration"===this.type)!0===this.isProcessRunning?(this.message=__("Migration process is running:","affiliate-for-woocommerce"),this.startProgressTracking()):(this.message=this.message?this.message:__("[Important] Affiliate for WooCommerce requires a database migration.","affiliate-for-woocommerce"),this.actionText=__("Run migration","affiliate-for-woocommerce"),this.event=this.runMigration);else if("affiliate_data_migration"===this.type){var i;(f.getAFWParams("showMigrateNotice")||!0===this.isProcessRunning)&&(!0===this.isProcessRunning?(this.message=_x("Affiliate data import is in progress...","Affiliate import running text in notice","affiliate-for-woocommerce"),this.checkMigrationStatus()):(this.message=sprintf(_x("Import affiliates with their referral link data from %s.","Import data message","affiliate-for-woocommerce"),null===(i=Object.values(f.getAFWParams("migrateSourcePlugins")||{}))||void 0===i?void 0:i.join(", ")),this.actionText=_x("Start import","Affiliate data import button","affiliate-for-woocommerce"),this.event=this.importAffiliateData,this.dismissEvent=function(){return a.dismissNotice("affiliate_migration_data")}))}else"admin_summary_email"===this.type&&"yes"===(f.getAFWParams("adminSummaryEmailAnnouncement")||"")&&(this.title=_x(" Big update","Notice title to announce admin summary report","affiliate-for-woocommerce"),this.messageList=[_x("A monthly affiliate program summary email will now be sent to the Affiliate Manager and Store Admin.","Notice text for explaining admin summary email feature","affiliate-for-woocommerce")],f.getAFWParams("isHPOSEnabled")?f.getAFWParams("isAdminSummaryEmailEnabled")?(this.messageList.push(_x("This email is automatically enabled for you based on your store settings.","Notice text stating admin summary email is auto-enabled","affiliate-for-woocommerce")),this.actionText=_x("Review email","Button text to view admin summary email settings","affiliate-for-woocommerce")):(this.title=!1,this.messageList=!1):(this.messageList.push(_x("This email is disabled for you as your store settings do not meet the requirements.","Notice text for stating admin summary email is disabled","affiliate-for-woocommerce")),this.actionText=_x("Review email requirements","Button text to check requirements for enabling admin summary email","affiliate-for-woocommerce")),this.event=function(){return window.open(f.getAFWParams("adminSummaryEmailSettingLink"))},this.dismissEvent=function(){return a.dismissNotice("afwc_admin_summary_email_feature")})},t=[{key:"dismissRecurringCommissionPlan",value:function(){var e=this;m.request({method:"POST",url:f.getAFWParams("ajaxurl")||"",params:{action:"afwc_dismiss_recurring_setting_deprecated_notice",security:f.getAFWParams("security.commissions.dismissRecurringSettingDeprecatedNotice")||""},responseType:"json"}).then(function(){return e.hideNotice()})}},{key:"dismissPlanUpdate",value:function(){var e=this;m.request({method:"POST",url:f.getAFWParams("ajaxurl")||"",params:{action:"afwc_dismiss_plan_update_notice",security:f.getAFWParams("security.dashboard.dismissPlanUpdateNotice")||""},responseType:"json"}).then(function(){return e.hideNotice()})}},{key:"dismissNotice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";f.requestHandler({requestData:{cmd:"dismiss_notice",security:f.getAFWParams("security.dashboard.dismissNotice")||"",dashboard:"afwc_dashboard_controller",notice_id:t},callback:function(){return e.hideNotice()}})}},{key:"checkPayoutMethod",value:function(){var e=this;m.request({method:"POST",url:f.getAFWParams("ajaxurl")||"",params:{action:"afwc_update_payout_method",security:f.getAFWParams("security.dashboard.updatePayoutMethod")||""},responseType:"json"}).then(function(){return e.hideNotice()})}},{key:"runMigration",value:function(e){var t=this;this.isProcessRunning?e.preventDefault():(this.progress=0,this.isProcessRunning=!0,this.message=__("Migration process is running:","affiliate-for-woocommerce"),m.request({method:"POST",url:ajaxurl,params:{action:"afwc_run_migration"},withCredentials:!1,responseType:"json"}).then(function(e){t.startProgressTracking()}))}},{key:"startProgressTracking",value:function(){var e=this;this.interval=setInterval(function(){return"All"!==e.progress&&e.checkProgress()},1e4)}},{key:"checkProgress",value:function(){var e=this;m.request({method:"POST",url:ajaxurl,params:{action:"afwc_check_migration_process"},responseType:"json"}).then(function(t){e.progress=t.afwc_order_migration_status||0,"All"===e.progress&&(e.message=__("Migration done successfully.","affiliate-for-woocommerce"),setTimeout(function(){e.hideNotice(),m.redraw()},5e3))})}},{key:"importAffiliateData",value:function(){var e=this;lt.migrateAffiliates({afterConfirm:function(){e.isProcessRunning=!0,e.message=_x("Affiliate data import is in progress...","Affiliate import running text in notice","affiliate-for-woocommerce")},afterResponse:function(){return e.checkMigrationStatus()}})}},{key:"checkMigrationStatus",value:function(){var e=this;f.requestHandler({requestData:{cmd:"affiliate_migration_status",security:f.getAFWParams("security.dashboard.migrateDataStatus")||"",dashboard:"afwc_dashboard_controller"},callback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"Success"===t.ACK&&"completed"===t.status?(e.message=_x("Migration completed successfully.","Notice text on migration status","affiliate-for-woocommerce"),setTimeout(function(){e.hideNotice(),m.redraw(),location.reload()},5e3)):setTimeout(function(){e.checkMigrationStatus(),m.redraw()},1e4)}})}},{key:"hideNotice",value:function(){this.title=!1,this.message=!1,this.messageList=!1}},{key:"view",value:function(){var e=this;return this.title||this.message||this.messageList?m("div",{class:"px-6 py-4 m-5 w-auto flex justify-between gap-16 border-l-4 border-blue-700 bg-white"},m("div",null,this.title?m("p",{class:"text-base font-medium text-gray-600 pb-4"},this.title):"",this.message?m("p",{class:"text-sm font-medium text-gray-600"},this.message):"",this.messageList?this.messageList.map(function(e){return m("p",{class:"text-sm font-medium text-gray-600"},e)}):"",this.actionText&&this.event?m("[",null,m("button",{type:"button",class:(this.isProcessRunning?"hidden ":"")+"py-2 px-5 mt-4 justify-center text-sm font-medium leading-5 text-white bg-indigo-600 border border-transparent rounded-md transition duration-150 ease-in-out hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-200 focus-visible:outline-none",onclick:function(t){return e.event.call(e)}},this.actionText),"affiliate_data_migration"!==this.type&&m("p",{id:"afwc-progress",class:(this.isProcessRunning?"":"hidden ")+"px-0 pt-1 pb-2 mt-4 text-sm font-medium text-gray-600"},this.progress?this.progress.toString()+" "+__("tasks completed.","affiliate-for-woocommerce"):__("tasks starting","affiliate-for-woocommerce"))):""),this.dismissEvent?m("div",null,m("a",{class:"cursor-pointer text-sm font-medium leading-6 text-gray-400 hover:text-gray-600",onclick:function(){return e.dismissEvent.call(e)}},this.dismissText?this.dismissText:m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})))):""):""}}],t&&Dt(e.prototype,t),r&&Dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,i,n,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=i.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Et(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ft(a.key),a)}}function Ft(e){var t=function(e,t){if("object"!=Tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Tt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tt(t)?t:t+""}var Mt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeout=null},t=[{key:"refreshRoute",value:function(){var e,t;if(!afwcDateFunctions.isValidDate([lt.data.start_date,lt.data.end_date],"-"))return lt.invalidDate=!0;lt.invalidDate=!1;var r=(null===(e=m)||void 0===e||null===(e=e.route)||void 0===e||null===(t=e.get)||void 0===t?void 0:t.call(e))||"",a=f.buildRouteFilterValue(r,{"from-date":lt.data.start_date,"to-date":lt.data.end_date});r!==a&&(m.route.set(a),g.showLoader=!0,lt.isKPILoading=!0)}},{key:"setSearchTerm",value:function(e){clearTimeout(this.timeout),lt.data.start_date=document.getElementById("start-date").value,lt.data.end_date=document.getElementById("end-date").value,lt.data.q=e,""===e&&lt.fetch(),e.length<3||lt.data.firstcall&&lt.data.affiliates.length<=0||(g.showLoader=!0,lt.data.firstcall=!1,this.timeout=setTimeout(function(){lt.fetch()},4e3))}},{key:"smartDatesHandler",value:function(e){this.smartDatesDisplayHandler();var t=afwcDateFunctions.getDate(e);lt.data.start_date=t.startDate||lt.data.start_date,lt.data.end_date=t.endDate||lt.data.end_date,this.refreshRoute()}},{key:"smartDatesDisplayHandler",value:function(e){this.class="hidden",this.dropdownId="afwc-smart-dates-dropdown-list",document.getElementById(this.dropdownId).classList.contains(this.class)?!e&&document.getElementById(this.dropdownId).classList.remove(this.class):document.getElementById(this.dropdownId).classList.add(this.class)}},{key:"defaultDatePickerHandler",value:function(e){try{e.target.showPicker()}catch(e){console.warn("Cannot trigger date picker")}}},{key:"getDateFilters",value:function(){return[{today:_x("Today","smart dates option for today","affiliate-for-woocommerce"),yesterday:_x("Yesterday","smart dates option for yesterday","affiliate-for-woocommerce")},{this_week:_x("This Week","smart dates option for this week","affiliate-for-woocommerce"),last_week:_x("Last Week","smart dates option for last week","affiliate-for-woocommerce"),last_4_weeks:_x("Last 4 Weeks","smart dates option for last 4 weeks","affiliate-for-woocommerce")},{this_month:_x("This Month","smart dates option for this month","affiliate-for-woocommerce"),last_month:_x("Last Month","smart dates option for last month","affiliate-for-woocommerce"),"3_months":_x("3 Months","smart dates option for 3 months","affiliate-for-woocommerce"),"6_months":_x("6 Months","smart dates option for 6 months","affiliate-for-woocommerce")},{this_year:_x("This Year","smart dates option for this year","affiliate-for-woocommerce"),last_year:_x("Last Year","smart dates option for last year","affiliate-for-woocommerce")}]}},{key:"view",value:function(e){var t=this,r=this.getDateFilters()||[];return m("[",null,m("div",{class:"bg-gray-800"},m("nav",{class:"mx-auto px-4 xl:px-8 py-2 lg:py-2"},m("div",{class:"flex flex-col lg:items-center lg:flex-row lg:justify-between"},m("div",{class:"flex items-center"},m("div",{class:"shrink-0"},m("h2",{class:"text-2xl font-bold leading-7 text-gray-100 sm:text-3xl sm:leading-9"},__("Affiliates","affiliate-for-woocommerce"))),m("div",{class:""},m("div",{class:"ml-10 lg:ml-6 xl:ml-10 flex gap-2 items-baseline"},m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700"+(m.route.get().startsWith("/dashboard")?" bg-gray-900":""),onclick:function(e){e.preventDefault(),lt.reset(),m.route.set("/")}},_x("Dashboard","Navigation menu title for main dashboard in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700"+("/campaigns"===m.route.get()?" bg-gray-900":""),onclick:function(e){e.preventDefault(),L.destroyCampaignDetails(),m.route.set("/campaigns")}},_x("Campaigns","Navigation menu title for campaigns in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700"+("/plans"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/plans"),e.preventDefault()}},_x("Plans","Navigation menu title for plans in admin dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700"+("/pending-payouts"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/pending-payouts"),e.preventDefault()}},_x("Pending Payouts","Navigation menu title for Payouts in admin dashboard","affiliate-for-woocommerce"))))),m("div",{class:"flex items-center text-right mt-2 lg:mt-0"},"/campaigns"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:ring focus-visible:outline-none",onclick:function(){L.newCampaign()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Campaign","affiliate-for-woocommerce"))))):"","/plans"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("a",{href:afwcDashboardParams.support_link,target:"_blank",title:_x("Click to log in and share your requirements. We'll help set things up","context behind contact links on plans dashboard","affiliate-for-woocommerce"),class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-emerald-600 border border-transparent rounded-md hover:bg-emerald-500 focus:outline-none focus:ring focus-visible:outline-none"},m("svg",{class:"w-4 h-5 mr-1",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})),_x("Need help? Let us handle the setup","contactsupport link to offer help on setting up commission plans","affiliate-for-woocommerce")))),m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:ring focus-visible:outline-none",onclick:function(){U.newCommission()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Plan","affiliate-for-woocommerce"))))):"",m.route.get().startsWith("/dashboard")?m("div",{class:"flex items-center px-1 text-sm text-gray-400 lg:mx-2 xl:mx-2"},m("div",{class:"flex lg:ml-0 lg:mx-2 xl:mx-3 rounded-md"},m("div",{class:"relative w-full"},m("div",{class:"absolute inset-y-0 left-0 flex items-center pointer-events-none"},m("svg",{class:"w-5 h-5 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"}))),m("input",{onfocusin:function(){document.getElementById("afwc-search-panel").classList.remove("hidden")},oninput:function(e){t.setSearchTerm(e.target.value)},id:"afwc-search-field",class:"form-input pl-7 py-2 text-xs bg-gray-900 border-transparent border-2 placeholder:text-current focus:bg-white focus:border-gray-200",placeholder:_x("Search & Filter","placeholder for search & filter","affiliate-for-woocommerce")}))),m("div",{class:"afwc-date-filter flex items-center bg-white text-gray-700 text-sm lg:mx-2 xl:mx-3 border-2 rounded-md"+(lt.invalidDate?" border-red-400":" border-gray-400")},m("div",{class:"flex items-center"},m("div",null,m("input",{id:"start-date",type:"date",min:"2000-01-01",max:"9999-12-31",value:lt.data.start_date,class:"form-input w-20 pt-2 pb-1 pl-2 pr-0 cursor-pointer text-xs bg-transparent border-none outline-none ring-0 sm:leading-4 focus:ring-0",placeholder:_x("start date","placeholder","affiliate-for-woocommerce"),onchange:function(e){lt.data.start_date=e.target.value||"",t.refreshRoute()},onfocusin:function(e){t.defaultDatePickerHandler(e),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"px-1 sm:leading-5 pointer-events-none text-gray-400"},__("to","affiliate-for-woocommerce")),m("div",null,m("input",{id:"end-date",type:"date",min:"2000-01-01",max:"9999-12-31",value:lt.data.end_date,class:"form-input w-20 pt-2 pb-1 pl-1 pr-0 cursor-pointer text-xs bg-transparent border-none outline-none ring-0 sm:leading-4 focus:ring-0",placeholder:_x("end date","placeholder","affiliate-for-woocommerce"),onchange:function(e){lt.data.end_date=e.target.value||"",t.refreshRoute()},onfocusin:function(e){t.defaultDatePickerHandler(e),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"border-l border-gray-300"},m("svg",{id:"afwc-smart-dates-dropdown-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 px-1 text-gray-500 cursor-pointer focus:outline-none",onclick:function(){t.smartDatesDisplayHandler()}},m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})),m("ul",{id:"afwc-smart-dates-dropdown-list",class:"afwSmartDatesDropdown absolute text-left bg-white border border-gray-200 rounded-lg shadow-lg py-2 mt-1 cursor-pointer hidden"},Array.isArray(r)&&r.map(function(e,a){return m("div",{key:a},Object.entries(e).map(function(e,r){var a=Lt(e,2),o=a[0],i=a[1];return m("li",{onclick:function(){return t.smartDatesHandler(o)},key:r},m("span",null,i))}),a<r.length-1&&m("li",{class:"separator my-2 h-px bg-gray-200"}))})))))):"",m("div",{class:"flex items-center ml-4 lg:ml-2"},m("a",{href:afwcDashboardParams.docLink||afwcDashboardParams.afwDocLink,target:"_blank",title:_x("Docs","Title for doc link","affiliate-for-woocommerce"),class:"p-1 ml-3 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),m("a",{href:afwcDashboardParams.afwManageTagsLink,target:"_blank",title:_x("Manage affiliate tags","Title for manage affiliate tag page link","affiliate-for-woocommerce"),class:"p-1 ml-3 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"}))),m("a",{href:afwcDashboardParams.settingsLink,target:"_blank",title:__("Settings","affiliate-for-woocommerce"),class:"ml-3 p-1 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))))))),m(gt,null),g.showLoader?m(g,null):null,m(jt,null)),(afwcDashboardParams.show_admin_notice||afwcDashboardParams.show_admin_notice_for_dates)&&afwcDashboardParams.is_action_scheduler_exists?m(At,{type:"database_migration"}):null)}}],t&&Et(e.prototype,t),r&&Et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Rt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zt(a.key),a)}}function zt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Nt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nt(t)?t:t+""}var Wt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"showNumberPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded h-8 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded h-4 w-16"})}},{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-top"},m("div",{class:"font-bold leading-tight text-gray-900"},m("p",{class:"text-5xl leading-none font-bold text-indigo-700 flex items-center "},lt.isKPILoading?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-2xl font-normal mr-1"},afwcDashboardParams.currencySymbol||"")," ",lt.data.kpi.net_affiliates_sales||0," ",m("span",{class:"text-2xl font-medium ml-1"}))),m("p",{class:"mt-1 leading-tight font-medium text-gray-500"},lt.isKPILoading?this.showTextPlaceholder():sprintf(_x("%1$s%% of Total Revenue","Affiliates KPI label: Total Revenue","affiliate-for-woocommerce"),lt.data.kpi.percent_of_total_sales||0)))),m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},lt.isKPILoading?this.showNumberPlaceholder():lt.data.kpi.affiliates_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},lt.isKPILoading?this.showTextPlaceholder():_x("Affiliates","Affiliates KPI label: Number of affiliate","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},lt.isKPILoading?this.showNumberPlaceholder():lt.data.kpi.visitors_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},lt.isKPILoading?this.showTextPlaceholder():_x("Visitors","Affiliates KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},lt.isKPILoading?this.showNumberPlaceholder():lt.data.kpi.all_customers_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},lt.isKPILoading?this.showTextPlaceholder():_x("Customers","Affiliates KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},lt.isKPILoading?this.showNumberPlaceholder():"".concat(lt.data.kpi.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},lt.isKPILoading?this.showTextPlaceholder():_x("Conversion Rate","Affiliates KPI label: Conversion Rate","affiliate-for-woocommerce")))))))}}])&&Rt(e.prototype,t),r&&Rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function qt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ht(a.key),a)}}function Ht(e){var t=function(e,t){if("object"!=Bt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Bt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bt(t)?t:t+""}var Gt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(){return m("div",{class:"my-3 mx-3 py-2 rounded-md"},m("div",{class:"flex items-center"},m("div",{class:"shrink-0 flex items-center justify-center h-6 w-6 rounded-full bg-teal-50 text-teal-500"},m("svg",{class:"h-4 w-4",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("h3",{class:"ml-1 text-base leading-6 font-medium text-teal-500"},__("Pending Payouts","affiliate-for-woocommerce"))),m("div",{class:"mt-2"},m("p",{class:"text-sm leading-5 text-gray-400"},lt.data.kpi.unpaid_affiliates," ",1===parseInt(lt.data.kpi.unpaid_affiliates)?__("affiliate","affiliate-for-woocommerce"):__("affiliates","affiliate-for-woocommerce")," ",__("needs to be paid total commission of","affiliate-for-woocommerce")," ",afwcDashboardParams.currencySymbol,lt.data.kpi.unpaid_commissions,".")))}}])&&qt(e.prototype,t),r&&qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Kt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ut(a.key),a)}}function Ut(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Vt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vt(t)?t:t+""}var Jt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"loadAffiliates",value:function(){lt.data.currentPage=parseInt(lt.data.currentPage)+1,lt.data.action="load_more",lt.fetch()}},{key:"view",value:function(){var e=this;return m("nav",{class:"py-3 text-gray-500 max-h-screen overflow-auto"},m("ul",null,lt.data.affiliates.map(function(e,t){return m("li",{class:(0===t?"rounded-tl-lg ":lt.data.affiliates.length-1===t?"rounded-bl-lg ":"")+"border-b border-gray-200"+(e.pending?" bg-red-100":" bg-gray-50")+" overflow-hidden",onclick:function(){lt.data.currentAffiliateID=e.affiliate_id}},m("a",{class:"block py-3 focus:outline-none transition duration-150 ease-in-out cursor-pointer"+(e.pending?" hover:bg-red-50 focus:bg-red-50":" hover:bg-white focus:bg-white")+(lt.data.currentAffiliateID==e.affiliate_id?e.pending?" bg-red-50 outline-none":" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:(lt.data.currentAffiliateID===e.affiliate_id?"text-gray-700 ":"")+"font-medium pr-4 flex-1 sm:truncate"},e.name),m("div",{class:"text-gray-500 text-sm leading-none numeric"},afwcDashboardParams.currencySymbol,e.earned_commissions),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))})),lt.data.loadMore&&lt.data.affiliates.length>0&&lt.data.affiliates.length%afwcDashboardParams.affiliate_list_limit==0?m("div",{class:"my-3"},m("div",{class:"pb-2 text-center border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadAffiliates()}},__("Load More","affiliate-for-woocommerce")))):"")}}])&&Kt(e.prototype,t),r&&Kt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Qt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$t(a.key),a)}}function $t(e){var t=function(e,t){if("object"!=Yt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Yt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yt(t)?t:t+""}var Zt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.isOrdersTab=!$e.details.pending,this.tabCss="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-400 leading-5 focus:outline-none focus:text-indigo-800 focus:shadow-none focus:border-indigo-700"}return t=e,a=[{key:"isOrdersTab",get:function(){return e._isOrdersTab},set:function(t){e._isOrdersTab=t}}],(r=[{key:"view",value:function(){return m("header",{class:"flex justify-between border-b border-gray-200 -mx-6 px-6"},m("div",{class:"shrink-0 p-1 border-2 border-transparent self-center mb-2"},$e.details.avatarURL?m("img",{class:"rounded-full",src:$e.details.avatarURL,alt:_x("Affiliate profile image","affiliate profile image","affiliate-for-woocommerce"),height:"60",width:"60"}):""),m("div",{class:"flex-1 ml-3 mb-2"},m("div",{class:"flex items-center gap-4"},m("h3",{class:"text-l block font-bold leading-6 text-gray-900 sm:py-2 sm:text-3xl sm:leading-6 sm:truncate"},$e.details.name),m("span",{class:$e.details.pending?"invisible ":"visible hidden xl:inline-flex px-2 text-xs leading-5 font-semibold rounded-full bg-teal-100 text-teal-500"},_x("Net Unpaid Commission","Admin - KPI label for affiliate's net unpaid commission","affiliate-for-woocommerce"),": ",afwcDashboardParams.currencySymbol,$e.details.stats.current.unpaid_commissions||"0.00")),$e.details.signupDate?m("div",{class:"flex items-center pt-1 text-gray-600 text-xs gap-1"},m("span",null,_x("Since:","Admin - signup date label","affiliate-for-woocommerce")),m("span",null,$e.details.signupDate)):"",$e.details.referralURL?m("div",{class:"flex items-center py-1 text-gray-600 text-xs gap-1"},m("span",null,_x("Referral Link:","Admin - Referral link label","affiliate-for-woocommerce")),m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){Ie.doCopy($e.details.referralURL||"")},class:"cursor-pointer"},m("code",null,$e.details.referralURL))):""),m("div",{class:"flex items-center gap-3 mb-2"},m("a",{href:"mailto:"+$e.details.email,target:"_blank",title:"Email Affiliate",class:"p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))),m("a",{href:$e.details.editURL,target:"_blank",title:"Manage Affiliate",class:"p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))))}}])&&Qt(t.prototype,r),a&&Qt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function er(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tr(a.key),a)}}function tr(e){var t=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Xt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xt(t)?t:t+""}Zt.isOrdersTab=!0;var rr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()},(t=[{key:"initialize",value:function(){this.revenue=$e.details.stats.current.net_affiliates_sales||"0.00",this.commission=String($e.details.stats.current.earned_commissions||"0.00"),this.gross_commission=String($e.details.stats.current.gross_commissions||"0.00")}},{key:"showNumberPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded h-4 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded h-4 w-16"})}},{key:"view",value:function(){return this.initialize(),m("section",{class:"flex flex-col lg:flex-row lg:items-center lg:justify-between text-sm my-6 text-gray-800"},m("div",{class:"flex items-center justify-between"},m("div",{class:"mr-3"},m("p",{class:"text-2xl leading-none font-medium"},$e.isLoading("KPI")?this.showNumberPlaceholder():$e.details.stats.current.visitors_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Visitors","Affiliate KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},$e.isLoading("KPI")?this.showNumberPlaceholder():$e.details.stats.current.customers_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Customers","Affiliate KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},$e.isLoading("KPI")?this.showNumberPlaceholder():"".concat($e.details.stats.current.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Conversion","Affiliate KPI label: Conversion","affiliate-for-woocommerce")))),m("div",{class:"flex items-center justify-between mt-6 lg:mt-0"},m("div",{class:"flex sm:items-center"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},$e.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.revenue.split(".")[0]," ",m("span",{class:"text-sm"},".",this.revenue.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Revenue","Affiliate KPI label: Revenue","affiliate-for-woocommerce")))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},$e.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.gross_commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.gross_commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Gross Commission","Affiliate KPI label: Gross Commission","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},$e.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},$e.isLoading("KPI")?this.showTextPlaceholder():_x("Net Commission","Affiliate KPI label: Net Commission","affiliate-for-woocommerce")))))}}])&&er(e.prototype,t),r&&er(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function or(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ir(a.key),a)}}function ir(e){var t=function(e,t){if("object"!=ar(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ar(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ar(t)?t:t+""}var nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}return t=e,r=[{key:"printCommissionStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=f.getAFWParams("commissionStatuses")||{};return e in t?t[e]:""}},{key:"view",value:function(){var t=this;return $e.details.referrals&&$e.details.referrals.length>0?m("table",{class:"min-w-full","aria-label":_x("Referral details","Referral table name","affiliate-for-woocommerce")},m("thead",null,m("tr",null,m("th",{class:"pl-6 pr-0 py-3 border-b border-gray-200 bg-gray-50 w-6 flex-0"},m("input",{id:"select[0]",checked:e.selectedRecords.selectAll,type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection($e.details.referrals,t.target.checked)}})),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Date","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Order","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Commission","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"hidden xl:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Customer","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Campaign","Column header for referral table","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Medium","Column header for referral table","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},$e.details.referrals.map(function(r){return m("tr",null,m("td",{class:"pl-6 pr-0 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-800 w-6 flex-0"},m("input",{id:"select[".concat(r.referral_id||"","]"),checked:e.selectedRecords.ids.hasOwnProperty(r.referral_id),type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection(r,t.target.checked)}})),m("td",{class:"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:r.datetime},r.datetime)),m("td",{class:"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-800"},m("div",{class:"flex items-center"},m("a",{href:r.order_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},"#",r.order_id),m("span",{class:"ml-3 text-gray-600"},r.order_status),m("span",{class:"hidden xl:inline-block ml-3"},r.currency,f.formatNumber(r.order_total)))),m("td",{class:"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("div",{class:"flex items-center content-center"},m("span",{class:("rejected"===r.status?"line-through ":"")+"font-medium"},r.currency,f.formatNumber(r.commission)),m("span",{class:("rejected"===r.status?"text-red-400":"unpaid"===r.status?"text-teal-400":"text-gray-400")+" ml-3"},t.printCommissionStatus(r.status)),r.days_remaining_for_refund>0?m("span",{title:sprintf(_x("Refund period: Payout ready after %d days","title text for refund period remaining for referral","affiliate-for-woocommerce"),r.days_remaining_for_refund),class:"cursor-pointer text-red-400 ml-2"},m("svg",{class:"h-2 w-2",viewBox:"0 0 6 6",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},m("circle",{cx:"3",cy:"3",r:"3"}))):"")),m("td",{class:"hidden xl:table-cell px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500 truncate"},r.customer_orders_url?m("a",{href:r.customer_orders_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},r.billing_name):m("span",null,r.billing_name)),m("td",{class:"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-400 text-center"},parseInt(r.campaign_id||0)?r.campaign_title?m("a",{href:f.getAFWParams("dashboardLink")+"#!/campaigns/".concat(r.campaign_id),class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric",title:r.campaign_title,target:"_blank"},"#",r.campaign_id):m("span",{title:_x("Deleted","Deleted campaign ID in referral table","affiliate-for-woocommerce")},"#".concat(r.campaign_id)):"-"),m("td",{class:"px-6 py-4 whitespace-nowrap border-b border-gray-200 text-xs uppercase leading-5 text-gray-500 text-right"},r.referral_type))}))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Referrals are unavailable for this date range or filter. Adjust either dates or filter then retry.","empty referral message","affiliate-for-woocommerce"))}}],a=[{key:"initialize",value:function(){e.selectedRecords={ids:{},commission:0,unpaidCommission:0,selectAll:!1,payoutCurrencySymbol:"",payoutCurrencyCode:"",IsMultiCurrencyDetected:!1}}},{key:"selectedRecords",get:function(){return e._selectedRecords},set:function(t){e._selectedRecords=t}},{key:"isMultiCurrencySelected",value:function(){var t="";return!!e.selectedRecords.ids&&Boolean(Object.keys(e.selectedRecords.ids).find(function(r){var a=e.selectedRecords.ids[r].currency||"";return(t=t||a)!==a}))}},{key:"handleRowSelection",value:function(t,r){t=Array.isArray(t)?t:[t],e.selectedRecords.selectAll=!!(t.length>1&&r),t.map(function(t){e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&!r?delete e.selectedRecords.ids[t.referral_id]:!1===e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&r&&(e.selectedRecords.ids[t.referral_id]={commission:Number(parseFloat(t.commission).toFixed(2)),orderId:t.order_id||0,pendingPayout:"unpaid"===t.status,date:t.datetime,status:t.status,currency:t.currency||"",currencyCode:t.currencyCode||""})}),e.calculateCommissions()}},{key:"calculateCommissions",value:function(){var t=0,r=0;Object.keys(e.selectedRecords.ids).map(function(a){var o=e.selectedRecords.ids[a],i=o.commission,n=o.status;i&&(t="rejected"!==n?Number(parseFloat(t+i).toFixed(2)):t,r="unpaid"===n?Number(parseFloat(r+i).toFixed(2)):r)}),e.selectedRecords.commission=parseFloat(t).toFixed(2),e.selectedRecords.unpaidCommission=parseFloat(r).toFixed(2),Object.keys(e.selectedRecords.ids).length>0&&(e.selectedRecords.payoutCurrencySymbol=Object.values(e.selectedRecords.ids)[0].currency||"",e.selectedRecords.payoutCurrencyCode=Object.values(e.selectedRecords.ids)[0].currencyCode||""),e.selectedRecords.IsMultiCurrencyDetected=e.isMultiCurrencySelected()}}],r&&or(t.prototype,r),a&&or(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function lr(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return cr(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(cr(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,cr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,cr(f,"constructor",c),cr(c,"constructor",l),l.displayName="GeneratorFunction",cr(c,o,"GeneratorFunction"),cr(f),cr(f,o,"Generator"),cr(f,a,function(){return this}),cr(f,"toString",function(){return"[object Generator]"}),(lr=function(){return{w:i,m}})()}function cr(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}cr=function(e,t,r,a){function i(t,r){cr(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},cr(e,t,r,a)}function ur(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function fr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mr(a.key),a)}}function mr(e){var t=function(e,t){if("object"!=sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=sr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sr(t)?t:t+""}nr.initialize();var dr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initializeFlags(),this.initialize(t.attrs)}return t=e,r=[{key:"initialize",value:function(e){this.commission=e.commission||"0.00",this.name=e.name||"",this.defaultDate=(new Date).toISOString().slice(0,10),this.recordDate=this.defaultDate}},{key:"onupdate",value:function(e){this.initialize(e.attrs)}},{key:"getPayoutMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paypal:{title:_x("PayPal: Pay & Record","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Automatically pay via PayPal and record payout.","Payout method description for method - PayPal pay & record","affiliate-for-woocommerce"),disabled:!$e.details.isPaypalEmail,date:!1},"paypal-manual":{title:_x("PayPal: Record Only","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via PayPal. This method does not send money.","Payout method description for method - PayPal: record only","affiliate-for-woocommerce"),date:!0},other:{title:_x("Other","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via any method. This method does not send money.","Payout method description for method - other","affiliate-for-woocommerce"),date:!0},stripe:{title:_x("Stripe: Pay & Record","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Pay via Stripe and record payout.","Payout method description for method - Stripe: pay & record","affiliate-for-woocommerce"),disabled:!$e.details.isStripeAccount,date:!1},"coupon-fixed-cart":{title:_x("Coupon: Fixed Cart","Admin - Payout method title","affiliate-for-woocommerce"),desc:!$e.details.isStoreCreditPayout&&$e.details.isfixedCouponPayout?m("[",null,m("p",null,_x("Issue a coupon and record payout.","Payout method description for method - Coupon: Fixed Cart","affiliate-for-woocommerce")),m("p",{class:"mt-3"},_x("Use ","Payout method description for method - Coupon: Fixed Cart to use Smart Coupons > Store Credit instead","affiliate-for-woocomerce"),m("a",{target:"_blank",href:"https://wordpress.org/plugins/affiliate-store-credit-payouts-integration-for-woocommerce/",class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline"},_x("Affiliate Store Credit Payouts","Payout method description for method - Coupon: Fixed Cart to use Smart Coupons > Store Credit instead","affiliate-for-woocommerce")),_x(" to offer payout as a Store Credit instead of a Fixed cart coupon.","Payout method description for method - Coupon: Fixed Cart to use Smart Coupons > Store Credit instead","affiliate-for-woocommerce"))):_x("Issue a coupon and record payout.","Payout method description for method - Coupon: Fixed Cart","affiliate-for-woocommerce"),disabled:!$e.details.isfixedCouponPayout,date:!1},"wsc-store-credit":{title:_x("Coupon: Store Credit","Admin - Payout method title","affiliate-for-woocommerce"),desc:_x("Issue a store credit coupon and record payout.","Payout method description for method - Coupon: Store Credit","affiliate-for-woocommerce"),disabled:!$e.details.isStoreCreditPayout,date:!1}};return"string"==typeof e&&e.length>0?e in t&&t[e]||"":t}},{key:"processPayout",value:(o=lr().m(function t(r){var a,o,i;return lr().w(function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),a=[],o=[],Object.keys(nr.selectedRecords.ids).map(function(e){nr.selectedRecords.ids[e]&&nr.selectedRecords.ids[e].pendingPayout&&(parseFloat(nr.selectedRecords.ids[e].commission),o.push(e),a.push({affiliate_id:$e.details.affiliateId||0,referral_id:e,order_id:nr.selectedRecords.ids[e].orderId||0,commission:nr.selectedRecords.ids[e].commission||0,date:nr.selectedRecords.ids[e].date||""}))}),i={affiliate:{id:$e.details.affiliateId},selectedReferrals:a,selectedReferralIds:o,method:e.payoutMethod,currency:nr.selectedRecords.payoutCurrencyCode||"",date:"date"===r.target[1].type?r.target[1].value:"",note:"textarea"===r.target[1].type?r.target[1].value:r.target[2].value},e.flags.disablePayout=!0,g.showLoader=!0,g.msg=_x("Processing","payout processing loader message","affiliate-for-woocommerce"),t.n=1,new ce(i).processPayout();case 1:e.flags.disablePayout=!1,g.showLoader=!1;case 2:return t.a(2)}},t)}),i=function(){var e=this,t=arguments;return new Promise(function(r,a){var i=o.apply(e,t);function n(e){ur(i,r,a,n,s,"next",e)}function s(e){ur(i,r,a,n,s,"throw",e)}n(void 0)})},function(e){return i.apply(this,arguments)})},{key:"closePayoutModel",value:function(){confirm(_x("Are you sure you want to cancel? Any changes made will be lost.","confirmation message at payout model close","affiliate-for-woocommerce"))&&e.initializeFlags()}},{key:"view",value:function(t){var r,a=this;return ce.flags.PayoutProcessed&&(e.initializeFlags(),this.initialize(t.attrs),ce.flags.PayoutProcessed=!1),e.flags.show?m("div",{class:"modal fixed w-full h-full top-0 left-0 sm:flex sm:items-center sm:justify-center"},m("div",{class:"modal-overlay absolute w-full h-full top-0 left-0 bg-gray-800 opacity-50"}),m("div",{"x-show":"open",class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-2xl"},m("form",{class:"px-6 py-6 m-auto shadow rounded-lg bg-white border",onsubmit:this.processPayout},m("div",null,m("h3",{class:"text-lg leading-6 font-medium text-gray-900"},__("Pay","affiliate-for-woocommerce")," ",m("strong",null,nr.selectedRecords.payoutCurrencySymbol||"",f.formatNumber(this.commission))," to ",m("strong",null,this.name))),m("div",{class:"mt-6 sm:mt-5"},m("div",{class:"mt-4 sm:mt-3"},m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"method",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},_x("Payout Method","Label to select payout method for commission","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("select",{id:"method",class:"block form-select w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5",onchange:function(t){e.payoutMethod=t.target.value}},Object.keys(this.getPayoutMethods()).map(function(t){return m("option",{value:t||"",disabled:a.getPayoutMethods()[t].disabled||!1,selected:t===e.payoutMethod},a.getPayoutMethods()[t].title||t)}))),this.getPayoutMethods(e.payoutMethod)&&this.getPayoutMethods(e.payoutMethod).desc?m("p",{class:"mt-1 max-w-2xl w-64 text-xs leading-5 text-gray-500"},this.getPayoutMethods(e.payoutMethod).desc):"")),!0===(null===(r=this.getPayoutMethods(e.payoutMethod))||void 0===r?void 0:r.date)?m("div",{class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"date",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Record Date","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("input",{type:"date",value:this.recordDate||this.defaultDate,class:"form-input w-full sm:leading-5 py-1 text-xs bg-transparent focus:bg-white focus:border-gray-200",onchange:function(e){a.recordDate=e.target.value||a.defaultDate},placeholder:_x("Select payout date","placeholder: payout date","affiliate-for-woocommerce")})))):"",m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"notes",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Notes","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("textarea",{id:"notes",rows:"3",class:"form-textarea block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5 p-2"})))),m("div",{class:"mt-8 border-t border-gray-200 pt-5"},m("div",{class:"flex justify-end"},m("span",{class:"inline-flex rounded-md shadow-sm"},m("button",{type:"button",class:"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-500 hover:text-gray-700 focus:outline-none focus:border-indigo-300 focus:ring focus-visible:outline-none active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1,onclick:this.closePayoutModel},__("Cancel","affiliate-for-woocommerce"))),m("span",{class:"ml-3 inline-flex rounded-md shadow-sm"},m("button",{type:"submit",class:"inline-flex justify-center py-2 px-6 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring focus-visible:outline-none active:bg-indigo-700 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1},__("Send","affiliate-for-woocommerce")))))))))):""}}],a=[{key:"initializeFlags",value:function(){e.flags={show:!1,disablePayout:!1},e.payoutMethod="",e.maybeSetPayoutMethod()}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}},{key:"payoutMethod",get:function(){return e._payoutMethod?e._payoutMethod:(e.maybeSetPayoutMethod(),e._payoutMethod||"other")},set:function(t){e._payoutMethod=t}},{key:"maybeSetPayoutMethod",value:function(){"paypal"===$e.details.payoutMethod&&(e.payoutMethod=$e.details.isPaypalEmail?$e.details.payoutMethod:"paypal-manual"),"stripe"===$e.details.payoutMethod&&(e.payoutMethod=$e.details.isStripeAccount?$e.details.payoutMethod:"other"),"coupon-fixed-cart"===$e.details.payoutMethod&&(e.payoutMethod=$e.details.isfixedCouponPayout?$e.details.payoutMethod:"other"),"wsc-store-credit"===$e.details.payoutMethod&&(e.payoutMethod=$e.details.isStoreCreditPayout?$e.details.payoutMethod:"other")}}],r&&fr(t.prototype,r),a&&fr(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a,o,i}();function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function yr(e){return function(e){if(Array.isArray(e))return gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function vr(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return hr(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(hr(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,hr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,hr(f,"constructor",c),hr(c,"constructor",l),l.displayName="GeneratorFunction",hr(c,o,"GeneratorFunction"),hr(f),hr(f,o,"Generator"),hr(f,a,function(){return this}),hr(f,"toString",function(){return"[object Generator]"}),(vr=function(){return{w:i,m}})()}function hr(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}hr=function(e,t,r,a){function i(t,r){hr(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},hr(e,t,r,a)}function br(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function wr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,xr(a.key),a)}}function xr(e){var t=function(e,t){if("object"!=pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=pr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pr(t)?t:t+""}var _r=function(){return e=function e(t){var r=t.attrs,a=void 0===r?{}:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initParams(a)},t=[{key:"initParams",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params={id:(null==t?void 0:t.id)||0,startDate:(null==t?void 0:t.startDate)||"",endDate:(null==t?void 0:t.endDate)||"",currentPage:1,filters:(null==t?void 0:t.filters)||{},loadingMoreData:!1},null==this||null===(e=this.onParamInit)||void 0===e||e.call(this)}},{key:"doInit",value:function(){var e;null===(e=this.loadData)||void 0===e||e.call(this)}},{key:"doUpdate",value:function(e){var t=e.attrs,r=void 0===t?{}:t;(null==r?void 0:r.id)===this.params.id&&(null==r?void 0:r.startDate)===this.params.startDate&&(null==r?void 0:r.endDate)===this.params.endDate&&JSON.stringify((null==r?void 0:r.filters)||{})===JSON.stringify(this.params.filters||{})||this.initParams(r)}},{key:"loadMore",value:(a=vr().m(function e(){var t;return vr().w(function(e){for(;;)switch(e.n){case 0:return this.params.currentPage++,this.loadingMoreData=!0,e.n=1,null===(t=this.loadData)||void 0===t?void 0:t.call(this);case 1:this.loadingMoreData=!1;case 2:return e.a(2)}},e,this)}),o=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=a.apply(e,t);function n(e){br(i,r,o,n,s,"next",e)}function s(e){br(i,r,o,n,s,"throw",e)}n(void 0)})},function(){return o.apply(this,arguments)})},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m("[",null,(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&m("div",{class:"animate-pulse bg-gray-300 rounded m-2 h-8"}),m("div",{class:"flex animate-pulse"},parseInt(e)>0?yr(Array(parseInt(e))).map(function(){return m("div",{class:"m-2 h-8 w-1/4 bg-gray-300 rounded"})}):""),m("div",{class:"flex animate-pulse"},parseInt(e)>0?yr(Array(parseInt(e))).map(function(){return m("div",{class:"m-2 h-8 w-1/4 bg-gray-300 rounded"})}):""))}}],t&&wr(e.prototype,t),r&&wr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,a,o}();function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Pr(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return Sr(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Sr(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Sr(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,Sr(f,"constructor",c),Sr(c,"constructor",l),l.displayName="GeneratorFunction",Sr(c,o,"GeneratorFunction"),Sr(f),Sr(f,o,"Generator"),Sr(f,a,function(){return this}),Sr(f,"toString",function(){return"[object Generator]"}),(Pr=function(){return{w:i,m}})()}function Sr(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Sr=function(e,t,r,a){function i(t,r){Sr(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},Sr(e,t,r,a)}function jr(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function Or(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Dr(a.key),a)}}function Dr(e){var t=function(e,t){if("object"!=kr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=kr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kr(t)?t:t+""}function Cr(e,t,r){return t=Tr(t),function(e,t){if(t&&("object"==kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ar()?Reflect.construct(t,r||[],Tr(e).constructor):t.apply(e,r))}function Ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ar=function(){return!!e})()}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}function Lr(e,t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lr(e,t)}var Ir=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cr(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lr(e,t)}(t,e),r=t,a=[{key:"oninit",value:function(){var e;null!=$e&&null!==(e=$e.details)&&void 0!==e&&null!==(e=e.stats)&&void 0!==e&&e.current&&Object.values($e.details.stats.current).length>0&&this.doInit()}},{key:"onParamInit",value:function(){this.params.batchAction="paid"}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){return new $(null==this?void 0:this.params).fetch()}},{key:"updateCommissionStatus",value:(i=Pr().m(function e(){return Pr().w(function(e){for(;;)switch(e.n){case 0:if(!(Object.keys(nr.selectedRecords.ids).length>0)){e.n=2;break}return g.showLoader=!0,g.msg=_x("Updating commission status","loader message while updating commission status","affiliate-for-woocommerce"),e.n=1,new $({ids:Object.keys(nr.selectedRecords.ids),status:this.params.batchAction||""}).updateCommissionStatus();case 1:g.showLoader=!1,D.show({status:"success",message:_x("Commission status updated successfully","success message after updating commission status","affiliate-for-woocommerce")}),e.n=3;break;case 2:D.show({status:"warning",message:_x("Please select a referral","warning message when no referral is selected for commission status update","affiliate-for-woocommerce")});case 3:return e.a(2)}},e,this)}),n=function(){var e=this,t=arguments;return new Promise(function(r,a){var o=i.apply(e,t);function n(e){jr(o,r,a,n,s,"next",e)}function s(e){jr(o,r,a,n,s,"throw",e)}n(void 0)})},function(){return n.apply(this,arguments)})},{key:"getCommissionStatusActions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paid:_x("Mark as Paid","action name to mark commission as paid","affiliate-for-woocommerce"),unpaid:_x("Mark as Unpaid","action name to mark commission as unpaid","affiliate-for-woocommerce"),rejected:_x("Mark as Rejected","action name to mark commission as rejected","affiliate-for-woocommerce")};return e?e in t?t[e]:"":t}},{key:"showCommissionActionsPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded m-2 mb-4 h-8"})}},{key:"commissionActions",value:function(){var e,t=this,r=nr.selectedRecords.unpaidCommission>0&&!nr.selectedRecords.IsMultiCurrencyDetected,a=Number(f.getAFWParams("minimumCommissionPayout")||0),o=nr.selectedRecords.payoutCurrencySymbol||afwcDashboardParams.currencySymbol||"";return $e.details.referrals&&$e.details.referrals.length>0?m("[",null,m(dr,{commission:nr.selectedRecords.unpaidCommission,name:$e.details.name||""}),m("div",{class:"flex items-center pb-3"},m("div",{class:"ml-3"},m("div",{class:r?"":"opacity-50 cursor-not-allowed"},m("a",{class:(r?"cursor-pointer ":"")+"px-2 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",onclick:function(){return dr.flags.show=r}},nr.selectedRecords.IsMultiCurrencyDetected?_x("Payout is not allowed for multiple currency","multi currency not allowed message","affiliate-for-woocommerce"):_x("Send Payout:","Commissions payout title","affiliate-for-woocommerce")+" "+o+(nr.selectedRecords.IsMultiCurrencyDetected?0:f.formatNumber(nr.selectedRecords.unpaidCommission||0))),r&&a>0&&Number(null==nr||null===(e=nr.selectedRecords)||void 0===e?void 0:e.unpaidCommission)<a?m("p",{class:"px-2 text-xs text-gray-500 cursor-text"},sprintf(_x("(below minimum commission of %s)","minimum commission message","affiliate-for-woocommerce"),o+f.formatNumber(a))):"")),m("h4",{class:"flex-1 text-lg text-gray-700"}),m("span",{class:"text-gray-400 mr-4 text-sm"},sprintf(_nx("%s record","%s records",Object.keys(nr.selectedRecords.ids).length||0,"number of selected records","affiliate-for-woocommerce"),Object.keys(nr.selectedRecords.ids).length)||0,nr.selectedRecords.IsMultiCurrencyDetected?"":", "+o+(nr.selectedRecords.commission||0)+" "+_x("commission","text for commission amount","affiliate-for-woocommerce")),m("select",{"aria-label":_x("Batch Actions","commission batch action","affiliate-for-woocommerce"),class:"form-select h-full py-2 pl-2 bg-transparent text-gray-500 sm:text-sm sm:leading-5 disabled:opacity-75",onchange:function(e){return t.params.batchAction=e.target.value||""}},Object.keys(this.getCommissionStatusActions()).map(function(e){return m("option",{value:e,selected:e===t.params.batchAction?"selected":""},t.getCommissionStatusActions(e)||"")})),m("div",{class:"rounded-md shadow-sm ml-4"},m("button",{type:"submit",class:(Object.keys(nr.selectedRecords.ids).length>0?"":"opacity-50 cursor-not-allowed ")+"flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:ring-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75",onclick:function(){return t.updateCommissionStatus()}},_x("Update","update button title for commission status","affiliate-for-woocommerce"))))):""}},{key:"view",value:function(){var e,t,r,a=this;return $.flags.moreReferralLoaded&&nr.selectedRecords.selectAll&&nr.handleRowSelection($e.details.referrals,!0),$.flags.clearSelections&&(nr.initialize(),$.flags.clearSelections=!1),ce.flags.PayoutProcessed&&nr.initialize(),m("section",{class:"my-5 overflow-x-auto"},$e.isLoading("referrals")?this.showCommissionActionsPlaceholder():this.commissionActions(),m("section",null,$e.isLoading("referrals")?this.showPlaceholder():m("[",null,m(nr,null),this.loadingMoreData&&this.showPlaceholder(void 0,!1),!this.loadingMoreData&&(null==$||null===(e=$.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.referrals)||void 0===t?void 0:t.length)>0&&0===parseInt(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.referrals)||void 0===r?void 0:r.length)%parseInt(f.getAFWParams("dashboard_data_batch_limit")||0)&&m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){a.loadMore()}},_x("Load More","Load more link for referrals report","affiliate-for-woocommerce")))))))}}],a&&Or(r.prototype,a),o&&Or(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o,i,n}(_r);function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Fr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Mr(a.key),a)}}function Mr(e){var t=function(e,t){if("object"!=Er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Er(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Er(t)?t:t+""}var Nr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"initParam",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).attrs,t=void 0===e?{}:e;this.printInvoice=(null==t?void 0:t.printInvoice)||function(){}}},{key:"oncreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initParam(e)}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initParam(e)}},{key:"view",value:function(){var e=this;return $e.details.payouts&&Object.entries($e.details.payouts).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Date","Payout table header for date column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Amount","Payout table header for amount column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Method","Payout table header for payout method column","affiliate-for-woocommerce")),m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Notes","Payout table header for payout notes column","affiliate-for-woocommerce")),f.getAFWParams("isPayoutInvoiceEnabled")?m("th",{class:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},_x("Invoice","Payout table header for invoice column","affiliate-for-woocommerce")):"")),m("tbody",{class:"bg-white"},$e.details.payouts.map(function(t){return m("tr",null,m("td",{class:"px-5 py-3 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:t.datetime||""},t.datetime||"")),m("td",{class:"px-5 py-3 whitespace-nowrap border-b border-gray-200 text-sm leading-5 font-medium text-gray-900"},m("div",{class:"flex items-center flex-row-reverse"},m("span",{class:"numeric text-gray-600"},t.currency||""," ",f.formatNumber(t.amount||0)),m("span",{class:(t.hasOwnProperty("referral_count")&&t.hasOwnProperty("from_date")&&t.hasOwnProperty("to_date")?"visible ":"invisible ")+"hidden xl:inline mx-3 text-gray-400 text-xs"},"for ",sprintf(_nx("%s referral","%s referrals",parseInt(t.referral_count||0),"number of referrals","affiliate-for-woocommerce"),t.referral_count||"-")," from ",t.from_date||"-"," to ",t.to_date||"-"))),m("td",{class:"px-5 py-3 whitespace-nowrap border-b border-gray-200 text-sm leading-5 text-gray-500"},t.method&&f.getAFWParams("payoutMethods")?f.getAFWParams("payoutMethods")[t.method]||t.method:""),m("td",{class:"px-5 py-3 whitespace-nowrap border-b border-gray-200 text-xs leading-5 text-gray-500"},t.payout_notes||""),f.getAFWParams("isPayoutInvoiceEnabled")?m("td",{class:"px-5 py-3 whitespace-nowrap border-b border-gray-200 text-xs leading-5 text-gray-500 text-center"},m("a",{class:"cursor-pointer flex justify-center",onclick:function(){return e.printInvoice(t.payout_id||0)},title:_x("Print","title for printing the invoice icon","affiliate-for-woocommerce")},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-5 h-5 stroke-1 transition-all duration-200 ease-in-out hover:stroke-2 hover:text-indigo-500"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})))):"")}))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Payout details are unavailable for this date range. Adjust the dates and retry.","empty payout message","affiliate-for-woocommerce"))}}],t&&Fr(e.prototype,t),r&&Fr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Rr(e){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(e)}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,i,n,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=i.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Br(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qr(a.key),a)}}function qr(e){var t=function(e,t){if("object"!=Rr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Rr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rr(t)?t:t+""}var Hr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()},t=[{key:"initialize",value:function(){var e,t,r;this.commissions=(null==$e||null===(e=$e.details)||void 0===e||null===(e=e.payoutStats)||void 0===e||null===(e=e.allTime)||void 0===e?void 0:e.earned_commissions)||"",this.paidCommissions=(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.payoutStats)||void 0===t||null===(t=t.allTime)||void 0===t?void 0:t.paid_commissions)||"",this.unpaidCommissions=(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.payoutStats)||void 0===r||null===(r=r.allTime)||void 0===r?void 0:r.unpaid_commissions)||""}},{key:"showNumberPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded mx-2 h-4 w-16"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"animate-pulse bg-gray-300 rounded mx-2 h-4 w-20"})}},{key:"showValue",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if($e.isLoading("payoutKPI"))return this.showNumberPlaceholder();t=String(t)||"";var r=f.getAFWParams("decimal")||".",a=zr((null===(e=t)||void 0===e?void 0:e.split(r))||[],2),o=a[0],i=void 0===o?"00":o,n=a[1],s=void 0===n?"00":n;return m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},f.getAFWParams("currencySymbol")||""),i," ",m("span",{class:"text-sm"},r+s))}},{key:"showLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return $e.isLoading("payoutKPI")?this.showTextPlaceholder():e}},{key:"view",value:function(){return this.initialize(),m("section",{class:"flex items-center justify-between text-sm text-gray-800"},m("div",{class:"flex-1 flex items-center justify-between"},m("div",{class:"mr-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.commissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Commission (All Time)","label for all time commission","affiliate-for-woocommerce")))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.paidCommissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Paid (All Time)","label for all time paid commissions","affiliate-for-woocommerce")))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},this.showValue(this.unpaidCommissions||"")),m("div",{class:"mt-1 leading-6 text-gray-400"},this.showLabel(_x("Unpaid (All Time)","label for all time unpaid commissions","affiliate-for-woocommerce"))))))}}],t&&Br(e.prototype,t),r&&Br(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function Vr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Kr(a.key),a)}}function Kr(e){var t=function(e,t){if("object"!=Gr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Gr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gr(t)?t:t+""}function Ur(e,t,r){return t=Yr(t),function(e,t){if(t&&("object"==Gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jr()?Reflect.construct(t,r||[],Yr(e).constructor):t.apply(e,r))}function Jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Jr=function(){return!!e})()}function Yr(e){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yr(e)}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}var $r=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ur(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qr(e,t)}(t,e),r=t,a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){return new ce(null==this?void 0:this.params).fetchKPI(),new ce(null==this?void 0:this.params).fetch()}},{key:"printInvoice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(new ce).printInvoice(e)}},{key:"view",value:function(){var e,t,r,a=this;return m("section",{class:"my-5 overflow-x-auto"},m(Hr,null),m("section",{class:"my-6"},$e.isLoading("payouts")?this.showPlaceholder():m("[",null,m(Nr,{printInvoice:this.printInvoice}),this.loadingMoreData&&this.showPlaceholder(void 0,!1),!this.loadingMoreData&&(null==ce||null===(e=ce.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.payouts)||void 0===t?void 0:t.length)>0&&0===parseInt(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.payouts)||void 0===r?void 0:r.length)%parseInt(f.getAFWParams("dashboard_data_batch_limit")||0)&&m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){a.loadMore()}},_x("Load More","Load more link for payouts","affiliate-for-woocommerce")))))))}}],a&&Vr(r.prototype,a),o&&Vr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(_r);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Xr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ea(a.key),a)}}function ea(e){var t=function(e,t){if("object"!=Zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Zr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zr(t)?t:t+""}var ta=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(){return $e.details.products&&Object.keys($e.details.products).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Product","Product table row title for product name","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Quantity","Product table row title for quantity","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Sales","Product table row title for sales","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},Object.keys($e.details.products).length>0&&Object.keys($e.details.products).length>0?Object.keys($e.details.products).map(function(e){return m("tr",null,m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-nowrap border-b border-gray-200"},m("a",{href:$e.details.products[e].edit_product_url||"",target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},$e.details.products[e].product||"")),m("td",{class:"px-6 py-3 text-sm font-medium text-right leading-5 text-gray-500 whitespace-nowrap border-b border-gray-200 numeric"},$e.details.products[e].quantity||0),m("td",{class:"px-6 py-3 text-sm leading-5 text-right text-gray-500 whitespace-nowrap border-b border-gray-200 numeric"},afwcDashboardParams.currencySymbol,$e.details.products[e].sales||0))}):"")):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("Products are unavailable for this date range. Adjust the dates and retry.","empty product message","affiliate-for-woocommerce"))}}])&&Xr(e.prototype,t),r&&Xr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function aa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oa(a.key),a)}}function oa(e){var t=function(e,t){if("object"!=ra(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ra(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ra(t)?t:t+""}function ia(e,t,r){return t=sa(t),function(e,t){if(t&&("object"==ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,na()?Reflect.construct(t,r||[],sa(e).constructor):t.apply(e,r))}function na(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(na=function(){return!!e})()}function sa(e){return sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sa(e)}function la(e,t){return la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},la(e,t)}var ca=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ia(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(t,e),r=t,a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){return new de(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e,t,r,a=this;return m("section",{class:"my-5 overflow-x-auto"},m("section",{class:"my-6"},$e.isLoading("products")?this.showPlaceholder():m("[",null,m(ta,null),this.loadingMoreData&&this.showPlaceholder(void 0,!1),!this.loadingMoreData&&(null==de||null===(e=de.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.products)||void 0===t?void 0:t.length)>0&&0===parseInt(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.products)||void 0===r?void 0:r.length)%parseInt(f.getAFWParams("dashboard_data_batch_limit")||0)&&m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){a.loadMore()}},_x("Load More","Load more link for products report","affiliate-for-woocommerce")))))))}}],a&&aa(r.prototype,a),o&&aa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(_r);function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function fa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ma(a.key),a)}}function ma(e){var t=function(e,t){if("object"!=ua(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ua(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ua(t)?t:t+""}var da=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"oncreate",value:function(){CountryFlag.setEmojis()}},{key:"onupdate",value:function(){CountryFlag.setEmojis()}},{key:"header",value:function(){var e;return null!=$e&&null!==(e=$e.details)&&void 0!==e&&e.visits&&Object.values($e.details.visits).length?m("thead",null,m("tr",null,m("th",{class:"bg-gray-50 px-6 py-3 border-gray-200 border-b font-medium text-gray-500 text-xs text-left uppercase leading-4 tracking-wider"},_x("Datetime","Visit table row title for datetime","affiliate-for-woocommerce")),m("th",{class:"bg-gray-50 px-6 py-3 border-gray-200 border-b font-medium text-gray-500 text-xs text-left uppercase leading-4 tracking-wider"},_x("Medium","Visit table row title for medium","affiliate-for-woocommerce")),m("th",{class:"bg-gray-50 px-6 py-3 border-gray-200 border-b font-medium text-gray-500 text-xs text-left uppercase leading-4 tracking-wider"},_x("Landing URL","Visit table row title for landing URL","affiliate-for-woocommerce")),m("th",{class:"bg-gray-50 px-6 py-3 border-gray-200 border-b font-medium text-gray-500 text-xs text-center uppercase leading-4 tracking-wider"},_x("Converted","Visit table row title to know if a hit is converted","affiliate-for-woocommerce")),m("th",{class:"bg-gray-50 px-6 py-3 border-gray-200 border-b font-medium text-gray-500 text-xs text-left uppercase leading-4 tracking-wider"},_x("User agent","Visit table row title for user agent","affiliate-for-woocommerce")))):""}},{key:"deviceIcon",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t&&(null===(e=f.getAFWParams("deviceTypeSvg"))||void 0===e?void 0:e[t])||t}},{key:"view",value:function(){var e,t,r=this;return null!=$e&&null!==(e=$e.details)&&void 0!==e&&e.visits&&Object.keys(null==$e||null===(t=$e.details)||void 0===t?void 0:t.visits).length>0?m("table",{class:"min-w-full"},this.header(),m("tbody",{class:"bg-white"},$e.details.visits.map(function(e){var t,a,o,i,n,s,l,c,u,d,p,y,g;return m("tr",{key:e.id||""},m("td",{class:"px-6 py-3 border-gray-200 border-b text-gray-500 text-sm leading-5"},e.datetime?e.datetime.split(/\s+/).map(function(e,t){return m("div",{class:"whitespace-nowrap"},m("time",{key:t,datetime:e},e))}):"-"),m("td",{class:"px-6 py-3 border-gray-200 border-b text-gray-500 text-sm leading-5"},e.medium||"-"),m("td",{class:"px-6 py-3 border-gray-200 border-b max-w-xs text-gray-500 text-sm break-all leading-5"},null!=e&&e.referring_url?m("a",{class:"text-indigo-600 hover:underline cursor-pointer",href:e.referring_url},e.referring_url):"-"),m("td",{class:"px-6 py-3 border-gray-200 border-b text-gray-500 text-sm text-center leading-5"},m("div",{class:"flex justify-center text-center"},m("span",{class:(null!=e&&e.is_converted?"text-emerald-700":"text-red-600")+" size-6"},m.trust(null!=e&&e.is_converted?null===(t=f.getAFWParams("isConvertedSvg"))||void 0===t?void 0:t.yes:null===(a=f.getAFWParams("isConvertedSvg"))||void 0===a?void 0:a.no)))),m("td",{class:"px-6 py-3 border-gray-200 border-b max-w-xs text-gray-500 text-sm break-all leading-5"},m("ul",{class:"space-y-0 list-none"},m("li",{class:"flex flex-row items-center space-x-2 mb-0"},m("span",null,_x("Device:","Device type label in visits dashboard","affiliate-for-woocommerce")),m("span",{class:"size-4"},null!=e&&null!==(o=e.user_agent_info)&&void 0!==o&&o.device_type?m.trust(r.deviceIcon(null==e||null===(i=e.user_agent_info)||void 0===i?void 0:i.device_type)):"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",null,_x("Browser:","Browser name label in visits dashboard","affiliate-for-woocommerce")),m("span",{class:"whitespace-nowrap"},"Unknown"!==(null==e||null===(n=e.user_agent_info)||void 0===n?void 0:n.browser)?null==e||null===(s=e.user_agent_info)||void 0===s?void 0:s.browser:"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",null,_x("OS:","OS name label in  visits dashboard","affiliate-for-woocommerce")),m("span",{class:"whitespace-nowrap"},"Unknown"!==(null==e||null===(l=e.user_agent_info)||void 0===l?void 0:l.os)?null==e||null===(c=e.user_agent_info)||void 0===c?void 0:c.os:"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",{class:"whitespace-nowrap"},_x("IP:","IP address label in visits dashboard","affiliate-for-woocommerce")),m("span",null,e.ip||"-")),m("li",{class:"flex flex-row items-center space-x-2"},m("span",{class:"whitespace-nowrap"},_x("Country:","Country name label in visits dashboard","affiliate-for-woocommerce")),m("span",{class:"afwc-visits-country",title:(null==e||null===(u=e.country)||void 0===u?void 0:u.name)||(null==e||null===(d=e.country)||void 0===d?void 0:d.code)||"-","data-country_name":(null==e||null===(p=e.country)||void 0===p?void 0:p.name)||"","data-country_code":(null==e||null===(y=e.country)||void 0===y?void 0:y.code)||""},(null==e||null===(g=e.country)||void 0===g?void 0:g.code)||"-")))))}))):m("p",{class:"py-8 text-gray-500 text-sm text-center"},_x("Visits are unavailable for this date range. Adjust the dates and retry.","empty visits message","affiliate-for-woocommerce"))}}],t&&fa(e.prototype,t),r&&fa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function ya(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ga(a.key),a)}}function ga(e){var t=function(e,t){if("object"!=pa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=pa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pa(t)?t:t+""}function va(e,t,r){return t=ba(t),function(e,t){if(t&&("object"==pa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ha()?Reflect.construct(t,r||[],ba(e).constructor):t.apply(e,r))}function ha(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ha=function(){return!!e})()}function ba(e){return ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ba(e)}function wa(e,t){return wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wa(e,t)}var xa=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),va(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t)}(t,e),r=t,a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){return new ve(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e,t,r,a=this;return m("section",{class:"my-5 overflow-x-auto"},m("section",{class:"my-6"},$e.isLoading("visits")?this.showPlaceholder():m("[",null,m(da,null),this.loadingMoreData&&this.showPlaceholder(void 0,!1),!this.loadingMoreData&&(null==ve||null===(e=ve.flags)||void 0===e?void 0:e.loadMore)&&parseInt(null==$e||null===(t=$e.details)||void 0===t||null===(t=t.visits)||void 0===t?void 0:t.length)>0&&0===parseInt(null==$e||null===(r=$e.details)||void 0===r||null===(r=r.visits)||void 0===r?void 0:r.length)%parseInt(f.getAFWParams("dashboard_data_batch_limit")||0)&&m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){a.loadMore()}},_x("Load More","Load more link for visits report","affiliate-for-woocommerce")))))))}}],a&&ya(r.prototype,a),o&&ya(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(_r);function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function ka(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pa(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Sa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ja(a.key),a)}}function ja(e){var t=function(e,t){if("object"!=_a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=_a(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_a(t)?t:t+""}var Oa=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0}},t=[{key:"oninit",value:function(){new xe(this.params).fetch()}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return parseInt(e)>0?m("[",null,ka(Array(parseInt(e))).map(function(){return m("div",{class:"flex animate-pulse"},m("div",{class:"bg-gray-300 rounded m-2 h-8 w-1/4"}),m("div",{class:"bg-gray-300 rounded m-2 h-8 w-3/4"}))})):""}},{key:"processProfileUpdate",value:function(e){var t,r=this;e.preventDefault();var a=(null==e||null===(t=e.target)||void 0===t||null===(t=t.dataset)||void 0===t?void 0:t.cmd)||!1;a&&(g.showLoader=!0,g.msg=_x("Updating","loading text for profile tab save button","affiliate-for-woocommerce"),f.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:a,security:f.getAFWParams("security.dashboard.affiliateProfileActions")||"",affiliate_id:$e.details.affiliateId||0},callback:function(e){if(e.success){var t=$e.details.name;g.showLoader=!1,"approved"===e.data.toString()?D.show({status:"success",message:sprintf(_x("Affiliate %1$s is approved","success message when affiliate is approved","affiliate-for-woocommerce"),t)}):"rejected"===e.data.toString()&&D.show({status:"warning",message:sprintf(_x("Affiliate %1$s is rejected","success message when affiliate is rejected","affiliate-for-woocommerce"),t)}),r.actionCompleted=!0}else D.show({status:"error",message:e.data.toString()});g.showLoader=!1}}))}},{key:"view",value:function(){var e,t=this;return m("section",{class:"afwc-profile-tab my-5 overflow-x-auto"},$e.isLoading("profile")?this.showPlaceholder():m("div",{class:"overflow-auto"},m("div",{class:"flex flex-col justify-center overflow-hidden w-full mx-auto"},m("div",{class:"divide-y divide-slate-200"},null!=$e&&null!==(e=$e.details)&&void 0!==e&&e.registrationFormData&&!Object.values($e.details.registrationFormData).every(function(e){return""===e||Array.isArray(e)&&0===e.length})?m("[",null,m("h2",{class:"leading-6 font-semibold py-2 px-4 text-base"},_x("Registration Form Details","Registration form details accordion title","affiliate-for-woocommerce")),m("div",{class:"text-sm text-slate-600"},m(Ce,{formData:$e.details.registrationFormData,affiliateStatus:"pending"}))):""),!this.actionCompleted&&m("div",{class:"px-4 pt-4 flex items-center gap-8 w-1/3"},m("button",{class:"w-1/2 py-2 px-5 flex justify-center border border-transparent text-lg font-semibold rounded-lg text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:ring-gray active:bg-indigo-700 transition duration-150 ease-in-out disabled:opacity-75","data-cmd":"approve_affiliate_profile",onclick:function(e){return t.processProfileUpdate(e)}},_x("Approve","label for affiliate approve action","affiliate-for-woocommerce")),m("button",{class:"w-1/2 py-2 px-5 flex justify-center border border-transparent text-lg font-semibold rounded-lg text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:ring-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75","data-cmd":"reject_affiliate_profile",onclick:function(e){return t.processProfileUpdate(e)}},_x("Reject","label for affiliate reject action","affiliate-for-woocommerce"))))))}}],t&&Sa(e.prototype,t),r&&Sa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ca(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Aa(a.key),a)}}function Aa(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Da(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Da(t)?t:t+""}var Ta=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initParams(t),this.nodeCss="inline-block p-2 text-sm border-solid border-gray-200 text-gray-500 w-40 border hover:text-gray-900 rounded-lg",this.placeholderNodeCss="inline-block text-sm border-solid border-gray-200 text-gray-500 w-40 border rounded-lg animate-pulse bg-gray-300 m-2 h-8",this.multiTierWrapperCss="multi-tier-tree flex items-center justify-center"},t=[{key:"oninit",value:function(){new Se(this.params).fetch()}},{key:"initParams",value:function(e){var t;this.params={id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0}}},{key:"showPlaceholder",value:function(){return m("div",{class:this.multiTierWrapperCss||""},this.buildList([{id:1,children:[{id:2,children:[]},{id:3,children:[]},{id:4,children:[]}]}],!0,!0))}},{key:"buildList",value:function(){var e=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m("ul",{class:"py-5 relative transition-all"},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map(function(a){return m("li",{class:"float-left pt-5 pb-0 text-center list-none relative px-5 transition-all"},m("span",{class:r?e.placeholderNodeCss:t?e.nodeCss+("pending"===a.status?" bg-red-100":" bg-warning-light"):""},a.name||""),a.children&&a.children.length>0?e.buildList(a.children,t,r):"")}))}},{key:"emptyText",value:function(){return m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No children found. View/set parent affiliate from affiliate's profile.","empty chain message","affiliate-for-woocommerce"))}},{key:"view",value:function(e){return this.initParams(e),m("div",{class:"afwc-multi-tier-tree"},m("section",{class:"my-5 overflow-x-auto"},Se.flags.loading?this.showPlaceholder():Se.details&&Object.entries(Se.details).length>0?m("div",{class:this.multiTierWrapperCss||""},this.buildList(Se.details,!0)):this.emptyText()))}}],t&&Ca(e.prototype,t),r&&Ca(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function La(e){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(e)}function Ia(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ea(a.key),a)}}function Ea(e){var t=function(e,t){if("object"!=La(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=La(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==La(t)?t:t+""}var Fa=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||"",activeTab:tt.activeTab||"referrals"}},(t=[{key:"refreshModel",value:function(e){var t=this.params.id,r=this.params.startDate,a=this.params.endDate;this.params=Object.assign(this.params,e.attrs),t==e.attrs.id&&r==e.attrs.startDate&&a==e.attrs.endDate||(this.model=new $e(this.params).reload(tt.activeTab||"referrals")),this.params.activeTab=tt.activeTab||"referrals"}},{key:"oncreate",value:function(){this.model=new $e(this.params).fetch()}},{key:"view",value:function(e){var t;return this.refreshModel(e),m("section",{class:($e.details.pending?"border-t-4 border-red-100 ":"")+"px-6 py-6 sm:w-4/5 rounded-lg bg-white shadow"},m("article",{class:"h-3/6 w-full"},$e.details.pending?m("[",null,m(Zt,null),m(Oa,{id:this.params.id})):m("[",null,m(Zt,null),m(rr,null),m(tt,null),"referrals"===this.params.activeTab?m(Ir,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate,filters:(null==lt||null===(t=lt.data)||void 0===t?void 0:t.filters)||{}}):"","payouts"===this.params.activeTab?m($r,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","products"===this.params.activeTab?m(ca,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","visits"===this.params.activeTab?m(xa,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","profile"===this.params.activeTab?m(Ge,{id:this.params.id}):"","multi-tier"===this.params.activeTab?m(Ta,{id:this.params.id}):"")))}}])&&Ia(e.prototype,t),r&&Ia(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ma(e){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ma(e)}function Na(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ra(a.key),a)}}function Ra(e){var t=function(e,t){if("object"!=Ma(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ma(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ma(t)?t:t+""}var za=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="standard"},t=[{key:"showOptions",value:function(e){var t=document.getElementById("afwc-export-option");"none"===t.style.display?t.style.display="block":t.style.display="none"}},{key:"exportAffiliates",value:function(e){this.type=e,lt.exportAffiliates(this.type),document.getElementById("afwc-export-option").style.display="none"}},{key:"view",value:function(e){var t=this;return m("div",{class:"relative"},m("button",{type:"button",id:"afwc-export-btn",onclick:function(e){t.showOptions(e)},class:"shadow-sm cursor-pointer relative w-3/5 rounded-md border bg-white pl-3 pr-10 py-2 text-left focus:outline-none focus:ring focus:ring-indigo-200 focus:ring-opacity-50 focus:border-blue-300 transition ease-in-out duration-150 sm:text-sm sm:leading-5"},m("div",{class:"flex items-center space-x-3"},m("span",{class:"font-normal flex truncate"},m("span",{class:"flex items-center pl-2 mr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}))),__("Export","affiliate-for-woocommerce"))),m("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor"},m("path",{d:"M7 7l3-3 3 3m0 6l-3 3-3-3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})))),m("div",{id:"afwc-export-option",class:"absolute mt-1 w-3/5 rounded-md bg-white shadow-lg",style:"display: none;"},m("ul",{tabindex:"-1",role:"listbox",class:"max-h-56 rounded-md py-1 text-base leading-6 ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm sm:leading-5"},m("li",{id:"listbox-item-0","data-type":"standard",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"},__("Standard CSV","affiliate-for-woocommerce")),m("li",{id:"listbox-item-0","data-type":"mass_payment",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"},__("Mass Payout CSV","affiliate-for-woocommerce")))))}}],t&&Na(e.prototype,t),r&&Na(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Wa(e){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wa(e)}function Ba(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qa(a.key),a)}}function qa(e){var t=function(e,t){if("object"!=Wa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Wa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wa(t)?t:t+""}var Ha=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)},(t=[{key:"initialize",value:function(e){this.startDate=e.startDate||"",this.endDate=e.endDate||""}},{key:"view",value:function(e){return this.initialize(e.attrs),m("main",{class:"max-w-7xl mx-auto my-8 py-6 sm:px-3 xl:px-8 sm:flex sm:items-top"},m("section",{class:"sm:w-1/5"},m(Gt,null),m(za,null),m(Jt,null)),m(Fa,{id:lt.data.currentAffiliateID,startDate:this.startDate,endDate:this.endDate}))}}])&&Ba(e.prototype,t),r&&Ba(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ga(e){return Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(e)}function Va(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ka(a.key),a)}}function Ka(e){var t=function(e,t){if("object"!=Ga(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ga(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ga(t)?t:t+""}var Ua=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()},t=[{key:"showFeedback",value:function(){"success"===D.notification.status&&afwcDashboardParams.can_ask_for_feedback&&(wt.flags.showFeedback=1)}},{key:"initialize",value:function(){this.icons={success:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',error:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>',warning:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'},this.hideNotificationTimeout=null}},{key:"renderIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning";return e in this.icons?m.trust(this.icons[e]):""}},{key:"setHideNotificationTimeout",value:function(){var e=this;this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout(function(){if(D.flags.showNotification&&D.notification.autoHide){var t=document.getElementsByClassName("afwc-notification-close");t.length>0?t[0].click():e.showFeedback()}},D.notification.hideDelay||8e3)}},{key:"hideNotification",value:function(){clearTimeout(this.hideNotificationTimeout),D.hide()}},{key:"view",value:function(){var e=this;D.flags.showNotification&&this.setHideNotificationTimeout();var t="success"!==D.notification.status?"error"===D.notification.status?"error":"warning":"success";return m("div",{class:"fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end",style:"z-index: 200000;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg pointer-events-auto bottom-0 fixed"},m("div",{class:"overflow-hidden rounded-lg ring-1 ring-black ring-opacity-5 text-gray-700"},m("div",{class:("success"!==t?"error"===t?"bg-error":"bg-warning":"bg-success")+" p-4"},m("div",{class:"flex items-center"},m("div",{class:"shrink-0"},this.renderIcon(t)),m("div",{class:"ml-3 flex-1"},m("p",{class:"text-sm leading-5"},D.notification.message)),m("div",{class:"flex shrink-0 ml-4"},m("button",{type:"button",class:"afwc-notification-close inline-flex p-1 rounded-md hover:bg-gray-700 focus:outline-none transition duration-150 ease-in-out",onclick:function(){e.showFeedback(),e.hideNotification()}},m("svg",{class:"h-6 w-6 hover:text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}}],t&&Va(e.prototype,t),r&&Va(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ja(e){return Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ja(e)}function Ya(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Qa(a.key),a)}}function Qa(e){var t=function(e,t){if("object"!=Ja(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ja(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ja(t)?t:t+""}var $a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)},t=[{key:"initialize",value:function(){var e,t,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlParams=o||{};var i=f.geRouteFilterValue(o.filterValue||"")||{};this.params={affiliateID:o.id||0,startDate:i["from-date"]?null===(e=afwcDateFunctions)||void 0===e||null===(t=e.formatDate)||void 0===t?void 0:t.call(e,new Date(i["from-date"]+"T00:00:00")):afwcDateFunctions.getFullDate(-30),endDate:i["to-date"]?null===(r=afwcDateFunctions)||void 0===r||null===(a=r.formatDate)||void 0===a?void 0:a.call(r,new Date(i["to-date"]+"T00:00:00")):afwcDateFunctions.getFullDate()},new lt(this.params)}},{key:"onupdate",value:function(e){(this.urlParams!=e.attrs&&Object.keys(e.attrs).length||lt.restarted)&&this.initialize(e.attrs);var t=document.getElementById("afwc-search-panel"),r=document.getElementById("afwc-export-option"),a=document.getElementById("afwc-smart-dates-dropdown-list");document.onclick=function(e){t&&"afwc-search-field"!=e.target.id&&!e.target.closest("#afwc-search-panel")&&t.classList.add("hidden"),!r||"afwc-export-btn"==e.target.id||e.target.closest("#afwc-export-option")||e.target.closest("#afwc-export-btn")||"none"!==r.style.display&&(r.style.display="none"),a&&"afwc-smart-dates-dropdown-icon"!=e.target.id&&"afwc-smart-dates-dropdown-list"!=e.target.id&&!e.target.closest("li")&&a.classList.add("hidden")}}},{key:"view",value:function(){return m("[",null,m(Mt,{startDate:lt.data.start_date,endDate:lt.data.end_date}),g.showLoader||0!==lt.data.affiliates.length?lt.data.affiliates.length>0||Object.keys(lt.data.kpi).length>0?m("[",null,m(Wt,null),m(At,{type:"masspay_deprecated"}),m(At,{type:"plan_updated"}),m(At,{type:"affiliate_data_migration"}),m(At,{type:"admin_summary_email"}),m(Ha,{startDate:lt.data.start_date,endDate:lt.data.end_date})):"":m("[",null,m(At,{type:"affiliate_data_migration"}),m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-gray-500"},m("p",{class:"text-xl font-medium leading-8 text-center"},_x("No affiliates yet. Let's get started.","Message when there are no affiliates.","affiliate-for-woocommerce")),m("div",{class:"mx-auto leading-8 max-w-lg mt-6 space-y-4"},m("p",{class:"text-lg"},_x("Edit your affiliate registration form (Settings > Affiliate > Registration Form) and link it from your site.","instruction to edit affiliate registration form.","affiliate-for-woocommerce"),m("a",{class:"ml-1 cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-registration-form-to-let-users-sign-up-for-your-affiliate-program/"},_x("Here's how.","documentation link to registration form feature","affiliate-for-woocommerce"))),m("p",{class:"text-lg"},_x("or go to Settings > Affiliate > General and select any user roles to automatically make them affiliates.","instruction to make affiliates via user role through settings.","affiliate-for-woocommerce"),m("a",{class:"ml-1 cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"#section-8"},_x("Here's how.","documentation link to make affiliates via user role feature","affiliate-for-woocommerce"))),m("p",{class:"text-lg"},_x("Or go to an individual user's profile in WordPress and make them an affiliate.","instruction to make a user an affiliate via profile.","affiliate-for-woocommerce"),m("a",{class:"ml-1 cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"#section-7"},_x("Here's how.","documentation link to individually making a user as an affiliate feature","affiliate-for-woocommerce"))))))),D.flags.showNotification?m(Ua,null):null)}}],t&&Ya(e.prototype,t),r&&Ya(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function Xa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eo(a.key),a)}}function eo(e){var t=function(e,t){if("object"!=Za(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Za(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Za(t)?t:t+""}var to=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},w.data.kpi.total_hits),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},w.data.kpi.total_orders),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Orders","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},w.data.kpi.conversion,"%"),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Conversion Rate","affiliate-for-woocommerce")))))))}}])&&Xa(e.prototype,t),r&&Xa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ro(e){return ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ro(e)}function ao(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oo(a.key),a)}}function oo(e){var t=function(e,t){if("object"!=ro(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ro(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ro(t)?t:t+""}var io=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.getStatuses=f.getCampaignStatus,this.displayLink=""}return t=e,r=[{key:"oncreate",value:function(e){var t="campaign-editor-"+P.details.campaignId;wp.editor.remove(t);var r={tinymce:{wpautop:!1,toolbar1:"bold, italic, strikethrough, bullist, numlist, blockquote, hr, alignleft, aligncenter, alignright, link, unlink, wp_code, wp_more, spellchecker, fullscreen, wp_adv",toolbar2:"formatselect, underline, alignjustify, forecolor, pastetext, removeformat, charmap, outdent, indent, undo, redo, wp_help",setup:function(e){e.on("init",function(t){e.setContent(P.details.body||"")})}},quicktags:!0,mediaButtons:!0,textarea_rows:40},a=document.getElementById(t);wp.editor.initialize(t,r),tinymce.execCommand("mceAddEditor",!0,t),a.value=P.details.body||"",this.initializeSelect2()}},{key:"onupdate",value:function(){this.initializeSelect2()}},{key:"updateCampaign",value:function(){var e=document.getElementById("campaign-title").value||"",t="campaign-editor-"+P.details.campaignId,r=document.getElementById(t);if(!e)return D.show({status:"error",message:_x("Please add a campaign title","error message when campaign title is missing","affiliate-for-woocommerce")});tinyMCE&&tinyMCE.triggerSave(),P.details.status=document.getElementById("campaign-status").value,P.details.slug=document.getElementById("campaign-slug").value,P.details.targetLink=document.getElementById("campaign-link").value,P.details.shortDescription=document.getElementById("campaign-short").value,P.details.body=wp.editor.getContent(t)||r.value,L.saveCampaign()}},{key:"updateDisplayLInk",value:function(){this.displayLink=Ie.affiliateDisplayLink(P.details.targetLink,P.details.slug,"admin")}},{key:"initializeSelect2",value:function(){var e=this,t=jQuery(".afwc-campaign-rule-search"),r={placeholder:t.attr("placeholder")||"",dropdownParent:jQuery(".afwc-campaign-rule-search-container"),minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:f.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_campaign_controller",cmd:"search_rule_details",security:f.getAFWParams("security.campaign.searchRuleDetails")||""}},processResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e&&jQuery.each(e,function(e,r){var a=r.title,o=r.children,i=r.group,n=[];jQuery.each(o,function(e,t){n.push({id:i+"-"+parseInt(e),text:t})}),t.push({text:a,children:n})}),{results:t}},error:function(e,t,r){return console.log(r+": "+e.responseText),{results:[]}},cache:!0}};t.select2(r),t.on("change.select2",function(r){var a=t.val()||[];P.details.rules=a.length>0?e.formatRulesToSave(a):{}})}},{key:"formatRulesToSave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return{};var t={};return e.map(function(e){var r=e.split("-",2);if(r.length>0){var a=r[0],o=r[r.length-1];t[a]||(t[a]=new Array),t[a].push(parseInt(o))}}),t}},{key:"ruleSearchComponent",value:function(){var e=P.details.ruleMaps||{};return m("div",{class:"afwc-campaign-rule-search-container flex-1 w-full"},m("select",{id:"afwc_campaign_rule_search",class:"afwc-campaign-rule-search form-multiselect wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent",placeholder:_x("Search by affiliates or affiliate tags","placeholder for searching target affiliates for campaign visibility","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%"},Object.keys(e).map(function(t){var r=e[t];return m("optgroup",{label:r.title||r.group||""},r.children?Object.keys(r.children).map(function(e){return m("option",{value:r.group+"-"+e,selected:"selected"},r.children[e]||e)}):"")})))}},{key:"view",value:function(e){var t=this;return this.updateDisplayLInk(),m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index: 100099"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75"}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-5xl"},m("div",{class:"h-full flex flex-col space-y-6 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 py-2 sticky top-0 bg-gray-100",style:"z-index:120001"},m("div",{class:"flex items-center justify-between space-x-3"},m("h2",{class:"text-lg leading-7 font-medium text-gray-900"},P.details.campaignId>0&&m("span",{class:"text-indigo-700"},"#",P.details.campaignId," "),m("span",null,_x("Campaign Detail","Heading of campaign create/edit tab","affiliate-for-woocommerce"))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0 space-x-3"},this.getStatuses()?m("[",null,m("label",{for:"campaign-status",class:"hidden sr-only"},_x("Status","campaign status","affiliate-for-woocommerce")),m("select",{id:"campaign-status",class:"form-select h-10 pl-3 pr-10 py-2 text-base text-gray-500 leading-6 border-transparent sm:text-sm sm:leading-5","aria-label":_x("Select campaign status","Campaign status selection label","affiliate-for-woocommerce")},Object.keys(this.getStatuses()).map(function(e){return m("option",{value:e,selected:P.details.status==e?"selected":""},t.getStatuses(e)||"")}))):"",m("button",{type:"button",class:"inline-flex justify-center px-5 py-2 text-sm text-white font-medium leading-5 border border-transparent rounded-lg bg-indigo-600 transition duration-150 ease-in-out hover:bg-indigo-500 focus:ring focus-visible:outline-none",onclick:function(){return t.updateCampaign()}},_x("Save","campaign save","affiliate-for-woocommerce")),m("button",{type:"button",class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800 focus:ring","aria-label":_x("Delete campaign","Label for delete campaign button","affiliate-for-woocommerce"),onclick:function(){confirm(_x("Are you sure you want to permanently delete this campaign?","confirmation alert for deleting a campaign","affiliate-for-woocommerce"))&&L.deleteCampaign()}},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{class:"text-gray-400 hover:text-gray-500 transition ease-in-out duration-150 rounded-full focus:outline-none focus:ring","aria-label":_x("Close panel","Label for campaign close panel button on admin side","affiliate-for-woocommerce"),onclick:function(){return P.removeCurrentCampaign()}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("div",{class:"h-full space-y-6"},m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-title",class:"text-base font-medium leading-5 text-gray-900"},_x("Name","campaign title","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("A descriptive title for this campaign so affiliates can easily understand purpose of the campaign.","campaign title description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-title",class:"form-input w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:P.details.title||"",oninput:function(e){P.details.title=e.target.value,P.details.slug=e.target.value.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-slug",class:"text-base font-medium leading-5 text-gray-900"},_x("Slug","campaign slug","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Short text in links for this campaign: ","campaign short text description","affiliate-for-woocommerce"),m("code",{class:"font-mono"},this.displayLink||""))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-slug",class:"form-input w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:P.details.slug||"",oninput:function(e){return P.details.slug=e.target.value||""}}))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-link",class:"text-base font-medium leading-5 text-gray-900"},_x("Destination Link","campaign url","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Want to take campaign visitors to a specific product / landing page? Or shop / home page? Enter it here.","campaign destination link description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-link",class:"form-input w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:P.details.targetLink||"",oninput:function(e){return P.details.targetLink=e.target.value||""}}))),m("div",{className:"space-y-1"},m("div",{className:"flex flex-col space-y-2"},m("label",{htmlFor:"afwc_campaign_rule_search",className:"text-base font-medium leading-5 text-gray-900"},_x("Visibility","Label for visibility in campaign editor","affiliate-for-woocommerce")),m("p",{className:"text-xs text-gray-500"},_x("Choose individual affiliates or affiliate tags you want to show this campaign to. Leave it blank to show it to all.","Description for visibility in campaign editor","affiliate-for-woocommerce"))),m("div",{className:"relative rounded-md shadow-sm"},this.ruleSearchComponent())),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-short",class:"text-base font-medium leading-5 text-gray-900"},_x("Short Description","campaign short description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("This will show along with campaign name before people see all the details. Summarize the campaign here.","campaign short description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("textarea",{id:"campaign-short",class:"form-input w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",rows:"3"},P.details.shortDescription||""))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-editor-"+P.details.campaignId,class:"text-base font-medium leading-5 text-gray-900"},_x("Full Description","campaign description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Use this editor to insert all the details, rules, creatives, swipes, videos, guidelines or anything else you want to present to affiliate partners. Format it well so that they can easily copy out for their own usage.","campaign full description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("If you prefer, create a .zip file with multiple assets. Upload it to your WordPress Media, and link the file from here. You can also link to any external resources as usual.","campaign full description","affiliate-for-woocommerce"))),m("div",{class:"relative pt-3"},m("textarea",{id:"campaign-editor-"+P.details.campaignId,class:"wp-editor-area",style:"height: 300px;",autocomplete:"off",row:"60",cols:"40"},P.details.body||"")))))))),D.flags.showNotification?m(Ua,null):null)))}}],a=[{key:"displayLink",get:function(){return e._displayLink},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e._displayLink=t}}],r&&ao(t.prototype,r),a&&ao(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function so(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lo(a.key),a)}}function lo(e){var t=function(e,t){if("object"!=no(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=no(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==no(t)?t:t+""}var co=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},P.currentCampaignID=0},t=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new P}},{key:"showCampaignDetails",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;parseInt(t)?parseInt(t)!==parseInt(P.currentCampaignID)&&w.data.campaigns&&((null===(e=w.data.campaigns.filter(function(e){return e.campaignId==t}))||void 0===e?void 0:e[0])?(P.currentCampaignID=t||0,this.refreshModel(t)):P.removeCurrentCampaign()):P.currentCampaignID=0}},{key:"maybeShowCampaignDetails",value:function(e){var t;(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)&&this.showCampaignDetails(e.attrs.id)}},{key:"view",value:function(e){return this.maybeShowCampaignDetails(e),m("section",null,m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8"},_x("Campaigns","Campaigns screen headline","affiliate-for-woocommerce")),m("ul",{class:"text-gray-600 py-3 max-h-screen overflow-auto"},w.data.campaigns.map(function(e){return m("li",{class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){return e.campaignId?m.route.set("/campaigns/:id",{id:e.campaignId}):""}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(P.currentCampaignID==e.campaignId?" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:("Draft"===e.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},e.title||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-nowrap"},m("span",{"aria-label":_x("Campaign ID","Campaign ID label","affiliate-for-woocommerce"),class:"mr-2 text-gray-400"},"#",e.campaignId||0),m("span",{"aria-label":_x("Campaign Status","Campaign Status label","affiliate-for-woocommerce"),class:"Draft"===e.status?"text-gray-400":"text-emerald-500"},f.getCampaignStatus(e.status)||""," ")),m("span",{"aria-label":_x("Visibility:","Title for visibility of the campaign in the campaign list","affiliate-for-woocommerce"),class:"mr-2 text-gray-400"},_x("Visibility:","Title for visibility of the campaign in the campaign list","affiliate-for-woocommerce")," ","object"===no(e.rules)&&Object.keys(e.rules).length>0?_x("Restricted","Visibility label where rules are applied in the campaigns","affiliate-for-woocommerce"):_x("All","Visibility label where none of any rule applied in the campaigns","affiliate-for-woocommerce")))),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))})),0!==P.currentCampaignID?m(io,{id:P.currentCampaignID}):"")}}],t&&so(e.prototype,t),r&&so(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function fo(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mo(a.key),a)}}function mo(e){var t=function(e,t){if("object"!=uo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=uo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uo(t)?t:t+""}P.currentCampaignID=0;var po=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"view",value:function(e){var t;return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(co,{id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0})),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-12 pr-8"},m("p",null,_x("Campaigns help you organize all your marketing assets, promotional materials, and instructions you need to provide to your affiliate partners.","description of campaigns feature and usage","affiliate-for-woocommerce")),m("p",null,_x("Your affiliates can view these campaigns under their My Account > Affiliates > Campaigns tab. This tab will be automatically hidden when there are no active campaigns.","description of campaigns feature and visibility for affiliates","affiliate-for-woocommerce")),m("p",null,m("a",{class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-marketing-campaigns/"},_x("How to create affiliate marketing campaigns","documentation link to campaigns feature","affiliate-for-woocommerce"))),m("hr",null),m("p",null,_x("After activation, the plugin adds a few sample campaigns to help you quickly get started.","description of campaigns re-generate feature","affiliate-for-woocommerce")),m("p",null,_x("You can easily re-import these campaigns with just a click. Simply ","description of campaigns to re-import","affiliate-for-woocommerce"),m("a",{href:"",class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",onclick:function(e){e.preventDefault(),L.regenerateSampleCampaigns()}},_x("re-generate sample campaigns","link to re-generate sample campaigns","affiliate-for-woocommerce")))))}}],t&&fo(e.prototype,t),r&&fo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function go(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vo(a.key),a)}}function vo(e){var t=function(e,t){if("object"!=yo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=yo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yo(t)?t:t+""}var ho=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)},t=[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new w(this.urlParams)}},{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(e){var t;return m("div",null,m(Mt,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),w.data.campaigns.length>0?m("[",null,m(to,null),m(po,{id:(null==e||null===(t=e.attrs)||void 0===t?void 0:t.id)||0})):g.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},_x("No campaigns yet.","description for no campaigns exist","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,_x('Go ahead, click that "Add a Campaign" button in the top bar to create your first campaign.',"description of add campaign","affiliate-for-woocommerce")),m("p",null,_x("You can easily import sample campaigns with just a click - ","description of campaigns to re-import","affiliate-for-woocommerce"),m("a",{href:"",class:"cursor-pointer text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 hover:underline",onclick:function(e){e.preventDefault(),L.regenerateSampleCampaigns()}},_x("Generate sample campaigns","link to generate sample campaigns","affiliate-for-woocommerce"))))),-1===P.currentCampaignID?m(io,{id:P.currentCampaignID}):""),D.flags.showNotification?m(Ua,null):null)}}],t&&go(e.prototype,t),r&&go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function bo(e){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(e)}function wo(e){return function(e){if(Array.isArray(e))return ko(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,i,n,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=i.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw o}}return s}}(e,t)||_o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){if(e){if("string"==typeof e)return ko(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ko(e,t):void 0}}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Po(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,So(a.key),a)}}function So(e){var t=function(e,t){if("object"!=bo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=bo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bo(t)?t:t+""}var jo=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t)},t=[{key:"oncreate",value:function(){this.initializeSelect2()}},{key:"onupdate",value:function(e){var t;this.index=null==e||null===(t=e.attrs)||void 0===t?void 0:t.index,this.initializeSelect2()}},{key:"getDetails",value:function(){return{type:this.type,operator:this.operator,value:this.value,key:this.key,meta:this.meta}}},{key:"resetRuleValueField",value:function(){var e,t;this.value="",this.options=(null==U||null===(e=U.allRules[this.type])||void 0===e?void 0:e.options)||{},this.inputProps=(null==U||null===(t=U.allRules[this.type])||void 0===t?void 0:t.inputProps)||{},jQuery("#"+this.select_id).val(this.value).trigger("change"),this.initializeSelect2()}},{key:"refreshValues",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.type=r,this.possibleOperators=(null==U||null===(e=U.allRules[this.type])||void 0===e?void 0:e.possibleOperators)||{},this.operator=(null==this||null===(t=this.possibleOperators[0])||void 0===t?void 0:t.op)||"",this.resetRuleValueField(),this.informParent()}},{key:"getInputPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";if(""===e)return t;var r=(f.getAFWParams("plan_dashboard_data")||{}).plan_rule_data;for(var a in r)for(var o in r[a]){var i;e===o&&r[a][o]&&(t=(null===(i=r[a][o])||void 0===i?void 0:i.placeholder)||"")}return t}},{key:"initializeSelect2",value:function(){var e,t,r=this,a=this.type||"",o=this.options&&Object.keys(this.options).length>0,i=jQuery("#"+this.select_id),n=(null===(e=this.possibleOperators.find(function(e){return e.op===r.operator}))||void 0===e?void 0:e.type)||(null===(t=this.possibleOperators[0])||void 0===t?void 0:t.type)||"",s=(this.inputProps||{}).type,l=void 0===s?"text":s;i.parent().find(".select2").remove();var c=i.parent().find(".afwc-rule-value-select option");if(c&&c.length)for(var u=new Set,d=0;d<c.length;d++){var p=c[d];u.has(p.value)?p.remove():u.add(p.value)}if("select"===l){"multi"!==n&&i.removeAttr("multiple");var y,g={placeholder:this.getInputPlaceholder(a)||_x("Search for a value","placeholder","affiliate-for-woocommerce"),dropdownParent:jQuery("#afwc-commission-details"),escapeMarkup:function(e){return e}};o?(i.html(""),Object.entries(this.options).map(function(e){var t,a=xo(e,2),o=a[0],n=a[1];i.append(new Option(n,o,!0,null==r||null===(t=r.value)||void 0===t?void 0:t.includes(o)))}),null!=this&&null!==(y=this.value)&&void 0!==y&&y.length||(this.value="single"===n&&"select"===l?Object.keys(this.options)[0]:"")):(g.ajax={url:ajaxurl,dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",type:a||"",action:"afwc_json_search_rule_values",security:f.getAFWParams("security.commissions.searchPlan")||""}},processResults:function(e){var t=[];return e&&jQuery.each(e,function(e,r){t.push({id:e,text:r})}),{results:t}},cache:!0},g.minimumInputLength="affiliate_tag"===a?1:3),i.select2(g),i.off("change").on("change",function(e){r.value="multi"===n?wo(new Set(i.val())):i.val(),r.meta.ruleTitles={},i.select2("data").map(function(e){var t=e.id,a=e.text;t&&(r.meta.ruleTitles[t]=a)}),r.informParent(),m.redraw()})}}},{key:"shouldRenderRule",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t||"_meta"===t)return!1;var r=(null===(e=U.allRules[t])||void 0===e?void 0:e._matchingRules)||[];if(r&&r.length>=2)if(r.includes(this.type)){if(t!==this.type)return!1}else{var a=r.find(function(e){var t;return((null===(t=U.allRules[e])||void 0===t?void 0:t.possibleOperators)||[]).some(function(t){return"eq"===t.op&&t.ruleKey===e})});if(a&&t!==a)return!1}return!0}},{key:"renderFieldSelect",value:function(e){var t=this,r=(f.getAFWParams("plan_dashboard_data")||{}).plan_rule_data,a=this.type||"";return m("select",{"aria-label":_x("Select rule","Rule selection","affiliate-for-woocommerce"),class:"afwc-rule-select h-10 py-1 pl-3 pr-8 text-sm font-medium leading-5 capitalize text-gray-700 bg-transparent form-select",onchange:function(e){t.refreshValues(e.target.value)}},Object.entries(r).map(function(e){var r,o=xo(e,2),i=o[0],n=o[1];return m("optgroup",{key:i,label:(null===(r=n._meta)||void 0===r?void 0:r.title)||i},Object.entries(n).filter(function(e){var r=xo(e,1)[0];return t.shouldRenderRule(r)}).map(function(e){var t=xo(e,2),r=t[0],o=t[1];return m("option",{key:r,value:r,selected:a===r},o.title||r)}))}))}},{key:"renderOperatorSelect",value:function(e){var t=this,r=this.operator||"";return m("select",{"aria-label":_x("Select operator","Operator selection","affiliate-for-woocommerce"),class:"h-10 py-1 pl-3 w-24 min-w-24 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select",onchange:function(e){t.listenOpChange(e)}},this.possibleOperators.map(function(e){return m("option",{value:e.op,selected:r===e.op?"selected":""},e.label)}))}},{key:"listenOpChange",value:function(e){var t,r,a=this;this.operator=e.target.value;var o,i=this.possibleOperators.filter(function(e){return a.operator==e.op});this._operator=i.length>0?i[0]:{},null!==(t=this._operator)&&void 0!==t&&t.ruleKey&&(null===(r=this._operator)||void 0===r?void 0:r.ruleKey)!=this.type&&(this.type=null===(o=this._operator)||void 0===o?void 0:o.ruleKey,this.resetRuleValueField()),this.informParent()}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"deleteRule",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"renderValues",value:function(){var e,t,r=this,a=void 0!==this.meta.ruleTitles&&(this.meta.ruleTitles.length>0||Object.keys(this.meta.ruleTitles).length>0)?this.meta.ruleTitles:this.type in U.idNameMaps&&U.idNameMaps[this.type]||{},o=(null===(e=this.possibleOperators.find(function(e){return e.op===r.operator}))||void 0===e?void 0:e.type)||(null===(t=this.possibleOperators[0])||void 0===t?void 0:t.type)||"single",i=this.inputProps||{},n=i.type,s=void 0===n?"text":n,l=i.allowed_decimal,c=void 0===l?"no":l;return"select"===s&&"multi"===o?this.renderMultiSelect(a):"select"===s?this.renderSingleSelect(a):this.renderDefaultInput(s,"yes"===c)}},{key:"renderMultiSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m("select",{id:this.select_id,class:"afwc-rule-value-select form-multiselect w-full max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent","data-action":"afwc_json_search_rule_values",multiple:!0},m("optgroup",null,Array.isArray(this.value)?this.value.map(function(t){return e[t]?m("option",{value:t,selected:!0},e[t]):""}):""))}},{key:"renderSingleSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m("select",{id:this.select_id,class:"afwc-rule-value-select form-select w-full max-w-full h-10 py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent"},m("optgroup",null,this.value?m("option",{value:this.value,selected:!0},e[this.value]):""))}},{key:"renderDefaultInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m("input",{class:"form-input w-full max-w-full h-10 py-1 text-sm leading-5 text-gray-700",type:t,value:this.value||"",placeholder:this.getInputPlaceholder(this.type)||"",step:"number"===t&&(r?"0.01":"1"),oninput:function(a){var o=a.target,i=void 0===o?{}:o;e.value="number"!==t||r?i.value:i.value.replace(/[^0-9]/g,""),e.informParent()}})}},{key:"addConditionRow",value:function(e){var t=this;return m("div",{class:"flex items-center gap-2 w-full"},this.renderFieldSelect(e),this.renderOperatorSelect(e),m("div",{class:"flex-1 relative"},this.renderValues(e)),m("div",{class:"shrink-0"},m("button",{type:"button",onclick:function(){return t.deleteRule()},class:(this.isOnlyOne?"invisible":"")+" flex items-center justify-center p-1 text-xs leading-5 text-gray-300 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:ring-red focus:border-red-600"},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))))))}},{key:"initialize",value:function(e){var t,r,a=this;this.ruleRow=e.attrs.ruleRow,this.type=e.attrs.ruleRow.type,this.index=e.attrs.index,this.key=e.attrs.key,this.operator=e.attrs.ruleRow.operator,this.value=e.attrs.ruleRow.value||[],this.callbackToParent=e.attrs.callbackToParent,this.possibleOperators=(null==U||null===(t=U.allRules[this.type])||void 0===t?void 0:t.possibleOperators)||[],this.options=U.allRules[this.type].options||{},this.inputProps=(null==U||null===(r=U.allRules[this.type])||void 0===r?void 0:r.inputProps)||{},this.isOnlyOne=e.attrs.isOnlyOne;var o=this.possibleOperators.length>0?this.possibleOperators.filter(function(e){return a.operator==e.op}):[];this._operator=o.length>0?o[0]:{},this.select_id=Math.random().toString(36).slice(7),this.meta=e.attrs.ruleRow.meta||{ruleTitles:{}}}},{key:"view",value:function(e){return this.initialize(e),this.isOnlyOne=e.attrs.isOnlyOne,m("[",null,this.addConditionRow(this.ruleRow))}}],t&&Po(e.prototype,t),r&&Po(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Do(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Co(a.key),a)}}function Co(e){var t=function(e,t){if("object"!=Oo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Oo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oo(t)?t:t+""}var Ao=function(){return e=function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbackToParent=t.attrs.callbackToParent,this.index=t.attrs.index,this.rules=this.filterRules((null==t||null===(r=t.attrs)||void 0===r||null===(r=r.ruleGroup)||void 0===r?void 0:r.rules)||[]),this.key=t.attrs.key,this.rules=this.rules.map(function(e){return e.key=Math.random().toString(36).slice(7),e}),this.ruleGroupCondition=t.attrs.ruleGroup.condition},t=[{key:"updateData",value:function(e,t,r){"update"==t?this.rules[r]=e:"delete"==t&&this.rules.splice(r,1),this.informParent()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"addNewRule",value:function(){var e=JSON.parse(JSON.stringify(U.ruleRow));e.key=Math.random().toString(36).slice(7),this.rules.push(e),this.informParent()}},{key:"getDetails",value:function(){return{condition:this.ruleGroupCondition,rules:this.rules,key:this.key}}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"addNewRuleGroup",value:function(){this.callbackToParent(null,"add",null)}},{key:"deleteRuleGroup",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"filterRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||null==e||!e.length)return[];var t=this.getActiveRules();return t&&null!=t&&t.length?e.filter(function(e){return t.includes(e.type)}):e}},{key:"getActiveRules",value:function(){var e=(f.getAFWParams("plan_dashboard_data")||{}).plan_rule_data,t=[];if(e)for(var r in e)for(var a in e[r])t.push(a);return t}},{key:"view",value:function(e){var t=this;return m("div",{class:"px-4 pt-3 pb-2 mb-6 space-y-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"flex items-center gap-2 text-xs text-gray-400"}," ",m("span",null,__('This group is a "pass" when',"affiliate-for-woocommerce")),m("div",{class:"flex items-center"},m("select",{"aria-label":_x("Rule condition","Rule condition selection","affiliate-for-woocommerce"),class:"h-10 py-0.5 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select text-xs",onchange:function(e){t.ruleGroupCondition=e.target.value,t.informParent()}},m("option",{value:"AND",selected:"AND"===this.ruleGroupCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"===this.ruleGroupCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null," ",__("of the following rules are true.","affiliate-for-woocommerce")," ")," "),this.rules.map(function(e,r){return m(jo,{key:e.key,isOnlyOne:1===t.rules.length,index:r,callbackToParent:t.updateData.bind(t),ruleRow:e})}),m("div",{class:"flex items-center gap-6 pt-1"},m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-emerald-700 hover:border-emerald-700 focus:outline-none focus:ring focus:ring-emerald-200 focus:border-emerald-700",onclick:function(){t.addNewRule()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})))," ",__("Add a rule","affiliate-for-woocommerce")," ")," ",m("span",{class:"flex-1"}),m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-indigo-600 hover:border-indigo-600 focus:outline-none focus:ring focus:ring-indigo-200 focus-visible:outline-none focus:border-indigo-600",onclick:function(){t.addNewRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})))," ",__("Add another group","affiliate-for-woocommerce")," "),e.attrs.isOnlyOne?"":m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:ring-red focus:border-red-600",onclick:function(){t.deleteRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}))),__("Remove this group","affiliate-for-woocommerce"))))}}],t&&Do(e.prototype,t),r&&Do(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function To(e){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(e)}function Lo(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Io(a.key),a)}}function Io(e){var t=function(e,t){if("object"!=To(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=To(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==To(t)?t:t+""}var Eo=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"renderDistribution",value:function(){for(var e=[],t=0;t<=parseInt(U.details.no_of_tiers||0)-2;t++)e.push(U.details.distribution[t]||"");U.details.distribution=e;var r=1,a="Flat"===U.details.type?f.getAFWParams("storeCurrencyCode"):"%",o=U.details.no_of_tiers-2;return m("[",null,m("div",{class:"odd-tier my-2 inline-block w-1/2"},m("label",{for:"tier-1",class:"inline-block align-baseline font-medium"},_x("Tier 1","Label for Tier 1 distribution","affiliate-for-woocommerce"),":"),m("input",{id:"tier-1",class:"inline-block ml-3 my-2 mr-1 w-1/2 text-base font-small leading-4 text-gray-700 form-input cursor-not-allowed",type:"number",name:"commission_tier",value:U.details.amount,readonly:!0,style:"background-color: #f0f0f1;"}),m("span",{class:"inline-block text-gray-400"},a)),Object.keys(U.details.distribution).map(function(e,t){return m("div",{class:(t%2==0?"even-tier":"odd-tier")+" my-2 inline-block w-1/2"},m("label",{for:"tier-".concat(++r),class:"inline-block align-baseline font-medium"},sprintf(_x("Tier %d","Label for parent distribution","affiliate-for-woocommerce"),r),":"),m("input",{id:"tier-".concat(r),oninput:function(e){U.details.distribution[t]=e.target.value||""},class:(0==t%2&&o===t&&8===t?"ml-1":"ml-3")+" inline-block my-2 mr-1 w-1/2 text-base font-small leading-4 text-gray-700 form-input",type:"number",name:"commission_tier",value:U.details.distribution[t]}),m("span",{class:"inline-block text-gray-400"},a))}),m("div",{class:"my-3 text-gray-700"},_x("Total commissions: ","Title for total commission across tiers","affiliate-for-woocommerce"),m("span",{class:"font-medium"},this.distributionSum()," ",a)))}},{key:"distributionSum",value:function(){for(var e=U.details.amount?parseFloat(U.details.amount):0,t=0,r=Object.values(U.details.distribution);t<r.length;t++){var a=r[t];e+=isNaN(parseFloat(a))?0:parseFloat(a)}return f.formatNumber(e||0)}},{key:"view",value:function(){var e=this;return m("div",{class:"mt-3"},m("div",{class:"text-gray-700"},m("label",{for:"no_of_tiers",class:"font-medium my-3 py-2"},_x("Multi-level commission? How many tiers?","Label for setting number of tier for multi-tier commission","affiliate-for-woocommerce")),m("input",{class:"w-2/5 text-gray-700 form-input my-2 sm:text-sm sm:leading-5",type:"number",min:"1",max:"10",oninput:function(t){U.details.no_of_tiers=t.target.value||"",e.renderDistribution()},id:"no_of_tiers",value:U.details.no_of_tiers||""})),parseInt(U.details.no_of_tiers||0)>1?m("[",null,m("div",{class:"my-3 text-gray-700"},_x("Tier-wise commission distribution","Title for multi-tier commission and distribution","affiliate-for-woocommerce")),this.renderDistribution()):" ")}}],t&&Lo(e.prototype,t),r&&Lo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function Mo(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,No(a.key),a)}}function No(e){var t=function(e,t){if("object"!=Fo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Fo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fo(t)?t:t+""}var Ro=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.planCondition=U.details.rules.condition?U.details.rules.condition:"AND",this.ruleGroups=U.details.rules.rules?U.details.rules.rules:[U.ruleGroup],this.id=U.details.id,this.name=U.details.name,this.type=U.details.type||"Percentage",this.amount=U.details.amount,this.status=U.details.status||"Active",this.apply_to=U.details.apply_to||"all",this.action_for_remaining=U.details.action_for_remaining||"continue",this.ruleGroups=this.ruleGroups.map(function(e){return e.key=Math.random().toString(36).slice(7),e}),this.getStatuses=f.getCommissionPlansStatus},t=[{key:"addNewRuleGroup",value:function(){var e=JSON.parse(JSON.stringify(U.ruleGroup));e.key=Math.random().toString(36).slice(7),this.ruleGroups.push(e)}},{key:"updateData",value:function(e,t,r){"update"==t?this.ruleGroups[r]=e:"add"==t?this.addNewRuleGroup():"delete"==t&&this.ruleGroups.splice(r,1)}},{key:"checkEmptyRule",value:function(){return this.ruleGroups.filter(function(e){return e.rules.filter(function(e){return void 0===e.value||0===e.value.length}).length>0}).length>0}},{key:"amountErrorMessageContainer",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""){case"empty":return null===e?_x("Empty commission amount is not allowed","error message when no commission amount is set in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission amount cannot be empty for Tier %d","error message when the commission amount is empty for any tier in the commission plan","affiliate-for-woocommerce"),e+2);case"negative":return null===e?_x("Negative commission amount is not allowed","error message when negative commission amount is set in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission amount cannot be negative for Tier %d","error message when the commission amount is negative for any tier in the commission plan","affiliate-for-woocommerce"),e+2);case"percentage":return null===e?_x("The commission percentage cannot be greater than 100","error message when the commission percentage is greater than 100 in the commission plan","affiliate-for-woocommerce"):sprintf(_x("The commission percentage cannot be greater than 100 for Tier %d","error message when the commission percentage is greater than 100 for any tier in the commission plan","affiliate-for-woocommerce"),e+2);default:return""}}},{key:"validateCommissionAmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return isNaN(parseFloat(e))?this.amountErrorMessageContainer("empty",r):-1===Math.sign(e)?this.amountErrorMessageContainer("negative",r):"Percentage"===t&&parseFloat(e)>100?this.amountErrorMessageContainer("percentage",r):null}},{key:"validateCommission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e.name||void 0===e.amount||void 0===e.type||void 0===e.distribution)return D.show({status:"error",message:_x("Something went wrong. The commission data was not found correctly.","error message when commission data missing details","affiliate-for-woocommerce")}),!1;if(!e.name)return D.show({status:"error",message:_x("Please add a commission title","error message when commission title is empty in the commission plan","affiliate-for-woocommerce")}),!1;if(this.checkEmptyRule()&&parseInt(this.id)!==parseInt(f.getAFWParams("default_plan_id")||0))return D.show({status:"error",message:_x("Empty rule values are not allowed","error message when there are no rules in the commission plan","affiliate-for-woocommerce")}),!1;var t=this.validateCommissionAmount(e.amount,e.type,null);if(t)return D.show({status:"error",message:t}),!1;if(Array.isArray(e.distribution)&&e.distribution.length>0)for(var r=0;r<e.distribution.length;r++){var a=this.validateCommissionAmount(e.distribution[r],e.type,r);if(a)return D.show({status:"error",message:a}),!1}return!0}},{key:"updateCommission",value:function(){var e=this.getDetails();this.validateCommission(e)&&(e.rules.rules=e.rules.rules.map(function(e){return e.rules=e.rules.map(function(e){return delete e.key,e}),delete e.key,e}),U.details=e,U.saveCommission())}},{key:"getDetails",value:function(){var e={};return e.rules={condition:this.planCondition,rules:this.ruleGroups},e.name=U.details.name,e.amount=U.details.amount,e.type=U.details.type,e.status=U.details.status,e.apply_to=U.details.apply_to,e.action_for_remaining=U.details.action_for_remaining,e.no_of_tiers=U.details.no_of_tiers,e.distribution=U.details.distribution,e.id=U.details.id,e}},{key:"view",value:function(e){var t=this;return m("aside",{id:"afwc-commission-details",style:"z-index: 100099;",class:"fixed inset-x-0 bottom-0 lg:inset-0 lg:flex lg:items-center lg:justify-end"},m("div",{class:"fixed inset-0 transition-opacity"},m("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),m("section",{class:"w-full h-full max-w-7xl max-h-full mt-12 overflow-scroll transition-all transform bg-gray-50 afw-lg:ml-1/6 lg:mt-0"},m("div",{class:"sticky top-0 z-10 w-full bg-gray-100"},m("nav",{class:"px-4 py-2 xl:px-4 lg:py-2"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center flex-1 gap-2"},m("label",{for:"name",class:"text-base font-medium text-gray-700"},U.details.id>0&&m("span",{class:"text-indigo-700"},"#",U.details.id," "),m("span",null,_x("Name","Commission plan name/title","affiliate-for-woocommerce"))),m("input",{"aria-label":_x("Plan name","plan name","affiliate-for-woocommerce"),id:"name",class:"flex-1 h-10 text-xl leading-7 text-gray-700 form-input",placeholder:_x("Enter a name for this commission plan","Commission plan name/title placeholder","affiliate-for-woocommerce"),value:U.details.name||"",oninput:function(e){U.details.name=e.target.value}})),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center gap-4 ml-4 lg:ml-2"},this.getStatuses()?m("[",null,m("label",{for:"commission-status",class:"hidden sr-only"},_x("Status","Commission status label","affiliate-for-woocommerce")),m("select",{id:"commission-status",disabled:parseInt(U.details.id)===parseInt(f.getAFWParams("default_plan_id")||0)?"disabled":"",class:"h-10 form-select pl-3 pr-10 py-2 text-base leading-6 border-gray-100 focus:outline-none focus:ring-blue focus:border-blue-100 sm:text-sm sm:leading-5 text-gray-500 disabled:bg-none","aria-label":_x("Commission status","Commission status dropdown","affiliate-for-woocommerce"),onchange:function(e){U.details.status=e.target.value}},Object.keys(this.getStatuses()).map(function(e){return m("option",{value:e,selected:U.details.status==e?"selected":""},t.getStatuses(e)||"")}))):"",m("span",{class:"rounded-md"},m("button",{onclick:function(){return t.updateCommission()},type:"button",class:"inline-flex justify-center px-5 py-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-200 focus-visible:outline-none"},_x("Save","Button label to save commission plan","affiliate-for-woocommerce"))),parseInt(U.details.id)===parseInt(f.getAFWParams("default_plan_id")||0)?"":m("button",{onclick:function(){confirm(_x("Are you sure you want to permanently delete this plan?","confirmation alert for deleting a commission plan","affiliate-for-woocommerce"))&&U.deleteCommission()},type:"button","aria-label":_x("Delete plan","Delete plan icon","affiliate-for-woocommerce"),class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800 focus:ring"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{onclick:function(){U.currentCommissionID=0},class:"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100 focus:ring","aria-label":_x("Close plan","Close plan icon","affiliate-for-woocommerce")},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"})))))))),m("div",{class:"grid grid-cols-12 gap-8 p-8 text-gray-600"},m("div",{class:"col-span-4 text-sm leading-5"},m("label",{for:"commission",class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Commission","Title for commission amount and type","affiliate-for-woocommerce")),m("div",{class:"relative rounded-md shadow-sm mb-3"},m("input",{id:"commission",class:"block w-full pl-2 pr-36 form-input sm:text-sm sm:leading-5",type:"number",autocomplete:"off",placeholder:"20.00",value:U.details.amount,oninput:function(e){U.details.amount=e.target.value}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center"},m("select",{"aria-label":_x("Commission Type","Commission plan type","affiliate-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent border-transparent form-select sm:text-sm sm:leading-5 w-36",id:"commission_type",onchange:function(e){U.details.type=e.target.value}},m("option",{value:"Percentage",selected:"Percentage"==U.details.type?"selected":""},_x("Percentage (%)","Commission plan type: percentage","affiliate-for-woocommerce")),m("option",{value:"Flat",selected:"Flat"==U.details.type?"selected":""},f.getAFWParams("storeCurrencyCode")?sprintf(_x("Flat (%s)","Commission plan type: flat with store currency code","affiliate-for-woocommerce"),f.getAFWParams("storeCurrencyCode")):_x("Flat","Commission plan type: flat","affiliate-for-woocommerce"))))),f.getAFWParams("isMultiTierEnabled")?m(Eo,null):""),m("div",{class:"col-span-8 text-sm leading-5 text-gray-500"},parseInt(U.details.id)!==parseInt(f.getAFWParams("default_plan_id")||0)?m("[",null,m("div",{class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Rules","Title for commission rules","affiliate-for-woocommerce")),m("div",{class:"px-4 py-3 mb-6 space-y-3 rounded-md"},m("div",{class:"flex items-baseline gap-2 mb-3 -mt-1"},m("div",{class:"mb-3"},_x("When","Title for main rule condition","affiliate-for-woocommerce")),m("div",{class:"inline-flex items-center gap-2 text-sm text-gray-500"},m("div",{class:"flex items-center"},m("select",{"aria-label":_x("Rule group condition","Rule group condition selection","affiliate-for-woocommerce"),class:"h-10 py-1 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select sm:text-sm sm:leading-5",onchange:function(e){t.planCondition=e.target.value}},m("option",{value:"AND",selected:"AND"==this.planCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"==this.planCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null,_x("rule groups pass","Message for main rule condition","affiliate-for-woocommerce")))),this.ruleGroups.map(function(e,r){return m(Ao,{key:e.key,index:r,isOnlyOne:1===t.ruleGroups.length,callbackToParent:t.updateData.bind(t),ruleGroup:e})}))):"",parseInt(U.details.id)!==parseInt(f.getAFWParams("default_plan_id")||0)?m("[",null,m("div",{class:"pb-1 mb-3 border-b-2 border-gray-300 text-base font-medium text-gray-700"},_x("Actions","Title for commission actions","affiliate-for-woocommerce")),m("div",{class:"mb-6"},m("div",{class:"px-4 py-3 space-y-3"},m("div",{class:"px-4 py-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"mb-2 font-medium text-gray-700"},_x("Apply to","Title for commission action - apply to","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.apply_to).map(function(e,t){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"apply_to",value:e,onchange:function(e){U.details.apply_to=e.target.value},checked:U.details.apply_to===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.apply_to[e]))})))),m("div",{class:"px-4 py-3 mb-6 space-y-3"},m("div",{class:"px-4 py-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"mb-2 font-medium text-gray-700"},_x("And then, for remaining products in the order...","Title for commission action on the remaining products","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.action_for_remaining).map(function(e,t){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"action_for_remaining",value:e,onchange:function(e){U.details.action_for_remaining=e.target.value},checked:U.details.action_for_remaining===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.action_for_remaining[e]))})))))):""))))}}],t&&Mo(e.prototype,t),r&&Mo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function zo(e){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(e)}function Wo(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return Bo(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Bo(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Bo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,Bo(f,"constructor",c),Bo(c,"constructor",l),l.displayName="GeneratorFunction",Bo(c,o,"GeneratorFunction"),Bo(f),Bo(f,o,"Generator"),Bo(f,a,function(){return this}),Bo(f,"toString",function(){return"[object Generator]"}),(Wo=function(){return{w:i,m}})()}function Bo(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Bo=function(e,t,r,a){function i(t,r){Bo(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},Bo(e,t,r,a)}function qo(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function Ho(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Go(a.key),a)}}function Go(e){var t=function(e,t){if("object"!=zo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=zo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zo(t)?t:t+""}var Vo=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.currentDraggingItem=null,this.currentOrderString=null,this.showSaveBtn=null,this.defaultPlanId=parseInt(f.getAFWParams("default_plan_id")||0)},t=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new U}},{key:"dragStart",value:function(e,t){parseInt(t.id)!==this.defaultPlanId?(this.currentDraggingItem=t,this.currentOrderString||(this.currentOrderString=JSON.stringify(M.data.planOrder)),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",null)):e.preventDefault()}},{key:"drop",value:function(e,t){e.preventDefault();var r=parseInt(t.id);if(r!==parseInt(this.currentDraggingItem.id)){var a=M.data.planOrder.indexOf(parseInt(this.currentDraggingItem.id)),o=M.data.planOrder.indexOf(r);M.data.planOrder.splice(o,0,M.data.planOrder.splice(a,1)[0]),M.reOrder(),this.currentOrderString!=JSON.stringify(M.data.planOrder)?this.showSaveBtn=!0:this.showSaveBtn=!1}}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"savePlanOrder",value:(a=Wo().m(function e(){return Wo().w(function(e){for(;;)switch(e.n){case 0:if(M.data.planOrder&&0!==M.data.planOrder.length){e.n=1;break}return e.a(2);case 1:return M.data.planOrder=M.data.planOrder.filter(function(e){return Object.values(M.data.commissions).some(function(t){return parseInt(t.id)===parseInt(e)})}),e.n=2,M.savePlanOrder();case 2:this.showSaveBtn=!1,D.show({status:"success",message:_x("Plan order saved successfully","success message after saving commission plan order","affiliate-for-woocommerce")}),this.currentOrderString=JSON.stringify(M.data.planOrder);case 3:return e.a(2)}},e,this)}),o=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=a.apply(e,t);function n(e){qo(i,r,o,n,s,"next",e)}function s(e){qo(i,r,o,n,s,"throw",e)}n(void 0)})},function(){return o.apply(this,arguments)})},{key:"view",value:function(){var e=this;return m("section",null,m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8"},_x("Commission Plans","Commission plans screen headline","affiliate-for-woocommerce")),m("div",{class:"text-right px-2"},m("a",{class:(this.showSaveBtn?"opacity-100 cursor-allowed":"opacity-50 cursor-not-allowed focus:outline-none")+" text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",href:"#",onclick:function(t){t.preventDefault(),e.showSaveBtn?e.savePlanOrder():t.stopPropagation()}},this.showSaveBtn?_x("Save plan order","Label to save commission plan order once sorted","affiliate-for-woocommerce"):_x("Drag the plans to change the order","Label to save commission plan order once sorted","affiliate-for-woocommerce"))),m("ul",{class:"text-gray-600 py-2 max-h-screen overflow-auto"},M.data.commissions.map(function(t){return m("li",{"data-id":t.id,class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){U.currentCommissionID=t.id,e.refreshModel(U.currentCommissionID)},draggable:parseInt(t.id)!==e.defaultPlanId,ondragstart:function(r){e.dragStart(r,t)},ondrop:function(r){return e.drop(r,t)},ondragover:function(t){e.dragOver(t)}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(U.currentCommissionID==t.id?" bg-white outline-none":"")},m("div",{class:"flex pl-4 py-2"},m("div",{class:"mx-2 mt-1 w-4 h-4"},parseInt(t.id)!==e.defaultPlanId&&m("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"}))),m("div",{class:("Draft"===t.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},t.name||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-nowrap"},m("span",{class:"mr-2 text-gray-400"},"#",t.id||0),m("span",{class:"Draft"===t.status?"text-gray-400":"text-emerald-500"},f.getCampaignStatus(t.status)||""," ")))),m("div",{class:"mx-2 self-center"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))})),0!==U.currentCommissionID?m(Ro,{id:U.currentCommissionID}):"",D.flags.showNotification?m(Ua,null):null)}}],t&&Ho(e.prototype,t),r&&Ho(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,a,o}();function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function Uo(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Jo(a.key),a)}}function Jo(e){var t=function(e,t){if("object"!=Ko(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Ko(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ko(t)?t:t+""}U.currentCommissionID=0;var Yo=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(e){return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(Vo,null)),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-20 pr-8"},m("p",null,__("While calculating affiliate commission, plans are validated one after the other, starting from the top. Drag and Drop to reorder and prioritize plans. Click on Save Order to save.","affiliate-for-woocommerce")),m("p",null,__("The affiliate commission is calculated based on the order's subtotal. It does not consider taxes, shipping costs, or discounts from coupons.","affiliate-for-woocommerce")),m("p",null,_x("Note: The storewide default commission plan is not sortable. It will be validated at the end - after all the other plans.","not about storewide default commission plan","affiliate-for-woocommerce")),m("p",null,_x("Learn more: ","text to view documentation link","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 hover:underline",target:"_blank",href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-commission-plans/"},_x("How to create custom commission plans","documentation link to commissions plan feature","affiliate-for-woocommerce"))),f.getAFWParams("subscriptionDescForPlan")?m("[",null,m("hr",null),m("p",null,f.getAFWParams("subscriptionDescForPlan"))):""))}}])&&Uo(e.prototype,t),r&&Uo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function $o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Zo(a.key),a)}}function Zo(e){var t=function(e,t){if("object"!=Qo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Qo(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qo(t)?t:t+""}var Xo=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)},(t=[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new M(this.urlParams)}},{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,m(Mt,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),M.data.commissions.length>0?m("[",null,m(At,{type:"recurring_setting_deprecated"}),m(Yo,null)):g.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},__("No commission plans yet.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,__('Go ahead, click that "Add a Plan" button in the top bar to create your first commission.',"affiliate-for-woocommerce")))),-1===U.currentCommissionID?m(Ro,{id:U.currentCommissionID}):""),D.flags.showNotification?m(Ua,null):null)}}])&&$o(e.prototype,t),r&&$o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}function ti(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ri(a.key),a)}}function ri(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ei(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}var ai=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}return t=e,a=[{key:"initialize",value:function(){e.details={basicSettings:{afwc_pname:"ref",afwc_use_referral_coupons:"yes",afwc_allow_self_refer:"yes",afwc_contact_admin_email_address:""},commissions:{amount:0,type:"Percentage",afwc_cookie_expiration:60,afwc_credit_affiliate:"last"},affiliateSetup:{publishRegForm:"no",affiliateRoles:[],afwc_show_registration_form_in_account:"yes"},payouts:{afwc_minimum_commission_balance:50,afwc_order_refund_period_in_days:30},gettingStarted:{enableAffiliate:"no"}}}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}},{key:"updateBasicSettings",value:function(){return new Promise(function(t,r){var a;g.showLoader=!0,g.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"setup_basic_settings",settings:JSON.stringify(null==e||null===(a=e.details)||void 0===a?void 0:a.basicSettings),security:f.getAFWParams("security.onboarding.setupBasicSettings")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){g.showLoader=!1,e&&e.success?t():r()}})})}},{key:"updateCommissions",value:function(){return new Promise(function(t,r){var a,o,i;g.showLoader=!0,g.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"setup_commissions_and_settings",commission_amount:(null==e||null===(a=e.details)||void 0===a||null===(a=a.commissions)||void 0===a?void 0:a.amount)||0,commission_type:(null==e||null===(o=e.details)||void 0===o||null===(o=o.commissions)||void 0===o?void 0:o.type)||"Percentage",settings:JSON.stringify(null==e||null===(i=e.details)||void 0===i?void 0:i.commissions),security:f.getAFWParams("security.onboarding.setupCommissions")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){g.showLoader=!1,e&&e.success?t():r()}})})}},{key:"updatePayoutSettings",value:function(){return new Promise(function(t,r){var a;g.showLoader=!0,g.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"setup_payouts_settings",settings:JSON.stringify(null==e||null===(a=e.details)||void 0===a?void 0:a.payouts),security:f.getAFWParams("security.onboarding.setupPayouts")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){g.showLoader=!1,e&&e.success?t():r()}})})}},{key:"updateAffiliates",value:function(){return new Promise(function(t,r){var a,o,i;g.showLoader=!0,g.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"setup_affiliates",publish_registration_page:(null==e||null===(a=e.details)||void 0===a||null===(a=a.affiliateSetup)||void 0===a?void 0:a.publishRegForm)||"no",affiliate_roles:JSON.stringify((null==e||null===(o=e.details)||void 0===o||null===(o=o.affiliateSetup)||void 0===o?void 0:o.affiliateRoles)||[]),register_as_affiliate:(null==e||null===(i=e.details)||void 0===i||null===(i=i.affiliateSetup)||void 0===i?void 0:i.afwc_show_registration_form_in_account)||"no",security:f.getAFWParams("security.onboarding.setupAffiliates")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){g.showLoader=!1,e&&e.success?t():r()}})})}},{key:"finishSteps",value:function(){return new Promise(function(t,r){var a;g.showLoader=!0,g.msg=_x("Updating","Label for loader while updating the record","affiliate-for-woocommerce"),f.requestHandler({requestData:{cmd:"setup_complete_onboarding",enable_affiliate:(null==e||null===(a=e.details)||void 0===a||null===(a=a.gettingStarted)||void 0===a?void 0:a.enableAffiliate)||"",security:f.getAFWParams("security.onboarding.setupComplete")||"",dashboard:"afwc_onboarding_controller"},callback:function(e){g.showLoader=!1,e&&e.success?window.location.href=f.getAFWParams("dashboardLink")||"":r()}})})}}],(r=null)&&ti(t.prototype,r),a&&ti(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function oi(e){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(e)}function ii(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ni(a.key),a)}}function ni(e){var t=function(e,t){if("object"!=oi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=oi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oi(t)?t:t+""}ai.initialize();var si=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&r&&null!=ai&&null!==(e=ai.details)&&void 0!==e&&null!==(e=e.affiliateSetup)&&void 0!==e&&e.hasOwnProperty(t)&&(ai.details.affiliateSetup[t]=r)}},{key:"initializeSelect2",value:function(){var e=this,t=jQuery(".afwc-user-roles");t.length&&(t.select2(),t.on("select2:select",function(){t.trigger("change"),e.updateProps("affiliateRoles",t.select2("val")||[])}))}},{key:"oncreate",value:function(){this.initializeSelect2()}},{key:"view",value:function(){var e,t,r=this,a=f.getAFWParams("userRoles")||{};return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h3",{class:"text-xl leading-snug text-gray-800"},_x("Choosing affiliates","Title for setting up affiliates in onboarding","affiliate-for-woocommerce")),m("p",{class:"mt-2 text-gray-500"},_x("Set up your affiliate program and allow affiliates to join.","Description for setting up affiliates in onboarding","affiliate-for-woocommerce"))),m("form",null,m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("p",{class:"text-lg"},_x("Registration form","Title for registration form","affiliate-for-woocommerce")),m("div",{class:"flex flex-row items-center space-x-2"},m("input",{id:"publish_registration_form",type:"checkbox",class:"w-5 h-5 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onchange:function(e){var t;return r.updateProps("publishRegForm",null!=e&&null!==(t=e.target)&&void 0!==t&&t.checked?"yes":"no")}}),m("label",{for:"publish_registration_form",class:"text-lg font-semibold"},_x("Invite users to sign up as affiliates through the registration form","Label for enabling registration form","affiliate-for-woocommerce"))),m("div",{class:"space-y-2"},m("p",{class:"text-sm text-gray-500"},_x("We have automatically created a default form and added it to a page on your site - ","Message for default registration form and page created","affiliate-for-woocommerce"),m("span",null,"["),m("a",{href:afwcDashboardParams.afwDocLink+"how-to-create-affiliate-registration-form-to-let-users-sign-up-for-your-affiliate-program/",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("View Docs","View docs link text","affiliate-for-woocommerce")),m("span",null,"]")),m("p",{class:""},f.getAFWParams("regFormPageLink")?m("[",null,m("a",{href:f.getAFWParams("regFormPageLink"),target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("Review page","Link to review registration form page","affiliate-for-woocommerce")),m("span",{class:"mx-2"},"|")):"",m("a",{href:f.getAFWParams("regFormSettingLink")||"",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("Edit form","Link to edit default registration form setting","affiliate-for-woocommerce"))))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("p",{class:"text-lg"},_x("Use existing users to grow your affiliate network","Title for making existing users as affiliates","affiliate-for-woocommerce")),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("label",{for:"affiliate_user_roles",class:"text-base font-semibold"},_x("Convert users by their user roles","Label for converting users by user role to affiliate setting","affiliate-for-woocommerce")),m("div",{class:"flex items-center gap-3 w-full"},m("select",{id:"affiliate_user_roles","data-placeholder":_x("Select user roles","Placeholder for selecting affiliate user roles","affiliate-for-woocommerce"),class:"afwc-user-roles py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full wc-enhanced-select","aria-label":_x("Affiliate user roles","Title for affiliate user roles","affiliate-for-woocommerce"),multiple:"multiple"},a&&(null===(e=Object.keys(a))||void 0===e?void 0:e.length)&&Object.keys(a).map(function(e){return m("option",{value:e},a[e]||"")}))),m("p",{class:"text-sm text-gray-500"},_x("Select user roles to automatically make them your affiliates - ","Description for selecting user roles","affiliate-for-woocommerce"),m("span",null,"["),m("a",{href:afwcDashboardParams.afwDocLink+"#section-8",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("View Docs","View Docs link text","affiliate-for-woocommerce")),m("span",null,"]"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-2"},m("input",{id:"afwc_show_registration_form_in_account",class:"w-5 h-5 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==ai||null===(t=ai.details)||void 0===t||null===(t=t.affiliateSetup)||void 0===t?void 0:t.afwc_show_registration_form_in_account),onchange:function(e){return r.updateProps("afwc_show_registration_form_in_account",e.target.checked?"yes":"no")}}),m("label",{for:"afwc_show_registration_form_in_account",class:"text-base font-semibold"},_x("Register as an affiliate","Label for register as an affiliate setting","affiliate-for-woocommerce"))),m("p",{class:"text-sm text-gray-500"},_x("Allow existing users to apply as affiliates directly from their My Account page - ","Description for register as an affiliate setting","affiliate-for-woocommerce"),m("span",null,"["),m("a",{href:afwcDashboardParams.afwDocLink+"settings/#section-44",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("View Docs","View Docs link text","affiliate-for-woocommerce")),m("span",null,"]"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm"},m("p",{class:"text-sm text-gray-500"},_x("You can make existing/individual users as affiliates from their User Profile - ","Description for making individual user as an affiliate","affiliate-for-woocommerce"),m("span",null,"["),m("a",{href:afwcDashboardParams.afwDocLink+"#section-7",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("View Docs","View Docs link text","affiliate-for-woocommerce")),m("span",null,"]")))))))}}],t&&ii(e.prototype,t),r&&ii(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function ci(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ui(a.key),a)}}function ui(e){var t=function(e,t){if("object"!=li(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=li(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==li(t)?t:t+""}var fi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&null!=ai&&null!==(e=ai.details)&&void 0!==e&&null!==(e=e.basicSettings)&&void 0!==e&&e.hasOwnProperty(t)&&(ai.details.basicSettings[t]=r)}},{key:"view",value:function(){var e,t,r,a,o=this,i=f.getAFWParams("onboarding.sampleAffiliateLink");return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h3",{class:"text-xl leading-snug text-gray-800"},_x("A few essential things we need to set up","Title for basic settings in onboarding","affiliate-for-woocommerce")),m("p",{class:"mt-2 text-gray-500"},_x("Please set up the following options that are at the core of your affiliate program. If you are not quite sure how you want these options set, go with defaults and change them later.","Description for basic settings in onboarding","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",null,m("label",{for:"afwc_pname",class:"text-lg font-semibold"},_x("Tracking parameter name","Label for tracking param name setting","affiliate-for-woocommerce"))),m("div",null,m("input",{id:"afwc_pname",class:"form-input sm:text-sm sm:leading-5 w-1/2",type:"text",autocomplete:"off",value:(null==ai||null===(e=ai.details)||void 0===e||null===(e=e.basicSettings)||void 0===e?void 0:e.afwc_pname)||"",oninput:function(e){var t;return o.updateProps("afwc_pname",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"")}})),m("p",{class:"text-sm text-gray-500"},_x("This will be added to referral URLs to track affiliate traffic. No special characters or numbers allowed. Example link: ","Tracking parameter name setting description","affiliate-for-woocommerce"),i)),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-2"},m("input",{id:"afwc_use_referral_coupons",class:"w-5 h-5 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==ai||null===(t=ai.details)||void 0===t||null===(t=t.basicSettings)||void 0===t?void 0:t.afwc_use_referral_coupons),onchange:function(e){return o.updateProps("afwc_use_referral_coupons",e.target.checked?"yes":"no")}}),m("label",{for:"afwc_use_referral_coupons",class:"text-lg font-semibold"},_x("Enable use of referral coupons","Label for enabling referral coupons setting","affiliate-for-woocommerce"))),m("p",{class:"text-sm text-gray-500"},_x("Let affiliates earn commission when customers use their coupon - even without clicking their link. You can create the coupons later.","Description for enabling referral coupons setting","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("div",{class:"flex flex-row items-center space-x-2"},m("input",{id:"afwc_allow_self_refer",class:"w-5 h-5 text-indigo-600 transition duration-150 ease-in-out form-checkbox",type:"checkbox",checked:"yes"===(null==ai||null===(r=ai.details)||void 0===r||null===(r=r.basicSettings)||void 0===r?void 0:r.afwc_allow_self_refer),onchange:function(e){return o.updateProps("afwc_allow_self_refer",e.target.checked?"yes":"no")}}),m("label",{for:"afwc_allow_self_refer",class:"text-lg font-semibold"},_x("Allow self-referrals","Label for affiliate self-refer setting","affiliate-for-woocommerce"))),m("p",{class:"text-sm text-gray-500"},_x("Let affiliates earn commission when they buy from your store using their own link or coupon. Turn this off to help prevent misuse or self-referral fraud.","Affiliate self-refer setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",null,m("label",{for:"afwc_contact_admin_email_address",class:"text-lg font-semibold"},_x("Affiliate manager email","Label for affiliate manager email setting","affiliate-for-woocommerce"))),m("div",null,m("input",{id:"afwc_contact_admin_email_address",class:"form-input sm:text-sm sm:leading-5 w-1/2",type:"text",autocomplete:"off",placeholder:_x("Enter email address","Placeholder to enter email address for affiliate manager email setting","affiliate-for-woocommerce"),value:(null==ai||null===(a=ai.details)||void 0===a||null===(a=a.basicSettings)||void 0===a?void 0:a.afwc_contact_admin_email_address)||"",oninput:function(e){var t;return o.updateProps("afwc_contact_admin_email_address",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"")}})),m("p",{class:"text-sm text-gray-500"},_x("This is the email where you will receive all affiliate program emails and your affiliates will use to contact you. And it'll show as a 'Contact' link in their dashboard. Leave it blank if you don't want to show any contact link.","Affiliate manager email setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("span",{class:"text-sm font-semibold"},_x("Important: ","Label for My Account setup note","affiliate-for-woocommerce")),m("span",{class:"text-sm"},_x("The affiliate dashboard is set up automatically, giving affiliates access to their account, referral links, coupons, and other stats.","My Account setup note","affiliate-for-woocommerce")),m("p",{class:"text-sm text-gray-500"},_x("You can review/change it later from the settings.","My Account setup note","affiliate-for-woocommerce")))))}}],t&&ci(e.prototype,t),r&&ci(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function di(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pi(a.key),a)}}function pi(e){var t=function(e,t){if("object"!=mi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=mi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mi(t)?t:t+""}var yi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&r&&null!=ai&&null!==(e=ai.details)&&void 0!==e&&null!==(e=e.commissions)&&void 0!==e&&e.hasOwnProperty(t)&&(ai.details.commissions[t]=r)}},{key:"view",value:function(){var e,t,r,a,o,i=this;return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h3",{class:"text-xl leading-snug text-gray-800"},_x("Commissions","Title for setting up commission settings in onboarding","affiliate-for-woocommerce")),m("p",{class:"mt-2 text-gray-500"},_x("Set up referral and default commission rate for affiliates.","Description for setting up commission plan in onboarding","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",null,m("label",{for:"afwc_cookie_expiration",class:"text-lg font-semibold"},_x("Cookie duration (in days)","Label for cookie duration setting","affiliate-for-woocommerce"))),m("div",null,m("input",{id:"afwc_cookie_expiration",class:"form-input sm:text-sm sm:leading-5 w-1/2",type:"number",autocomplete:"off",min:"0",value:(null==ai||null===(e=ai.details)||void 0===e||null===(e=e.commissions)||void 0===e?void 0:e.afwc_cookie_expiration)||60,oninput:function(e){var t;return i.updateProps("afwc_cookie_expiration",parseInt(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||0)}})),m("p",{class:"text-sm text-gray-500"},_x("Referrals are tracked using browser cookies. Set how long you want to credit affiliates for a sale after someone clicks their link or applies a coupon. Use '0' for same-visit only or 36500 for lifetime.","Cookie duration setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("label",{class:"text-lg font-semibold"},_x("Give commission to the affiliate who","Label for credit first or last affiliate setting","affiliate-for-woocommerce")),m("div",{class:"flex items-center space-x-1"},m("input",{class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio sm:text-sm sm:leading-5",type:"radio",value:"first",name:"afwc_credit_affiliate",checked:"first"===(null==ai||null===(t=ai.details)||void 0===t||null===(t=t.commissions)||void 0===t?void 0:t.afwc_credit_affiliate),onchange:function(e){var t;return i.updateProps("afwc_credit_affiliate",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"first")}}),m("label",{class:"text-sm"},_x("First referred the customer","Label for whether to credit first affiliate who referred to the customer","affiliate-for-woocommerce"))),m("div",{class:"flex items-center space-x-1"},m("input",{class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio sm:text-sm sm:leading-5",type:"radio",value:"last",name:"afwc_credit_affiliate",checked:"last"===(null==ai||null===(r=ai.details)||void 0===r||null===(r=r.commissions)||void 0===r?void 0:r.afwc_credit_affiliate),onchange:function(e){var t;return i.updateProps("afwc_credit_affiliate",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"last")}}),m("label",{class:"text-sm"},_x("Last referred the customer","Label for whether to credit last affiliate who referred to the customer","affiliate-for-woocommerce"))),m("p",{class:"text-sm text-gray-500"},_x("Decide whether to credit the first or last affiliate who referred the customer before a purchase.","Credit first or last affiliate setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-3"},m("div",{class:"space-y-4"},m("div",{class:""},m("label",{for:"commission",class:"text-lg font-semibold"},_x("Default commission rate","Label for default commission plan rate","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md flex w-full"},m("input",{id:"commission",class:"block w-1/4 form-input sm:text-sm sm:leading-5",type:"number",min:"0",autocomplete:"off",placeholder:_x("Set amount","Placeholder to set default commission rate","affiliate-for-woocommerce"),oninput:function(e){var t,r;return i.updateProps("amount",(null===(t=parseFloat(null==e||null===(r=e.target)||void 0===r?void 0:r.value))||void 0===t?void 0:t.toFixed(2))||"0.00")}}),m("div",{class:"w-1"}),m("div",{class:"inset-y-0"},m("select",{"aria-label":_x("Commission Type","Commission plan type","affiliate-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent form-select sm:text-sm sm:leading-5 w-40",id:"commission_type",onchange:function(e){var t;return i.updateProps("type",(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"Percentage")}},m("option",{selected:"Percentage"===(null==ai||null===(a=ai.details)||void 0===a?void 0:a.commissions.type)?"selected":"",value:"Percentage"},_x("Percentage (%)","Commission plan type: percentage","affiliate-for-woocommerce")),m("option",{selected:"Flat"===(null==ai||null===(o=ai.details)||void 0===o?void 0:o.commissions.type)?"selected":"",value:"Flat"},f.getAFWParams("storeCurrencyCode")?sprintf(_x("Flat (%s)","Commission plan type: flat with store currency code","affiliate-for-woocommerce"),f.getAFWParams("storeCurrencyCode")):_x("Flat","Commission plan type: flat","affiliate-for-woocommerce"))))),m("ul",{class:"list-disc list-inside text-sm text-gray-500"},m("li",null,m("span",{class:"font-semibold"},_x("Create unlimited custom commission plans under Affiliate > Plans  based on affiliates, products, referral sources and more.","different type of commission setup description","affiliate-for-woocommerce"))),m("li",null,_x("Commissions are calculated on the order subtotal only (excluding taxes, shipping and coupon discounts).","how commission calculation works description","affiliate-for-woocommerce")))))))}}],t&&di(e.prototype,t),r&&di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function vi(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hi(a.key),a)}}function hi(e){var t=function(e,t){if("object"!=gi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=gi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gi(t)?t:t+""}var bi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&r&&null!=ai&&null!==(e=ai.details)&&void 0!==e&&null!==(e=e.payouts)&&void 0!==e&&e.hasOwnProperty(t)&&(ai.details.payouts[t]=r)}},{key:"view",value:function(){var e,t,r=this;return m("div",{class:"w-full"},m("div",{class:"mb-6"},m("h3",{class:"text-xl leading-snug text-gray-800"},_x("Payouts","Title for payouts settings in onboarding","affiliate-for-woocommerce")),m("p",{class:"mt-2 text-gray-500"},_x("Configure a few settings for commission payouts. Choose your preferred payout methods later in settings.","Description for setting up payout settings in onboarding","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",null,m("label",{for:"afwc_order_refund_period_in_days",class:"text-lg font-semibold"},_x("Refund period (in days)","Label for refund period setting","affiliate-for-woocommerce"))),m("div",null,m("input",{id:"afwc_order_refund_period_in_days",class:"form-input sm:text-sm sm:leading-5 w-1/2",type:"number",autocomplete:"off",min:"0",value:(null==ai||null===(e=ai.details)||void 0===e||null===(e=e.payouts)||void 0===e?void 0:e.afwc_order_refund_period_in_days)||30,oninput:function(e){var t;return r.updateProps("afwc_order_refund_period_in_days",parseInt(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||0)}})),m("p",{class:"text-sm text-gray-500"},_x("Set how many days to wait before paying commission - just in case the order gets refunded. Enter '0' if you don't offer refunds. Referrals in this period will show how many days are left.","Refund period setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",null,m("label",{for:"afwc_minimum_commission_balance",class:"text-lg font-semibold"},_x("Minimum affiliate commission for payout","Label for minimum affiliate commission payout setting","affiliate-for-woocommerce"))),m("div",null,m("input",{id:"afwc_minimum_commission_balance",class:"form-input sm:text-sm sm:leading-5",type:"number",autocomplete:"off",min:"0",value:(null==ai||null===(t=ai.details)||void 0===t||null===(t=t.payouts)||void 0===t?void 0:t.afwc_minimum_commission_balance)||50,oninput:function(e){var t;return r.updateProps("afwc_minimum_commission_balance",parseInt(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||0)}})),m("p",{class:"text-sm text-gray-500"},_x("An affiliate's earnings must reach this threshold to qualify for a payout. Only referrals from eligible orders will be included.","Minimum affiliate commission payout setting description","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",{class:"text-lg font-semibold"},_x("Supported Payout Methods","Text for supported payout methods","affiliate-for-woocommerce")),m("p",{class:"text-sm"},_x("PayPal | Stripe | Coupon | Store Credit","List of payout methods supported","affiliate-for-woocommerce")),m("p",{class:"text-sm text-gray-500"},_x("Both automatic and manual payouts are supported. You can configure each method later.","Payouts methods configuration note","affiliate-for-woocommerce"))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",{class:"text-lg font-semibold"},_x("Automatic Payouts","Text for automatic payouts supported","affiliate-for-woocommerce")),m("p",{class:"text-sm text-gray-500"},_x("We've got automatic commission payouts too! You can set them up anytime from the settings.","Automatic payouts configuration note","affiliate-for-woocommerce")))))}}],t&&vi(e.prototype,t),r&&vi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function xi(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_i(a.key),a)}}function _i(e){var t=function(e,t){if("object"!=wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=wi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wi(t)?t:t+""}var ki=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"updateProps",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&r&&null!=ai&&null!==(e=ai.details)&&void 0!==e&&null!==(e=e.gettingStarted)&&void 0!==e&&e.hasOwnProperty(t)&&(ai.details.gettingStarted[t]=r)}},{key:"view",value:function(){var e=this;return m("div",{class:"w-full"},m("div",{class:"mb-6 space-y-4"},m("h3",{class:"text-xl leading-snug text-gray-800"},_x("Almost there, few more:","Title for before proceed in onboarding","affiliate-for-woocommerce")),m("p",{class:"mt-2 text-gray-500"},_x("Take note of few more things to do","Description for before proceed in onboarding","affiliate-for-woocommerce"))),m("div",{class:"space-y-8"},m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",{class:"font-medium text-sm text-gray-600"},_x("Important: Review these ","caching note liner start","affiliate-for-woocommerce"),m("a",{href:afwcDashboardParams.afwDocLink+"how-does-affiliate-for-woocommerce-plugin-work-with-caching",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("settings to tweak for referral tracking to work with your caching plugin","works with caching documentation link text","affiliate-for-woocommerce")))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm space-y-2"},m("p",{class:"text-sm text-gray-500"},_x("Recommended: Enable this to test affiliate functionality with your account.","Description for referral links and caching","affiliate-for-woocommerce")),m("div",{class:"flex flex-row items-center space-x-2"},m("input",{id:"enable_affiliate",type:"checkbox",class:"w-5 h-5 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onchange:function(t){var r;return e.updateProps("enableAffiliate",null!=t&&null!==(r=t.target)&&void 0!==r&&r.checked?"yes":"no")}}),m("label",{for:"enable_affiliate",class:"text-base"},_x("Make me an affiliate","Label for making current user as an affiliate","affiliate-for-woocommerce")))),m("div",{class:"bg-gray-50 p-3 rounded shadow-sm my-6 space-y-4"},m("h2",{class:"text-xl leading-snug text-gray-800"},_x("You're all set up and good to go!","Title for Getting started step","affiliate-for-woocommerce")),m("p",{class:"text-sm text-gray-500"},_x("Affiliate For WooCommerce is ready to run your affiliate program.","Description for Getting started step","affiliate-for-woocommerce")),m("p",{class:"text-sm flex justify-start space-x-2"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 mr-2"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})),m("span",null,_x("We have enabled a few emails for you automatically - ","Description for Getting started step","affiliate-for-woocommerce"),m("a",{href:f.getAFWParams("emailSettingsLink")||"",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-800"},_x("Review all emails","Visit email settings link label","affiliate-for-woocommerce")))),m("p",{class:"text-sm flex justify-start space-x-2"},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 mr-2"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})),m("span",null,_x("You can always visit the plugin's settings to view or modify the other settings - ","Description for viewing settings page","affiliate-for-woocommerce"),m("a",{href:f.getAFWParams("settingsLink")||"",target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-900"},_x("Review settings","Visit settings link label","affiliate-for-woocommerce")))),m("p",{class:"text-sm flex justify-start space-x-2"},m("svg",{stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",class:"h-6 w-6 mr-2"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),m("a",{href:afwcDashboardParams.afwDocLink,target:"_blank",class:"cursor-pointer text-indigo-600 hover:underline hover:text-indigo-900"},_x("Explore the documentation","View docs text","affiliate-for-woocommerce"))))))}}],t&&xi(e.prototype,t),r&&xi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function Si(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ji(a.key),a)}}function ji(e){var t=function(e,t){if("object"!=Pi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Pi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pi(t)?t:t+""}var Oi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(){return m("div",{class:"p-6 border rounded-lg bg-white shadow mx-auto max-w-2xl text-center"},m("h2",{class:"font-bold text-3xl mx-auto max-w-xl mb-4 leading-10"},_x("Let's kickstart your affiliate program!","Welcome headline on the onboarding","affiliate-for-woocommerce")),m("div",{class:""},m("p",{class:"my-4 text-sm font-base"},_x("Glad to have you onboard.","text for onboarding welcome page","affiliate-for-woocommerce")),m("p",{class:"my-4 text-sm font-base"},_x("You're now part of 5,000+ smart users growing their business and boosting revenue.","text for onboarding welcome page","affiliate-for-woocommerce")),m("p",{class:"my-4 text-sm font-base"},_x("Click the button below, and we'll walk you through the setup. It only takes a couple of minutes.","text for onboarding welcome page","affiliate-for-woocommerce")),m("p",{class:"my-4 text-sm font-base"},_x("And don't worry, you can modify these later at anytime.","text for onboarding welcome page","affiliate-for-woocommerce"))),m("div",{class:"flex flex-col items-center"},m("button",{class:"w-64 h-11 mb-4 px-4 py-2 text-white text-base bg-indigo-600 hover:bg-indigo-500 font-medium rounded-md transition duration-150 ease-in-out focus:outline-none",onclick:function(){return Fi.started=!0}},_x("I'm ready, let's get started","Start button label","affiliate-for-woocommerce")),m("a",{class:"cursor-pointer text-gray-400 hover:underline hover:text-gray-500",href:f.getAFWParams("dashboardLink")||""},_x("Skip this and go to Dashboard","Skip button label","affiliate-for-woocommerce"),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-block ml-1 mb-0.5"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})))))}}])&&Si(e.prototype,t),r&&Si(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ci(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,a,o,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return Ai(c,"_invoke",function(r,a,o){var i,s,l,c=0,u=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,l=e,m.n=r,n}};function d(r,a){for(s=r,l=a,t=0;!f&&c&&!o&&t<u.length;t++){var o,i=u[t],d=m.p,p=i[2];r>3?(o=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,m.v=a,m.n=i[1]):d<p&&(o=r<3||i[0]>a||a>p)&&(i[4]=r,i[5]=a,m.n=p,s=0))}if(o||r>1)return n;throw f=!0,a}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),s=u,l=p;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(m.n=-1),d(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,i),!0),c}var n={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Ai(t={},a,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Ai(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,Ai(f,"constructor",c),Ai(c,"constructor",l),l.displayName="GeneratorFunction",Ai(c,o,"GeneratorFunction"),Ai(f),Ai(f,o,"Generator"),Ai(f,a,function(){return this}),Ai(f,"toString",function(){return"[object Generator]"}),(Ci=function(){return{w:i,m}})()}function Ai(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ai=function(e,t,r,a){function i(t,r){Ai(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},Ai(e,t,r,a)}function Ti(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function Li(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function n(e){Ti(i,a,o,n,s,"next",e)}function s(e){Ti(i,a,o,n,s,"throw",e)}n(void 0)})}}function Ii(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ei(a.key),a)}}function Ei(e){var t=function(e,t){if("object"!=Di(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Di(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Di(t)?t:t+""}var Fi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.started=!1,this.currentStep=1,this.steps=[{id:1,update:ai.updateBasicSettings,label:_x("Essential settings","Heading for basic setting steps","affiliate-for-woocommerce")},{id:2,update:ai.updateCommissions,label:_x("Commissions","Heading for commission setup step","affiliate-for-woocommerce")},{id:3,update:ai.updatePayoutSettings,label:_x("Payouts","Heading for payout settings setup step","affiliate-for-woocommerce")},{id:4,update:ai.updateAffiliates,label:_x("Affiliates","Heading for affiliate setup step","affiliate-for-woocommerce")},{id:5,update:ai.finishSteps,label:_x("Getting started","Heading for getting started step","affiliate-for-woocommerce")}],this.finishStep=this.steps.length,this.hideFooter()}return t=e,r=[{key:"currentStep",get:function(){return parseInt(this._currentStep)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._currentStep=parseInt(e)}},{key:"hideFooter",value:function(){var e=document.getElementById("wpfooter");e&&(e.style.visibility="hidden")}},{key:"headers",value:function(){var e=this;return m("ol",{class:"flex justify-center items-center text-center w-full p-6 mb-5 space-x-2 text-sm sm:p-4 sm:space-x-4 sm:text-base"},this.steps&&this.steps.map(function(t){return m("li",{key:t.id,class:"flex items-center m-0 ".concat(e.currentStep===t.id?"text-indigo-600 font-medium":"text-gray-400")},e.currentStep>t.id&&e.currentStep-1===t.id?m("a",{class:"flex items-center cursor-pointer hover:underline hover:text-indigo-500",onclick:function(){return e.currentStep--}},t.label,t.id!==e.steps.length&&m("svg",{class:"w-3 h-3 ml-2 sm:ml-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 10"},m("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m7 9 4-4-4-4M1 9l4-4-4-4"}))):m("[",null,t.label,t.id!==e.steps.length&&m("svg",{class:"w-3 h-3 ml-2 sm:ml-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 10"},m("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m7 9 4-4-4-4M1 9l4-4-4-4"}))))}))}},{key:"bodyContent",value:function(){switch(this.currentStep){case 1:return m(fi,null);case 2:return m(yi,null);case 3:return m(bi,null);case 4:return m(si,null);case 5:return m(ki,null)}}},{key:"body",value:function(){var e=this;return m("div",{class:"p-6 border rounded-lg bg-white shadow"},this.bodyContent(),m("div",{class:"flex justify-end mt-4"},this.finishStep>this.currentStep&&m("a",{class:"px-4 py-2 cursor-pointer text-gray-400 hover:underline hover:text-gray-500",onclick:function(){return e.currentStep++}},_x("Skip","Skip button label","affiliate-for-woocommerce")),f.getAFWParams("isMigrationSourceAvailable")&&this.finishStep===this.currentStep&&m("button",{class:"px-4 py-2 mr-2 text-white bg-indigo-600 hover:bg-indigo-500 font-medium transition duration-150 ease-in-out border border-transparent rounded-md focus:outline-none",onclick:function(){return lt.migrateData()}},_x("Import affiliates","Import affiliate button","affiliate-for-woocommerce")),m("button",{class:"px-4 py-2 mr-2 text-white font-medium transition duration-150 ease-in-out border border-transparent rounded-md focus:outline-none ".concat(this.finishStep===this.currentStep?"w-72 text-base bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"),onclick:Li(Ci().m(function t(){var r;return Ci().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(r=e.steps.find(function(t){return t.id===e.currentStep}))||void 0===r?void 0:r.update();case 1:e.finishStep!==e.currentStep&&e.currentStep++;case 2:return t.a(2)}},t)}))},this.finishStep===this.currentStep?_x("Ready to roll - open dashboard","Onboarding complete button label","affiliate-for-woocommerce"):_x("Save & Next","Save and next screen button label","affiliate-for-woocommerce"))))}},{key:"branding",value:function(){return m("div",{class:"flex justify-center items-center w-full p-6 space-x-2"},m("div",{class:"py-2 px-4 rounded inline-flex items-center"},f.getAFWParams("assetsPath")?m("img",{src:f.getAFWParams("assetsPath")+"images/affiliate-16x16.svg",alt:_x("Affiliate For WooCommerce logo","Plugin icon alt text in onboarding","affiliate-for-woocommerce"),class:"w-14 h-14 mr-4 overflow-hidden"}):"",m("h1",{class:"font-medium text-2xl"},_x("Affiliate For WooCommerce","Plugin name in onboarding","affiliate-for-woocommerce"))))}},{key:"view",value:function(){return m("div",{class:"afwc-onboarding flex flex-col items-center mt-2"},this.branding(),m("div",{class:"w-full max-w-3xl"},e.started?m("[",null," ",this.headers()," ",this.body()," "):m(Oi,null)),g.showLoader?m(g,{overlay:!0}):"")}}],a=[{key:"started",get:function(){return e._started},set:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e._started=Boolean(t)}}],r&&Ii(t.prototype,r),a&&Ii(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function Ni(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ri(a.key),a)}}function Ri(e){var t=function(e,t){if("object"!=Mi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Mi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mi(t)?t:t+""}var zi=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{}},(t=[{key:"fetch",value:function(){var e,t,r=(null===(e=this.params)||void 0===e?void 0:e.currentPage)&&1<(parseInt(null===(t=this.params)||void 0===t?void 0:t.currentPage)||0);r||Ji.triggerLoader("details",!0),f.requestHandler({requestData:{dashboard:"afwc_pending_payout_controller",cmd:"pending_payouts_details",security:f.getAFWParams("security.pendingPayouts.fetchData")||"",page:this.params.currentPage||1},callback:function(e){var t,a=e.ACK,o=e.data;"Success"===a&&(null!=o&&o.details&&o.details.length>0&&(Ji.details=r?Ji.details.concat(o.details):o.details),Ji.details.isAutomaticPayoutEnabled=o.is_automatic_payouts_enabled||"no"),r||Ji.triggerLoader("details",!1),Ji.loadMore=null==o||null===(t=o.meta)||void 0===t?void 0:t.load_more}})}}])&&Ni(e.prototype,t),r&&Ni(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Wi(e){return Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wi(e)}function Bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(r),!0).forEach(function(t){Hi(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hi(e,t,r){return(t=Ui(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gi(e){return function(e){if(Array.isArray(e))return Vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Ki(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ui(a.key),a)}}function Ui(e){var t=function(e,t){if("object"!=Wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Wi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wi(t)?t:t+""}var Ji=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return t=e,a=[{key:"initialize",value:function(){e.details=[],e.loadMore=!1,e.loader={details:!0,snooze:!0}}},{key:"doSnooze",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t)||(t=[t]),t.length&&(e.triggerLoader("snooze"),f.requestHandler({requestData:{dashboard:"afwc_pending_payout_controller",cmd:"snooze_scheduled_payouts",affiliates:JSON.stringify(t),security:f.getAFWParams("security.pendingPayouts.snoozeScheduledPayouts")||""},callback:function(r){var a=r.success,o=void 0!==a&&a,i=r.data,n=void 0===i?{}:i;if(o){var s=Gi(e.details);null!=n&&n.scheduled_date&&s.map(function(e,r){t.includes(e.affiliate_id)&&(s[r]=qi(qi({},s[r]),{},{scheduled_date:n.scheduled_date||""}))}),e.details=s,e.details.isAutomaticPayoutEnabled=n.is_automatic_payouts_enabled||"no",D.show({status:"success",message:_x("Automatic payout snoozed successfully till next period.","Notification message for successful payout snoozed","affiliate-for-woocommerce")})}else D.show({status:"error",message:(null==n?void 0:n.message)||_x("Could not schedule automatic payout till the next period.","Notification message for failed payout snoozed","affiliate-for-woocommerce")});e.triggerLoader("snooze",!1)}}))}},{key:"triggerLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e.loader[t]=r)}},{key:"isLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&t in e.loader&&e.loader[t]}}],(r=null)&&Ki(t.prototype,r),a&&Ki(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Qi(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$i(a.key),a)}}function $i(e){var t=function(e,t){if("object"!=Yi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Yi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yi(t)?t:t+""}Ji.initialize();var Zi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(e){var t,r,a=(null==e||null===(t=e.attrs)||void 0===t?void 0:t.doSnooze)||function(){return""};return 0<((null==Ji||null===(r=Ji.details)||void 0===r?void 0:r.length)||0)?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Name","Pending Payout table row title for affiliate name","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Payout method","Pending Payout table row title for payout method","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Total unpaid commissions","Pending Payout table row title for unpaid commissions","affiliate-for-woocommerce")),"yes"===Ji.details.isAutomaticPayoutEnabled?m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},_x("Total scheduled commissions","Pending Payout table row title for scheduled commissions","affiliate-for-woocommerce")):"")),m("tbody",{class:"bg-white"},null==Ji?void 0:Ji.details.map(function(e){return m("tr",{key:e.affiliate_id||Math.floor(100*Math.random())},m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-nowrap border-b border-gray-200"},m("p",null,e.affiliate_name||""),m("p",null,"(",e.affiliate_email||"",")")),m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-500 whitespace-nowrap border-b border-gray-200"},m("p",null,e.payout_method||"-")),m("td",{class:"px-6 py-3 text-sm font-medium text-right leading-5 text-gray-500 whitespace-nowrap border-b border-gray-200 numeric"},afwcDashboardParams.currencySymbol,e.unpaid_amount||0),"yes"===Ji.details.isAutomaticPayoutEnabled?m("td",{class:"px-6 py-3 text-sm leading-5 font-medium text-right text-gray-500 whitespace-nowrap border-b border-gray-200 numeric"},m("p",{class:"font-medium"},afwcDashboardParams.currencySymbol,e.scheduled_amount||0),e.scheduled_date?m("[",null,m("a",{class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline cursor-pointer",onclick:function(){return a(e.affiliate_id||0)}},_x("Snooze","Link to snooze the scheduled payout date","affiliate-for-woocommerce")),m("p",null,"(",e.scheduled_date||"",")")):""):"")}))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No outstanding payouts.","empty pending payout message","affiliate-for-woocommerce"))}}])&&Qi(e.prototype,t),r&&Qi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function en(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tn(a.key),a)}}function tn(e){var t=function(e,t){if("object"!=Xi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Xi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xi(t)?t:t+""}function rn(e,t,r){return t=on(t),function(e,t){if(t&&("object"==Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,an()?Reflect.construct(t,r||[],on(e).constructor):t.apply(e,r))}function an(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(an=function(){return!!e})()}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}var sn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rn(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(t,e),r=t,a=[{key:"oninit",value:function(){this.doInit()}},{key:"onupdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doUpdate(e)}},{key:"loadData",value:function(){new zi(null==this?void 0:this.params).fetch()}},{key:"view",value:function(){var e=this;return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8"},m("h3",{class:"text-lg font-bold text-gray-600 sm:text-3xl leading-8 mb-2"},_x("Pending Payouts","Pending Payout screen headline","affiliate-for-woocommerce")),m("section",{class:"space-y-6 text-gray-500 py-3"},m("p",null,_x("Pending Payouts shows a list of affiliates and their unpaid commissions.","description of pending payouts dashboard feature and usage","affiliate-for-woocommerce")),m("p",null,_x("If automatic payouts are enabled, the Total Scheduled Commissions column will show the commissions your affiliates will receive.","description of pending payouts dashboard feature and a new column based on automatic payouts","affiliate-for-woocommerce")),m("p",null,_x("Commissions in the Total Scheduled Commissions are calculated based on a few settings: Refund period, Minimum affiliate commission for payout, Maximum commission to pay an affiliate and Automatic payouts include affiliates.","description of pending payouts dashboard for automatic payouts","affiliate-for-woocommerce"))),m("section",{class:"rounded-lg bg-white shadow mt-10"},Ji.isLoading("details")?this.showPlaceholder():m(Zi,{data:Ji.details,doSnooze:Ji.doSnooze}),null!=Ji&&Ji.loadMore&&(null==Ji?void 0:Ji.details.length)>0&&0===Ji.details.length%parseInt(f.getAFWParams("dashboard_pending_payout_batch_limit")||10)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadMore()}},_x("Load More","Load more link for pending payouts","affiliate-for-woocommerce")))):""))}}],a&&en(r.prototype,a),o&&en(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(_r);function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function cn(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,un(a.key),a)}}function un(e){var t=function(e,t){if("object"!=ln(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ln(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ln(t)?t:t+""}var fn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"view",value:function(){var e;return m("div",null,m(Mt,null),m(sn,null),null!=D&&null!==(e=D.flags)&&void 0!==e&&e.showNotification?m(Ua,null):null)}}])&&cn(e.prototype,t),r&&cn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();r.g.__=wp.i18n.__,r.g._x=wp.i18n._x,r.g._nx=wp.i18n._nx,r.g.sprintf=wp.i18n.sprintf;var mn=document.getElementById("afw-admin-dashboard");m.route(mn,"/dashboard",{"/dashboard":{view:function(e){return[m($a,e.attrs)]}},"/dashboard/:id":{view:function(e){return[m($a,e.attrs)]}},"/dashboard/filter/:filterValue":{view:function(e){return[m($a,e.attrs)]}},"/dashboard/:id/filter/:filterValue":{view:function(e){return[m($a,e.attrs)]}},"/campaigns":{view:function(e){return[m(ho,e.attrs)]}},"/campaigns/:id":{view:function(e){return[m(ho,e.attrs)]}},"/plans":{view:function(e){return[m(Xo,e.attrs)]}},"/onboarding":{view:function(e){return[m(Fi,e.attrs)]}},"/pending-payouts":{view:function(e){return[m(fn,e.attrs)]}}})}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(452);r(692)})();